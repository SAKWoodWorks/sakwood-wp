(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3221,e=>{"use strict";var t=e.i(55909),r=e.i(37829),s=e.i(76423),a=e.i(29342);e.i(52892);var o=e.i(80889);e.i(14463);var i=e.i(64008);async function l(e,t){try{let r=await fetch(i.API_CONFIG.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:t}),cache:i.API_CONFIG.cache});if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);let s=await r.json();if(s.errors)return console.error("GraphQL Errors:",s.errors.map(e=>e.message)),console.error("Full error details:",s.errors),null;return s.data}catch(e){return console.error("GraphQL request failed:",e),null}}let n=`
  query GetProducts($first: Int) {
    products(first: $first) {
      nodes {
        id
        databaseId
        name
        slug
        image {
          sourceUrl
        }
        width
        length
        thickness
        volume
        productCategories {
          nodes {
            id
            name
            slug
          }
        }
        ... on SimpleProduct {
          price
          regularPrice
        }
      }
    }
  }
`;function c(e){if(!e)return 0;let t=parseFloat(e.replace(/[à¸¿$,,\s]/g,""));return isNaN(t)?0:t}async function d(e="th",t,r){try{let s="http://localhost:8006/graphql".replace("/graphql","")||"http://localhost:8006",a=`${s}/wp-json/sakwood/v1/products?language=${e}&per_page=${i.APP_CONFIG.productsPerPage}`;t&&(a+=`&category=${encodeURIComponent(t)}`);let o=await fetch(a);if(!o.ok)return console.error("Failed to fetch products:",o.status),g(e);let l=await o.json();if(!Array.isArray(l)||0===l.length)return[];let n=l.map(e=>({id:String(e.id),databaseId:e.databaseId,name:e.name,slug:e.slug,sku:e.sku||void 0,language:e.language||"th",price:e.price||e.prices?.piece||void 0,regularPrice:e.regularPrice||void 0,priceTypes:e.priceTypes||["piece"],prices:e.prices||{},image:e.image?{sourceUrl:e.image.sourceUrl}:void 0,description:"",galleryImages:void 0,thickness:e.thickness||void 0,width:e.width||void 0,length:e.length||void 0,categories:e.categories?e.categories.map(e=>({id:e.id,name:e.name,slug:e.slug})):void 0}));if(r){let e=[...n];switch(r){case"name":return e.sort((e,t)=>e.name.localeCompare(t.name,"th"));case"price":return e.sort((e,t)=>c(e.price)-c(t.price));case"date":return e.sort((e,t)=>t.databaseId-e.databaseId);default:return e}}return n}catch(t){return console.error("Error fetching products via REST API:",t),g(e)}}async function g(e="th"){let t=await l(n,{first:10});return(t?.products?.nodes||[]).map(e=>({...e,image:e.image?function(e){if(!e)return;let t=function(e){if(e)return e.replace("http://sak_wp:80/","http://localhost:8006/")}(e.sourceUrl);if(t)return{...e,sourceUrl:t}}(e.image):void 0,categories:e.productCategories?.nodes?.map(e=>({id:e.id,name:e.name,slug:e.slug}))||[]}))}function u({lang:e,dictionary:i,initialProducts:l,initialCategories:n}){let c=(0,s.useRouter)(),g=(0,s.useSearchParams)(),u=g.get("category"),h=g.get("sort"),[p,m]=(0,r.useState)(l),[x]=(0,r.useState)(n),[b,y]=(0,r.useState)(u),[f,v]=(0,r.useState)(h),[w,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!async function(){j(!0),m(await d(e,b||void 0,f||void 0)),j(!1)}()},[b,f,e]);let N=t=>{y(t);let r=new URLSearchParams;t&&r.set("category",t),f&&r.set("sort",f),c.push(`/${e}/shop${r.toString()?"?"+r.toString():""}`)},k=t=>{v(t);let r=new URLSearchParams;b&&r.set("category",b),r.set("sort",t),c.push(`/${e}/shop${r.toString()?"?"+r.toString():""}`)};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-16",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h1",{className:"text-5xl font-bold text-gray-900 mb-4",children:i.shop.title}),(0,t.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:i.shop.subtitle})]}),(0,t.jsxs)("div",{className:"mb-12 space-y-6",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4 justify-center",children:[(0,t.jsxs)("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:[i.shop.filter_by,":"]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)("button",{onClick:()=>N(null),className:`px-4 py-2 rounded-lg font-medium transition-all ${null===b?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:i.shop.all_categories}),x.map(e=>(0,t.jsxs)("button",{onClick:()=>N(e.slug),className:`px-4 py-2 rounded-lg font-medium transition-all ${b===e.slug?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:[e.name,void 0!==e.count&&(0,t.jsxs)("span",{className:"ml-2 text-sm opacity-75",children:["(",e.count,")"]})]},e.id))]})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,t.jsxs)("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:[i.shop.sort_by||"Sort by",":"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>k("name"),className:`px-4 py-2 rounded-lg font-medium transition-all ${"name"===f?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:i.shop.sort_name||"Name"}),(0,t.jsx)("button",{onClick:()=>k("price"),className:`px-4 py-2 rounded-lg font-medium transition-all ${"price"===f?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:i.shop.sort_price||"Price"}),(0,t.jsx)("button",{onClick:()=>k("date"),className:`px-4 py-2 rounded-lg font-medium transition-all ${"date"===f?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:i.shop.sort_newest||"Newest"})]})]})]}),w?(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:i.shop.loading})]}):p.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:p.map(r=>(0,t.jsx)(o.ProductCard,{product:r,lang:e,dictionary:i},r.id))}):(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:(0,t.jsx)("svg",{className:"w-24 h-24 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-700 mb-2",children:i.shop.no_products}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:i.shop.no_products_desc}),(0,t.jsx)(a.default,{href:`/${"th"===e?"en":"th"}/shop`,className:"inline-block px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors",children:i.shop.view_other_lang})]})]})})}e.s(["ShopPage",()=>u],3221)}]);