(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12611,e=>{"use strict";var s=e.i(55909),a=e.i(29342);function r({items:e,lang:r}){return(0,s.jsx)("nav",{className:"py-4 px-6 bg-slate-50 border-b border-slate-200","aria-label":"Breadcrumb navigation",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsx)("ol",{className:"flex items-center gap-2 text-sm text-slate-600",children:e.map((r,t)=>(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[t>0&&(0,s.jsx)("span",{className:"text-slate-400","aria-hidden":"true",children:"/"}),t===e.length-1?(0,s.jsx)("span",{className:"font-medium text-slate-900","aria-current":"page",children:r.name}):(0,s.jsx)(a.default,{href:r.href,className:"hover:text-blue-600 transition-colors",children:r.name})]},r.href))})})})}e.s(["Breadcrumbs",()=>r])},99339,49146,e=>{"use strict";var s=e.i(88610);let a=(0,s.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>a],99339);let r=(0,s.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>r],49146)},20883,e=>{"use strict";var s=e.i(55909),a=e.i(29342),r=e.i(76423),t=e.i(37829),l=e.i(69942),d=e.i(10273),n=e.i(12611);e.i(52892);var o=e.i(71201);async function i(e){try{let s=e?`/api/customer-addresses?user_id=${e}`:"/api/customer-addresses",a=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!a.ok)return{addresses:[],total:0};return await a.json()}catch(e){return{addresses:[],total:0}}}async function c(e,s){try{let a=await fetch("/api/customer-addresses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s?{...e,user_id:s}:e),cache:"no-store"}),r=await a.json();if(!a.ok)return{success:!1,error:r.error||"Failed to create address"};return{success:!0,address:r.address,message:r.message}}catch(e){return{success:!1,error:"Failed to create address"}}}async function m(e,s,a){try{let r=await fetch(`/api/customer-addresses/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a?{...s,user_id:a}:s),cache:"no-store"}),t=await r.json();if(!r.ok)return{success:!1,error:t.error||"Failed to update address"};return{success:!0,address:t.address,message:t.message}}catch(e){return{success:!1,error:"Failed to update address"}}}async function u(e,s){try{let a=s?`/api/customer-addresses/${e}?user_id=${s}`:`/api/customer-addresses/${e}`,r=await fetch(a,{method:"DELETE",headers:{"Content-Type":"application/json"},cache:"no-store"}),t=await r.json();if(!r.ok)return{success:!1,error:t.error||"Failed to delete address"};return{success:!0,message:t.message}}catch(e){return{success:!1,error:"Failed to delete address"}}}async function x(e){try{let s="/api/customer-crm/profile";e&&(s+=`?user_id=${e}`);let a=await fetch(s,{cache:"no-store"});if(!a.ok){let e=await a.json().catch(()=>({}));return{success:!1,error:e.error||"Failed to fetch profile"}}let r=await a.json();return{success:!0,data:r}}catch(e){return{success:!1,error:"Failed to fetch profile"}}}async function h(e,s){try{let a=await fetch("/api/customer-crm/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,user_id:s}),cache:"no-store"});if(!a.ok){let e=await a.json().catch(()=>({}));return{success:!1,error:e.error||"Failed to update profile"}}return{success:!0}}catch(e){return{success:!1,error:"Failed to update profile"}}}var p=e.i(99339),g=e.i(57884),b=e.i(49146),y=e.i(88610);let f=(0,y.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var j=e.i(43386);function v({stats:e,labels:a,className:r}){let t=e=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(e),l=[{icon:p.Package,label:a.total_orders,value:e.total_orders?.toString()||"0",color:"blue"},{icon:g.ShoppingCart,label:a.total_spent,value:e.total_spent?t(e.total_spent):"-",color:"green"},{icon:b.CreditCard,label:a.avg_order_value,value:e.avg_order_value?t(e.avg_order_value):"-",color:"yellow"},{icon:f,label:a.member_since,value:e.member_since?new Date(e.member_since).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"}):"-",color:"red"}];return(0,s.jsx)("div",{className:r,children:(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map((e,a)=>(0,s.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:(0,j.cn)("p-3 rounded-lg border",{blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",yellow:"bg-yellow-50 text-yellow-600 border-yellow-200",red:"bg-red-50 text-red-600 border-red-200"}[e.color]),children:(0,s.jsx)(e.icon,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:e.label}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value})]})]})},a))})})}let N=(0,y.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),w=(0,y.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),_=(0,y.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),k=(0,y.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),C=(0,y.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),S=(0,y.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var T=e.i(31867),P=e.i(31752);function A({profile:e,userId:a,labels:r,onUpdate:l}){let[d,n]=(0,t.useState)(!1),[i,c]=(0,t.useState)({phone:e.phone||"",lineId:e.lineId||"",company:e.company||""}),[m,u]=(0,t.useState)(!1),[x,p]=(0,t.useState)("idle"),g=async()=>{u(!0),p("idle");let e=await h(i,a);u(!1),e.success?(p("success"),n(!1),l?.(),setTimeout(()=>p("idle"),3e3)):p("error")};return(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 flex items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,s.jsx)(N,{className:"w-5 h-5"}),r.profile_title]})}),!d&&(0,s.jsxs)("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",children:[(0,s.jsx)(S,{className:"w-4 h-4"}),r.edit]})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("span",{className:(0,j.cn)("inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold",(()=>{switch(e.customerType){case"retail":default:return"bg-gray-100 text-gray-800";case"wholesale":return"bg-blue-100 text-blue-800";case"vip":return"bg-yellow-100 text-yellow-800"}})()),children:[r.customer_type,": ",(()=>{switch(e.customerType){case"retail":return r.retail;case"wholesale":return r.wholesale;case"vip":return r.vip;default:return e.customerType}})()]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(w,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.email})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(_,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:r.phone}),d?(0,s.jsx)("input",{type:"tel",value:i.phone,onChange:e=>c({...i,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter phone number"}):(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.phone||"-"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(N,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:r.line_id}),d?(0,s.jsx)("input",{type:"text",value:i.lineId,onChange:e=>c({...i,lineId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter LINE ID"}):(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.lineId||"-"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(k,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:r.company}),d?(0,s.jsx)("input",{type:"text",value:i.company,onChange:e=>c({...i,company:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter company name"}):(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.company||"-"})]})]}),e.taxId&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(C,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:r.tax_id}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.taxId})]})]})]}),d&&(0,s.jsxs)("div",{className:"mt-6 flex items-center gap-3 pt-6 border-t border-gray-200",children:[(0,s.jsx)(o.Button,{onClick:g,disabled:m,className:"bg-blue-600 hover:bg-blue-700",children:m?"Saving...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Check,{className:"w-4 h-4 mr-1"}),r.save]})}),(0,s.jsxs)("button",{onClick:()=>{c({phone:e.phone||"",lineId:e.lineId||"",company:e.company||""}),n(!1),p("idle")},disabled:m,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[(0,s.jsx)(P.X,{className:"w-4 h-4"}),r.cancel]})]}),"success"===x&&(0,s.jsxs)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-800",children:[(0,s.jsx)(T.Check,{className:"w-4 h-4"}),"Profile updated successfully"]}),"error"===x&&(0,s.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-800",children:[(0,s.jsx)(P.X,{className:"w-4 h-4"}),"Failed to update profile"]})]})]})}function M({lang:e,dictionary:h}){let{account:p,common:g,auth:b,crm:y}=h,{user:f,isLoading:j,logout:N,changePassword:w,refreshUser:_}=(0,d.useAuth)(),{getCartCount:k}=(0,l.useCart)(),C=(0,r.useRouter)(),[S,T]=(0,t.useState)("overview"),[P,M]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[F,I]=(0,t.useState)(""),[L,D]=(0,t.useState)(""),[z,E]=(0,t.useState)(!1),[$,B]=(0,t.useState)(!1),[q,H]=(0,t.useState)(!1),[O,V]=(0,t.useState)(null),[U,R]=(0,t.useState)([]),[W,J]=(0,t.useState)({first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"TH",phone:""}),[K,X]=(0,t.useState)(!1),[G,Q]=(0,t.useState)(""),[Y,Z]=(0,t.useState)(""),[ee,es]=(0,t.useState)(!1),[ea,er]=(0,t.useState)(null),[et,el]=(0,t.useState)(!1),ed=async()=>{X(!0),Q(""),console.log("[AccountDashboard] Loading addresses for user:",f?.id,f);let e=await i(f?.id);console.log("[AccountDashboard] Addresses result:",e),e.addresses?R(e.addresses):Q("Failed to load addresses"),X(!1)},en=async()=>{if(!f?.id)return;el(!0);let e=await x(f.id);e.success&&e.data&&er(e.data),el(!1)};(0,t.useEffect)(()=>{!j&&f&&!$&&_&&(_(),B(!0))},[j,f,_,$]),(0,t.useEffect)(()=>{"addresses"===S&&!K&&f?.id&&(console.log("[AccountDashboard] Switching to addresses tab, user ID:",f.id),ed())},[S,f?.id]),(0,t.useEffect)(()=>{"details"===S&&!et&&f?.id&&en()},[S,f?.id]),(0,t.useEffect)(()=>{j||f||C.push(`/${e}/login`)},[j,f,e,C]);let eo=[],ei=async e=>{if(e.preventDefault(),I(""),D(""),P.newPassword!==P.confirmPassword)return void I(p.password_mismatch||"Passwords do not match");if(P.newPassword.length<8)return void I(p.password_too_short||"Password must be at least 8 characters");E(!0);let s=await w(P.currentPassword,P.newPassword);E(!1),s.success?(D(p.password_success||"Password changed successfully"),M({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>D(""),3e3)):I(s.error||"Failed to change password")},ec=async e=>{e.preventDefault(),Q(""),Z(""),es(!0),console.log("[AccountDashboard] Saving address. User ID:",f?.id,"User:",f),console.log("[AccountDashboard] Address form:",W);try{let e;e=O?await m(O.id,W,f?.id):await c(W,f?.id),console.log("[AccountDashboard] Save result:",e),e.success?(Z(O?"Address updated successfully":"Address added successfully"),H(!1),V(null),J({first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"TH",phone:""}),await ed(),setTimeout(()=>Z(""),3e3)):Q(e.error||"Failed to save address")}catch(e){Q("Failed to save address")}finally{es(!1)}},em=async e=>{if(!confirm("Are you sure you want to delete this address?"))return;let s=await u(e,f?.id);s.success?(Z("Address deleted successfully"),await ed(),setTimeout(()=>Z(""),3e3)):Q(s.error||"Failed to delete address")};if(j)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gray-600",children:"Loading..."})});let eu=[{name:g.home,href:`/${e}`},{name:p.my_account,href:`/${e}/account`}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Breadcrumbs,{items:eu,lang:e}),(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[p.welcome,", ",f?.firstName||f?.displayName,"!"]}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:p.overview})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,s.jsxs)("nav",{className:"space-y-2",children:[(0,s.jsx)("button",{onClick:()=>T("overview"),className:`w-full text-left px-4 py-2 rounded-md transition-colors ${"overview"===S?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:p.overview}),(0,s.jsx)("button",{onClick:()=>T("orders"),className:`w-full text-left px-4 py-2 rounded-md transition-colors ${"orders"===S?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:p.my_orders}),(0,s.jsx)("button",{onClick:()=>T("details"),className:`w-full text-left px-4 py-2 rounded-md transition-colors ${"details"===S?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:p.account_details}),(0,s.jsx)("button",{onClick:()=>T("addresses"),className:`w-full text-left px-4 py-2 rounded-md transition-colors ${"addresses"===S?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:p.addresses}),(0,s.jsx)("hr",{className:"my-2"}),(0,s.jsx)("button",{onClick:()=>N(),className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:b.logout})]})})}),(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:["overview"===S&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:p.overview}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:eo.length}),(0,s.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:p.my_orders})]}),(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-6",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-green-600",children:k()}),(0,s.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:g.products})]}),(0,s.jsxs)("div",{className:"bg-purple-50 rounded-lg p-6",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:"0"}),(0,s.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:p.addresses})]})]}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:p.personal_info}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[b.first_name,":"]}),(0,s.jsx)("span",{className:"ml-2 text-gray-900",children:f?.firstName})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[b.last_name,":"]}),(0,s.jsx)("span",{className:"ml-2 text-gray-900",children:f?.lastName})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[b.email,":"]}),(0,s.jsx)("span",{className:"ml-2 text-gray-900",children:f?.email})]})]})]}),"orders"===S&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:p.my_orders}),0===eo.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:p.no_orders}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:p.no_orders_desc}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(a.default,{href:`/${e}/shop`,children:(0,s.jsx)(o.Button,{variant:"primary",size:"md",children:p.start_shopping})})})]}):(0,s.jsx)("div",{className:"space-y-4",children:eo.map(e=>(0,s.jsx)("div",{className:"border rounded-lg p-4"},e.id))})]}),"details"===S&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:p.account_details}),et?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]}):(0,s.jsxs)(s.Fragment,{children:[ea&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"vip"===ea.customerType?"bg-purple-100 text-purple-800":"wholesale"===ea.customerType?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:"vip"===ea.customerType?y.vip||"VIP":"wholesale"===ea.customerType?y.wholesale||"Wholesale":y.retail||"Retail"})}),ea&&(0,s.jsx)(v,{stats:{total_orders:ea.totalOrders,total_spent:ea.totalSpent,avg_order_value:ea.avgOrderValue,member_since:ea.memberSince},labels:{total_orders:y.total_orders,total_spent:y.total_spent,avg_order_value:y.avg_order_value,member_since:y.member_since}}),(0,s.jsx)("hr",{className:"my-8"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:p.personal_info}),(0,s.jsxs)("form",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:b.first_name}),(0,s.jsx)("input",{type:"text",defaultValue:f?.firstName,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:b.last_name}),(0,s.jsx)("input",{type:"text",defaultValue:f?.lastName,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:b.email}),(0,s.jsx)("input",{type:"email",defaultValue:f?.email,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-900",disabled:!0,title:"Email cannot be changed"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Contact support to change email"})]})]}),ea&&(0,s.jsx)(A,{profile:ea,userId:f?.id,labels:{customer_type:y.customer_type,phone:y.phone,line_id:y.line_id,company:y.company,tax_id:y.tax_id,edit:y.edit,save:y.save,cancel:y.cancel,retail:y.retail,wholesale:y.wholesale,vip:y.vip,profile_title:y.profile_title},onUpdate:en}),ea?.taxId&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:y.tax_id||"Tax ID"}),(0,s.jsx)("p",{className:"text-gray-900 font-mono",children:ea.taxId}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Tax ID is read-only. Contact support to update."})]}),(0,s.jsx)("hr",{className:"my-8"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:p.change_password}),(0,s.jsxs)("form",{onSubmit:ei,className:"space-y-4",children:[F&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:F}),L&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:L}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.current_password}),(0,s.jsx)("input",{type:"password",value:P.currentPassword,onChange:e=>M({...P,currentPassword:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.new_password}),(0,s.jsx)("input",{type:"password",value:P.newPassword,onChange:e=>M({...P,newPassword:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:8}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Minimum 8 characters"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.confirm_password||"Confirm New Password"}),(0,s.jsx)("input",{type:"password",value:P.confirmPassword,onChange:e=>M({...P,confirmPassword:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:8})]}),(0,s.jsx)(o.Button,{variant:"primary",size:"md",type:"submit",disabled:z,children:z?p.changing||"Changing...":p.save||"Save"})]})]})]}),"addresses"===S&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:p.addresses}),!q&&(0,s.jsx)(o.Button,{variant:"primary",size:"sm",onClick:()=>{V(null),J({first_name:f?.firstName||"",last_name:f?.lastName||"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"TH",phone:""}),H(!0)},children:p.add_address||"Add Address"})]}),Y&&(0,s.jsx)("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:Y}),G&&(0,s.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:G}),q&&(0,s.jsxs)("div",{className:"mb-6 p-6 border border-gray-200 rounded-lg bg-gray-50",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:O?p.edit_address||"Edit Address":p.add_address||"Add Address"}),(0,s.jsxs)("form",{onSubmit:ec,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[b.first_name," *"]}),(0,s.jsx)("input",{type:"text",value:W.first_name,onChange:e=>J({...W,first_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[b.last_name," *"]}),(0,s.jsx)("input",{type:"text",value:W.last_name,onChange:e=>J({...W,last_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.company||"Company"}),(0,s.jsx)("input",{type:"text",value:W.company,onChange:e=>J({...W,company:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[p.address_1||"Address"," *"]}),(0,s.jsx)("input",{type:"text",value:W.address_1,onChange:e=>J({...W,address_1:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.address_2||"Apartment, suite, etc."}),(0,s.jsx)("input",{type:"text",value:W.address_2,onChange:e=>J({...W,address_2:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[p.city||"City"," *"]}),(0,s.jsx)("input",{type:"text",value:W.city,onChange:e=>J({...W,city:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[p.state||"Province"," *"]}),(0,s.jsx)("input",{type:"text",value:W.state,onChange:e=>J({...W,state:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[p.postcode||"Postcode"," *"]}),(0,s.jsx)("input",{type:"text",value:W.postcode,onChange:e=>J({...W,postcode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.phone||"Phone"}),(0,s.jsx)("input",{type:"tel",value:W.phone,onChange:e=>J({...W,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(o.Button,{variant:"primary",size:"md",type:"submit",disabled:ee,children:ee?p.saving||"Saving...":p.save||"Save"}),(0,s.jsx)(o.Button,{variant:"secondary",size:"md",type:"button",onClick:()=>{H(!1),V(null),J({first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"TH",phone:""})},disabled:ee,children:p.cancel||"Cancel"})]})]})]}),K?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:p.loading_addresses||"Loading addresses..."})]}):0!==U.length||q?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:U.map(e=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:[e.first_name," ",e.last_name]}),e.company&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.company})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{V(e),J(e),H(!0)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:p.edit||"Edit"}),(0,s.jsx)("button",{onClick:()=>em(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:p.delete||"Delete"})]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,s.jsx)("p",{children:e.address_1}),e.address_2&&(0,s.jsx)("p",{children:e.address_2}),(0,s.jsxs)("p",{children:[e.city,", ",e.state," ",e.postcode]}),e.phone&&(0,s.jsxs)("p",{children:[p.phone,": ",e.phone]})]})]},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsxs)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No addresses found"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Add your first address to get started"})]})]})]})})]})]})})]})}e.s(["AccountDashboard",()=>M],20883)}]);