{"version":3,"sources":["../../../../../../sakwood-wp/frontend/components/layout/Breadcrumbs.tsx","../../../../../../sakwood-wp/frontend/lib/services/videoService.ts","../../../../../../sakwood-wp/frontend/app/%5Blang%5D/videos/%5Bslug%5D/page.tsx"],"sourcesContent":["import Link from 'next/link';\r\nimport type { Locale } from '@/i18n-config';\r\n\r\nexport interface BreadcrumbItem {\r\n  name: string;\r\n  href: string;\r\n}\r\n\r\ninterface BreadcrumbsProps {\r\n  items: BreadcrumbItem[];\r\n  lang: Locale;\r\n}\r\n\r\nexport function Breadcrumbs({ items, lang }: BreadcrumbsProps) {\r\n  return (\r\n    <nav className=\"py-4 px-6 bg-slate-50 border-b border-slate-200\" aria-label=\"Breadcrumb navigation\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <ol className=\"flex items-center gap-2 text-sm text-slate-600\">\r\n          {items.map((item, index) => (\r\n            <li key={item.href} className=\"flex items-center gap-2\">\r\n              {index > 0 && (\r\n                <span className=\"text-slate-400\" aria-hidden=\"true\">/</span>\r\n              )}\r\n              {index === items.length - 1 ? (\r\n                <span className=\"font-medium text-slate-900\" aria-current=\"page\">\r\n                  {item.name}\r\n                </span>\r\n              ) : (\r\n                <Link \r\n                  href={item.href} \r\n                  className=\"hover:text-blue-600 transition-colors\"\r\n                >\r\n                  {item.name}\r\n                </Link>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ol>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","import { Video, VideoCategory } from '@/lib/types';\n\nconst WORDPRESS_API_URL = process.env.NEXT_PUBLIC_WORDPRESS_API_URL || 'http://localhost:8006/wp-json/sakwood/v1';\n\n/**\n * Get all videos with language and category filtering\n */\nexport async function getVideos(\n  language: string = 'th',\n  category?: string,\n  perPage: number = 50\n): Promise<{ success: boolean; data?: Video[]; error?: string }> {\n  try {\n    let url = `${WORDPRESS_API_URL}/videos?language=${language}&per_page=${perPage}`;\n    if (category) {\n      url += `&category=${encodeURIComponent(category)}`;\n    }\n\n    const response = await fetch(url, {\n      cache: 'no-store',\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      return { success: false, error: errorData.message || 'Failed to fetch videos' };\n    }\n\n    const data = await response.json();\n    return { success: true, data };\n  } catch (error) {\n    return { success: false, error: 'Failed to fetch videos' };\n  }\n}\n\n/**\n * Get single video by slug\n */\nexport async function getVideoBySlug(\n  slug: string,\n  language: string = 'th'\n): Promise<{ success: boolean; data?: Video; error?: string }> {\n  try {\n    const encodedSlug = encodeURIComponent(slug);\n    const url = `${WORDPRESS_API_URL}/videos/${encodedSlug}?language=${language}`;\n\n    const response = await fetch(url, {\n      cache: 'no-store',\n    });\n\n    if (!response.ok) {\n      if (response.status === 404) {\n        return { success: false, error: 'Video not found' };\n      }\n      return { success: false, error: 'Failed to fetch video' };\n    }\n\n    const data = await response.json();\n\n    if (data.code === 'video_not_found') {\n      return { success: false, error: 'Video not found' };\n    }\n\n    return { success: true, data };\n  } catch (error) {\n    return { success: false, error: 'Failed to fetch video' };\n  }\n}\n\n/**\n * Get video categories\n */\nexport async function getVideoCategories(): Promise<{\n  success: boolean;\n  data?: VideoCategory[];\n  error?: string;\n}> {\n  try {\n    const url = `${WORDPRESS_API_URL}/video-categories`;\n\n    const response = await fetch(url, {\n      cache: 'no-store',\n    });\n\n    if (!response.ok) {\n      return { success: false, error: 'Failed to fetch video categories' };\n    }\n\n    const data = await response.json();\n    return { success: true, data };\n  } catch (error) {\n    return { success: false, error: 'Failed to fetch video categories' };\n  }\n}\n\n/**\n * Search videos\n */\nexport async function searchVideos(\n  query: string,\n  language: string = 'th',\n  category?: string\n): Promise<{ success: boolean; data?: Video[]; error?: string }> {\n  try {\n    let url = `${WORDPRESS_API_URL}/videos/search?q=${encodeURIComponent(query)}&language=${language}`;\n    if (category) {\n      url += `&category=${encodeURIComponent(category)}`;\n    }\n\n    const response = await fetch(url, {\n      cache: 'no-store',\n    });\n\n    if (!response.ok) {\n      return { success: false, error: 'Failed to search videos' };\n    }\n\n    const data = await response.json();\n    return { success: true, data };\n  } catch (error) {\n    return { success: false, error: 'Failed to search videos' };\n  }\n}\n","import { notFound } from 'next/navigation';\nimport { getVideoBySlug, getVideos } from '@/lib/services/videoService';\nimport { getDictionary } from '@/lib/get-dictionary';\nimport { Breadcrumbs } from '@/components/layout/Breadcrumbs';\nimport type { Locale } from '@/i18n-config';\nimport type { VideoGalleryItem } from '@/lib/types';\n\ninterface VideoPageProps {\n  params: Promise<{\n    lang: string;\n    slug: string;\n  }>;\n}\n\nexport default async function VideoPage({ params }: VideoPageProps) {\n  const { lang, slug } = await params;\n\n  const dictionary = await getDictionary(lang as Locale);\n  const { videos: videosDict, common } = dictionary;\n\n  // Fetch video by slug\n  const videoResult = await getVideoBySlug(slug, lang);\n\n  if (!videoResult.success || !videoResult.data) {\n    notFound();\n  }\n\n  const video = videoResult.data;\n\n  // Fetch related videos (same category, excluding current video)\n  const relatedVideosResult = await getVideos(lang, video.category);\n  const relatedVideos = relatedVideosResult.success && relatedVideosResult.data\n    ? relatedVideosResult.data.filter((v) => v.id !== video.id).slice(0, 6)\n    : [];\n\n  const breadcrumbItems = [\n    { name: common.home, href: `/${lang}` },\n    { name: videosDict.title, href: `/${lang}/videos` },\n    { name: video.title, href: `/${lang}/videos/${slug}` },\n  ];\n\n  // Generate embed URL based on video type\n  const getEmbedUrl = () => {\n    if (video.videoType === 'youtube' && video.videoId) {\n      return `https://www.youtube.com/embed/${video.videoId}?autoplay=0&rel=0`;\n    }\n\n    if (video.videoType === 'vimeo' && video.videoId) {\n      return `https://player.vimeo.com/video/${video.videoId}?autoplay=0`;\n    }\n\n    return '';\n  };\n\n  const embedUrl = getEmbedUrl();\n\n  return (\n    <>\n      <Breadcrumbs items={breadcrumbItems} lang={lang as Locale} />\n\n      <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white py-16 px-6\">\n        <div className=\"max-w-6xl mx-auto\">\n          {/* Video Player */}\n          <div className=\"bg-black rounded-xl overflow-hidden shadow-2xl mb-8\">\n            <div className=\"aspect-video\">\n              {embedUrl ? (\n                <iframe\n                  src={embedUrl}\n                  title={video.title}\n                  className=\"w-full h-full\"\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                  allowFullScreen\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-white\">\n                  <p>Unable to load video</p>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Video Info */}\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-8 mb-8\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div>\n                <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n                  {video.title}\n                </h1>\n                {video.category && (\n                  <span className=\"inline-block bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full\">\n                    {video.category}\n                  </span>\n                )}\n              </div>\n              {video.duration && (\n                <div className=\"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded\">\n                  {videosDict.duration}: {video.duration}\n                </div>\n              )}\n            </div>\n\n            {video.description && (\n              <div className=\"prose prose-sm max-w-none text-gray-600\">\n                <p>{video.description}</p>\n              </div>\n            )}\n          </div>\n\n          {/* Related Videos */}\n          {relatedVideos.length > 0 && (\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">\n                {videosDict.related_videos}\n              </h2>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {relatedVideos.map((v) => (\n                  <a\n                    key={v.id}\n                    href={`/${lang}/videos/${v.slug}`}\n                    className=\"group cursor-pointer\"\n                  >\n                    <div className=\"relative aspect-video bg-gray-200 rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow duration-300\">\n                      {v.thumbnail ? (\n                        <img\n                          src={v.thumbnail}\n                          alt={v.title}\n                          className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                        />\n                      ) : v.videoType === 'youtube' && v.videoId ? (\n                        <img\n                          src={`https://img.youtube.com/vi/${v.videoId}/hqdefault.jpg`}\n                          alt={v.title}\n                          className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full bg-gradient-to-br from-gray-300 to-gray-400 flex items-center justify-center\">\n                          <span className=\"text-4xl\">ðŸŽ¬</span>\n                        </div>\n                      )}\n                    </div>\n                    <h3 className=\"font-semibold text-gray-900 mt-3 line-clamp-2 group-hover:text-blue-600 transition-colors\">\n                      {v.title}\n                    </h3>\n                  </a>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n\n// Generate metadata for SEO\nexport async function generateMetadata({ params }: VideoPageProps) {\n  const { lang, slug } = await params;\n\n  const videoResult = await getVideoBySlug(slug, lang);\n\n  if (!videoResult.success || !videoResult.data) {\n    return {\n      title: 'Video Not Found',\n    };\n  }\n\n  const video = videoResult.data;\n\n  return {\n    title: video.title,\n    description: video.description || `Watch ${video.title} on Sakwood`,\n  };\n}\n\n// Generate static params for static generation\nexport async function generateStaticParams() {\n  // In production, you might want to fetch actual slugs from WordPress\n  // For now, return empty array to use dynamic rendering\n  return [];\n}\n"],"names":[],"mappings":"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"}