{"version":3,"sources":["../../../../../../sakwood-wp/frontend/components/layout/Breadcrumbs.tsx","../../../../../../sakwood-wp/frontend/lib/services/dealerService.ts"],"sourcesContent":["import Link from 'next/link';\r\nimport type { Locale } from '@/i18n-config';\r\n\r\nexport interface BreadcrumbItem {\r\n  name: string;\r\n  href: string;\r\n}\r\n\r\ninterface BreadcrumbsProps {\r\n  items: BreadcrumbItem[];\r\n  lang: Locale;\r\n}\r\n\r\nexport function Breadcrumbs({ items, lang }: BreadcrumbsProps) {\r\n  return (\r\n    <nav className=\"py-4 px-6 bg-slate-50 border-b border-slate-200\" aria-label=\"Breadcrumb navigation\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <ol className=\"flex items-center gap-2 text-sm text-slate-600\">\r\n          {items.map((item, index) => (\r\n            <li key={item.href} className=\"flex items-center gap-2\">\r\n              {index > 0 && (\r\n                <span className=\"text-slate-400\" aria-hidden=\"true\">/</span>\r\n              )}\r\n              {index === items.length - 1 ? (\r\n                <span className=\"font-medium text-slate-900\" aria-current=\"page\">\r\n                  {item.name}\r\n                </span>\r\n              ) : (\r\n                <Link \r\n                  href={item.href} \r\n                  className=\"hover:text-blue-600 transition-colors\"\r\n                >\r\n                  {item.name}\r\n                </Link>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ol>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","/**\n * Dealer Service\n * Handles dealer-related API calls\n */\n\nconst WORDPRESS_API_URL = process.env.NEXT_PUBLIC_WORDPRESS_API_URL || 'http://localhost:8006/wp-json/sakwood/v1';\n\n// Types\nexport type DealerTier = 'silver' | 'gold' | 'platinum';\n\nexport interface DealerTierInfo {\n  id: number;\n  tier_name: DealerTier;\n  discount_percentage: number;\n  min_order_amount: number;\n  min_order_quantity: number;\n  credit_multiplier: number;\n  benefits: string[];\n  requirements: string[];\n  is_active: boolean;\n}\n\nexport interface DealerApplication {\n  id: number;\n  user_id: number;\n  application_id: string;\n  current_wholesale_status: string;\n  requested_tier_id: number;\n  business_registration: string;\n  storage_facility: string;\n  delivery_vehicles: string;\n  sales_capacity: number;\n  dealer_experience: string;\n  requested_territories: string;\n  trade_references: string;\n  business_references: string;\n  status: 'pending' | 'approved' | 'rejected' | 'active';\n  assigned_territories: string;\n  admin_notes: string;\n  submitted_date: string;\n  reviewed_date: string | null;\n}\n\nexport interface DealerInfo {\n  tierId: number;\n  tierName: DealerTier;\n  discountPercentage: number;\n  minOrderAmount: number;\n  minOrderQuantity: number;\n  territories: DealerTerritory[];\n  status: string;\n}\n\nexport interface DealerTerritory {\n  id: number;\n  dealer_id: number;\n  user_id: number;\n  province: string;\n  district: string | null;\n  is_exclusive: boolean;\n  assigned_date: string;\n  expiry_date: string | null;\n}\n\nexport interface DealerOrder {\n  id: number;\n  user_id: number;\n  order_id: number;\n  dealer_tier_id: number;\n  order_total: number;\n  discount_amount: number;\n  discount_percentage: number;\n  created_at: string;\n}\n\nexport interface DealerApplicationRequest {\n  requestedTier: number;\n  businessRegistration?: string;\n  storageFacility: string;\n  deliveryVehicles: string;\n  salesCapacity: string;\n  dealerExperience: string;\n  requestedTerritories: string[];\n  tradeReferences?: TradeReference[];\n  businessReferences?: BusinessReference[];\n}\n\nexport interface TradeReference {\n  company: string;\n  contact: string;\n  relationship: string;\n}\n\nexport interface BusinessReference {\n  company: string;\n  contact: string;\n  accountValue: string;\n}\n\n// API Methods\n\n/**\n * Get all available dealer tiers\n */\nexport async function getDealerTiers(): Promise<{ success: boolean; data?: DealerTierInfo[]; error?: string }> {\n  try {\n    const response = await fetch(`${WORDPRESS_API_URL}/dealer/tiers`, {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n      cache: 'no-store',\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return { success: false, error: data.message || 'Failed to fetch dealer tiers' };\n    }\n\n    // Parse JSON strings for benefits and requirements\n    const tiers = data.map((tier: DealerTierInfo) => ({\n      ...tier,\n      benefits: typeof tier.benefits === 'string' ? JSON.parse(tier.benefits) : tier.benefits,\n      requirements: typeof tier.requirements === 'string' ? JSON.parse(tier.requirements) : tier.requirements,\n    }));\n\n    return { success: true, data: tiers };\n  } catch (error) {\n    return { success: false, error: 'Failed to fetch dealer tiers' };\n  }\n}\n\n/**\n * Get current user's dealer info\n */\nexport async function getDealerInfo(userId?: number): Promise<{ success: boolean; data?: DealerInfo; error?: string }> {\n  try {\n    const url = userId ? `/api/dealer/info?user_id=${userId}` : '/api/dealer/info';\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n      cache: 'no-store',\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return { success: false, error: data.error || 'Failed to fetch dealer info' };\n    }\n\n    return { success: true, data };\n  } catch (error) {\n    return { success: false, error: 'Failed to fetch dealer info' };\n  }\n}\n\n/**\n * Get dealer application status by application ID\n */\nexport async function getDealerApplicationStatus(applicationId: string): Promise<{ success: boolean; data?: DealerApplication; error?: string }> {\n  try {\n    const response = await fetch(`${WORDPRESS_API_URL}/dealer/status/${applicationId}`, {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n      cache: 'no-store',\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return { success: false, error: data.message || 'Application not found' };\n    }\n\n    return { success: true, data };\n  } catch (error) {\n    return { success: false, error: 'Failed to fetch application status' };\n  }\n}\n\n/**\n * Get dealer territories\n */\nexport async function getDealerTerritories(userId?: number): Promise<{ success: boolean; data?: DealerTerritory[]; error?: string }> {\n  try {\n    const url = userId ? `/api/dealer/territories?user_id=${userId}` : '/api/dealer/territories';\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n      cache: 'no-store',\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return { success: false, error: data.error || 'Failed to fetch territories' };\n    }\n\n    return { success: true, data };\n  } catch (error) {\n    return { success: false, error: 'Failed to fetch territories' };\n  }\n}\n\n/**\n * Get dealer order history\n */\nexport async function getDealerOrders(userId?: number, limit = 20): Promise<{ success: boolean; data?: DealerOrder[]; error?: string }> {\n  try {\n    const url = userId\n      ? `/api/dealer/orders?user_id=${userId}&limit=${limit}`\n      : `/api/dealer/orders?limit=${limit}`;\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n      cache: 'no-store',\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return { success: false, error: data.error || 'Failed to fetch orders' };\n    }\n\n    return { success: true, data };\n  } catch (error) {\n    return { success: false, error: 'Failed to fetch orders' };\n  }\n}\n\n/**\n * Check if territory is available (admin only)\n */\nexport async function isTerritoryAvailable(province: string, excludeDealerId?: number): Promise<{ success: boolean; available?: boolean; error?: string }> {\n  try {\n    const params = new URLSearchParams({ province });\n    if (excludeDealerId) params.append('exclude_dealer_id', excludeDealerId.toString());\n\n    const response = await fetch(`${WORDPRESS_API_URL}/dealer/check-territory?${params}`, {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n      cache: 'no-store',\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return { success: false, error: data.error || 'Failed to check territory' };\n    }\n\n    return { success: true, available: data.available };\n  } catch (error) {\n    return { success: false, error: 'Failed to check territory' };\n  }\n}\n"],"names":[],"mappings":"wDAAA,EAAA,EAAA,CAAA,CAAA,OAaO,SAAS,EAAY,OAAE,CAAK,MAAE,CAAI,CAAoB,EAC3D,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDAAkD,aAAW,iCAC1E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0DACX,EAAM,GAAG,CAAC,CAAC,EAAM,IAChB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAmB,UAAU,oCAC3B,EAAQ,GACP,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iBAAiB,cAAY,gBAAO,MAErD,IAAU,EAAM,MAAM,CAAG,EACxB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6BAA6B,eAAa,gBACvD,EAAK,IAAI,GAGZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAM,EAAK,IAAI,CACf,UAAU,iDAET,EAAK,IAAI,KAbP,EAAK,IAAI,QAsB9B,oDCpCA,IAAM,EAAoB,kBAAA,yBAmGnB,IAnGgE,WAmGjD,IACpB,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,CAAA,EAAG,EAAkB,aAAa,CAAC,CAAE,CAChE,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,MAAO,UACT,GAEM,EAAO,MAAM,EAAS,IAAI,GAEhC,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACT,CAAE,SAAS,EAAO,MAAO,EAAK,OAAO,EAAI,8BAA+B,EAIjF,IAAM,EAAQ,EAAK,GAAG,CAAC,AAAC,IAA0B,CAChD,EAD+C,CAC5C,CAAI,CACP,SAAmC,UAAzB,OAAO,EAAK,QAAQ,CAAgB,KAAK,KAAK,CAAC,EAAK,QAAQ,EAAI,EAAK,QAAQ,CACvF,aAA2C,UAA7B,OAAO,EAAK,YAAY,CAAgB,KAAK,KAAK,CAAC,EAAK,YAAY,EAAI,EAAK,YAAY,CACzG,CAAC,EAED,MAAO,CAAE,SAAS,EAAM,KAAM,CAAM,CACtC,CAAE,MAAO,EAAO,CACd,MAAO,CAAE,SAAS,EAAO,MAAO,8BAA+B,CACjE,CACF,CA6BO,eAAe,EAA2B,CAAqB,EACpE,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,CAAA,EAAG,EAAkB,eAAe,EAAE,EAAA,CAAe,CAAE,CAClF,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,MAAO,UACT,GAEM,EAAO,MAAM,EAAS,IAAI,GAEhC,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACT,CAAE,SAAS,EAAO,MAAO,EAAK,OAAO,EAAI,uBAAwB,EAG1E,MAAO,CAAE,SAAS,OAAM,CAAK,CAC/B,CAAE,MAAO,EAAO,CACd,MAAO,CAAE,QAAS,GAAO,MAAO,oCAAqC,CACvE,CACF"}