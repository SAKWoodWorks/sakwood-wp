module.exports=[43277,a=>{"use strict";var b=a.i(94413),c=a.i(46069),d=a.i(79151),e=a.i(75129);a.i(29355);var f=a.i(30842),g=a.i(98753);async function h(a,b){try{let c=await fetch(g.API_CONFIG.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a,variables:b}),cache:g.API_CONFIG.cache});if(!c.ok)throw Error(`HTTP error! status: ${c.status}`);let d=await c.json();if(d.errors)return console.error("GraphQL Errors:",d.errors.map(a=>a.message)),console.error("Full error details:",d.errors),null;return d.data}catch(a){return console.error("GraphQL request failed:",a),null}}let i=`
  query GetProducts($first: Int) {
    products(first: $first) {
      nodes {
        id
        databaseId
        name
        slug
        image {
          sourceUrl
        }
        width
        length
        thickness
        volume
        productCategories {
          nodes {
            id
            name
            slug
          }
        }
        ... on SimpleProduct {
          price
          regularPrice
        }
      }
    }
  }
`;function j(a){if(!a)return 0;let b=parseFloat(a.replace(/[à¸¿$,,\s]/g,""));return isNaN(b)?0:b}async function k(a="th",b,c){try{let d="http://localhost:8006/graphql".replace("/graphql","")||"http://localhost:8006",e=`${d}/wp-json/sakwood/v1/products?language=${a}&per_page=${g.APP_CONFIG.productsPerPage}`;b&&(e+=`&category=${encodeURIComponent(b)}`);let f=await fetch(e);if(!f.ok)return console.error("Failed to fetch products:",f.status),l(a);let h=await f.json();if(!Array.isArray(h)||0===h.length)return[];let i=h.map(a=>({id:String(a.id),databaseId:a.databaseId,name:a.name,slug:a.slug,sku:a.sku||void 0,language:a.language||"th",price:a.price||a.prices?.piece||void 0,regularPrice:a.regularPrice||void 0,priceTypes:a.priceTypes||["piece"],prices:a.prices||{},image:a.image?{sourceUrl:a.image.sourceUrl}:void 0,description:"",galleryImages:void 0,thickness:a.thickness||void 0,width:a.width||void 0,length:a.length||void 0,categories:a.categories?a.categories.map(a=>({id:a.id,name:a.name,slug:a.slug})):void 0}));if(c){let a=[...i];switch(c){case"name":return a.sort((a,b)=>a.name.localeCompare(b.name,"th"));case"price":return a.sort((a,b)=>j(a.price)-j(b.price));case"date":return a.sort((a,b)=>b.databaseId-a.databaseId);default:return a}}return i}catch(b){return console.error("Error fetching products via REST API:",b),l(a)}}async function l(a="th"){let b=await h(i,{first:10});return(b?.products?.nodes||[]).map(a=>({...a,image:a.image?function(a){if(!a)return;let b=function(a){if(a)return a.replace("http://sak_wp:80/","http://localhost:8006/")}(a.sourceUrl);if(b)return{...a,sourceUrl:b}}(a.image):void 0,categories:a.productCategories?.nodes?.map(a=>({id:a.id,name:a.name,slug:a.slug}))||[]}))}function m({lang:a,dictionary:g,initialProducts:h,initialCategories:i}){let j=(0,d.useRouter)(),l=(0,d.useSearchParams)(),m=l.get("category"),n=l.get("sort"),[o,p]=(0,c.useState)(h),[q]=(0,c.useState)(i),[r,s]=(0,c.useState)(m),[t,u]=(0,c.useState)(n),[v,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{!async function(){w(!0),p(await k(a,r||void 0,t||void 0)),w(!1)}()},[r,t,a]);let x=b=>{s(b);let c=new URLSearchParams;b&&c.set("category",b),t&&c.set("sort",t),j.push(`/${a}/shop${c.toString()?"?"+c.toString():""}`)},y=b=>{u(b);let c=new URLSearchParams;r&&c.set("category",r),c.set("sort",b),j.push(`/${a}/shop${c.toString()?"?"+c.toString():""}`)};return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-16",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,b.jsxs)("div",{className:"text-center mb-12",children:[(0,b.jsx)("h1",{className:"text-5xl font-bold text-gray-900 mb-4",children:g.shop.title}),(0,b.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:g.shop.subtitle})]}),(0,b.jsxs)("div",{className:"mb-12 space-y-6",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4 justify-center",children:[(0,b.jsxs)("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:[g.shop.filter_by,":"]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{onClick:()=>x(null),className:`px-4 py-2 rounded-lg font-medium transition-all ${null===r?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:g.shop.all_categories}),q.map(a=>(0,b.jsxs)("button",{onClick:()=>x(a.slug),className:`px-4 py-2 rounded-lg font-medium transition-all ${r===a.slug?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:[a.name,void 0!==a.count&&(0,b.jsxs)("span",{className:"ml-2 text-sm opacity-75",children:["(",a.count,")"]})]},a.id))]})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,b.jsxs)("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:[g.shop.sort_by||"Sort by",":"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>y("name"),className:`px-4 py-2 rounded-lg font-medium transition-all ${"name"===t?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:g.shop.sort_name||"Name"}),(0,b.jsx)("button",{onClick:()=>y("price"),className:`px-4 py-2 rounded-lg font-medium transition-all ${"price"===t?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:g.shop.sort_price||"Price"}),(0,b.jsx)("button",{onClick:()=>y("date"),className:`px-4 py-2 rounded-lg font-medium transition-all ${"date"===t?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:g.shop.sort_newest||"Newest"})]})]})]}),v?(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:g.shop.loading})]}):o.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:o.map(c=>(0,b.jsx)(f.ProductCard,{product:c,lang:a,dictionary:g},c.id))}):(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:(0,b.jsx)("svg",{className:"w-24 h-24 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-700 mb-2",children:g.shop.no_products}),(0,b.jsx)("p",{className:"text-gray-500 mb-6",children:g.shop.no_products_desc}),(0,b.jsx)(e.default,{href:`/${"th"===a?"en":"th"}/shop`,className:"inline-block px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors",children:g.shop.view_other_lang})]})]})})}a.s(["ShopPage",()=>m],43277)}];

//# sourceMappingURL=sakwood-wp_frontend_app_%5Blang%5D_shop_ShopPage_tsx_e2de4613._.js.map