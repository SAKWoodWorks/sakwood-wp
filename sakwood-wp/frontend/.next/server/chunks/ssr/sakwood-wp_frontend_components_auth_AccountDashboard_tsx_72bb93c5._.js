module.exports=[58382,a=>{"use strict";var b=a.i(94413),c=a.i(75129),d=a.i(79151),e=a.i(46069),f=a.i(17735),g=a.i(8615),h=a.i(42455);a.i(29355);var i=a.i(89259);async function j(a){try{let b=a?`/api/customer-addresses?user_id=${a}`:"/api/customer-addresses",c=await fetch(b,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!c.ok)return{addresses:[],total:0};return await c.json()}catch(a){return{addresses:[],total:0}}}async function k(a,b){try{let c=await fetch("/api/customer-addresses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b?{...a,user_id:b}:a),cache:"no-store"}),d=await c.json();if(!c.ok)return{success:!1,error:d.error||"Failed to create address"};return{success:!0,address:d.address,message:d.message}}catch(a){return{success:!1,error:"Failed to create address"}}}async function l(a,b,c){try{let d=await fetch(`/api/customer-addresses/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c?{...b,user_id:c}:b),cache:"no-store"}),e=await d.json();if(!d.ok)return{success:!1,error:e.error||"Failed to update address"};return{success:!0,address:e.address,message:e.message}}catch(a){return{success:!1,error:"Failed to update address"}}}async function m(a,b){try{let c=b?`/api/customer-addresses/${a}?user_id=${b}`:`/api/customer-addresses/${a}`,d=await fetch(c,{method:"DELETE",headers:{"Content-Type":"application/json"},cache:"no-store"}),e=await d.json();if(!d.ok)return{success:!1,error:e.error||"Failed to delete address"};return{success:!0,message:e.message}}catch(a){return{success:!1,error:"Failed to delete address"}}}async function n(a){try{let b="/api/customer-crm/profile";a&&(b+=`?user_id=${a}`);let c=await fetch(b,{cache:"no-store"});if(!c.ok){let a=await c.json().catch(()=>({}));return{success:!1,error:a.error||"Failed to fetch profile"}}let d=await c.json();return{success:!0,data:d}}catch(a){return{success:!1,error:"Failed to fetch profile"}}}async function o(a,b){try{let c=await fetch("/api/customer-crm/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,user_id:b}),cache:"no-store"});if(!c.ok){let a=await c.json().catch(()=>({}));return{success:!1,error:a.error||"Failed to update profile"}}return{success:!0}}catch(a){return{success:!1,error:"Failed to update profile"}}}var p=a.i(70126),q=a.i(20723),r=a.i(2884),s=a.i(89384);let t=(0,s.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var u=a.i(14088);function v({stats:a,labels:c,className:d}){let e=a=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(a),f=[{icon:p.Package,label:c.total_orders,value:a.total_orders?.toString()||"0",color:"blue"},{icon:q.ShoppingCart,label:c.total_spent,value:a.total_spent?e(a.total_spent):"-",color:"green"},{icon:r.CreditCard,label:c.avg_order_value,value:a.avg_order_value?e(a.avg_order_value):"-",color:"yellow"},{icon:t,label:c.member_since,value:a.member_since?new Date(a.member_since).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"}):"-",color:"red"}];return(0,b.jsx)("div",{className:d,children:(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((a,c)=>(0,b.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:(0,u.cn)("p-3 rounded-lg border",{blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",yellow:"bg-yellow-50 text-yellow-600 border-yellow-200",red:"bg-red-50 text-red-600 border-red-200"}[a.color]),children:(0,b.jsx)(a.icon,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:a.label}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.value})]})]})},c))})})}let w=(0,s.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),x=(0,s.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),y=(0,s.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),z=(0,s.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),A=(0,s.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),B=(0,s.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var C=a.i(64934),D=a.i(20136);function E({profile:a,userId:c,labels:d,onUpdate:f}){let[g,h]=(0,e.useState)(!1),[j,k]=(0,e.useState)({phone:a.phone||"",lineId:a.lineId||"",company:a.company||""}),[l,m]=(0,e.useState)(!1),[n,p]=(0,e.useState)("idle"),q=async()=>{m(!0),p("idle");let a=await o(j,c);m(!1),a.success?(p("success"),h(!1),f?.(),setTimeout(()=>p("idle"),3e3)):p("error")};return(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 flex items-center justify-between",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,b.jsx)(w,{className:"w-5 h-5"}),d.profile_title]})}),!g&&(0,b.jsxs)("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",children:[(0,b.jsx)(B,{className:"w-4 h-4"}),d.edit]})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("span",{className:(0,u.cn)("inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold",(()=>{switch(a.customerType){case"retail":default:return"bg-gray-100 text-gray-800";case"wholesale":return"bg-blue-100 text-blue-800";case"vip":return"bg-yellow-100 text-yellow-800"}})()),children:[d.customer_type,": ",(()=>{switch(a.customerType){case"retail":return d.retail;case"wholesale":return d.wholesale;case"vip":return d.vip;default:return a.customerType}})()]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(x,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.email})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(y,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:d.phone}),g?(0,b.jsx)("input",{type:"tel",value:j.phone,onChange:a=>k({...j,phone:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter phone number"}):(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.phone||"-"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(w,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:d.line_id}),g?(0,b.jsx)("input",{type:"text",value:j.lineId,onChange:a=>k({...j,lineId:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter LINE ID"}):(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.lineId||"-"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(z,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:d.company}),g?(0,b.jsx)("input",{type:"text",value:j.company,onChange:a=>k({...j,company:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter company name"}):(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.company||"-"})]})]}),a.taxId&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(A,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:d.tax_id}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.taxId})]})]})]}),g&&(0,b.jsxs)("div",{className:"mt-6 flex items-center gap-3 pt-6 border-t border-gray-200",children:[(0,b.jsx)(i.Button,{onClick:q,disabled:l,className:"bg-blue-600 hover:bg-blue-700",children:l?"Saving...":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.Check,{className:"w-4 h-4 mr-1"}),d.save]})}),(0,b.jsxs)("button",{onClick:()=>{k({phone:a.phone||"",lineId:a.lineId||"",company:a.company||""}),h(!1),p("idle")},disabled:l,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[(0,b.jsx)(D.X,{className:"w-4 h-4"}),d.cancel]})]}),"success"===n&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2 text-green-800",children:[(0,b.jsx)(C.Check,{className:"w-4 h-4"}),"Profile updated successfully"]}),"error"===n&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-800",children:[(0,b.jsx)(D.X,{className:"w-4 h-4"}),"Failed to update profile"]})]})]})}function F({lang:a,dictionary:o}){let{account:p,common:q,auth:r,crm:s}=o,{user:t,isLoading:u,logout:w,changePassword:x,refreshUser:y}=(0,g.useAuth)(),{getCartCount:z}=(0,f.useCart)(),A=(0,d.useRouter)(),[B,C]=(0,e.useState)("overview"),[D,F]=(0,e.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[G,H]=(0,e.useState)(""),[I,J]=(0,e.useState)(""),[K,L]=(0,e.useState)(!1),[M,N]=(0,e.useState)(!1),[O,P]=(0,e.useState)(!1),[Q,R]=(0,e.useState)(null),[S,T]=(0,e.useState)([]),[U,V]=(0,e.useState)({first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"TH",phone:""}),[W,X]=(0,e.useState)(!1),[Y,Z]=(0,e.useState)(""),[$,_]=(0,e.useState)(""),[aa,ab]=(0,e.useState)(!1),[ac,ad]=(0,e.useState)(null),[ae,af]=(0,e.useState)(!1),ag=async()=>{X(!0),Z(""),console.log("[AccountDashboard] Loading addresses for user:",t?.id,t);let a=await j(t?.id);console.log("[AccountDashboard] Addresses result:",a),a.addresses?T(a.addresses):Z("Failed to load addresses"),X(!1)},ah=async()=>{if(!t?.id)return;af(!0);let a=await n(t.id);a.success&&a.data&&ad(a.data),af(!1)};(0,e.useEffect)(()=>{!u&&t&&!M&&y&&(y(),N(!0))},[u,t,y,M]),(0,e.useEffect)(()=>{"addresses"===B&&!W&&t?.id&&(console.log("[AccountDashboard] Switching to addresses tab, user ID:",t.id),ag())},[B,t?.id]),(0,e.useEffect)(()=>{"details"===B&&!ae&&t?.id&&ah()},[B,t?.id]),(0,e.useEffect)(()=>{u||t||A.push(`/${a}/login`)},[u,t,a,A]);let ai=[],aj=async a=>{if(a.preventDefault(),H(""),J(""),D.newPassword!==D.confirmPassword)return void H(p.password_mismatch||"Passwords do not match");if(D.newPassword.length<8)return void H(p.password_too_short||"Password must be at least 8 characters");L(!0);let b=await x(D.currentPassword,D.newPassword);L(!1),b.success?(J(p.password_success||"Password changed successfully"),F({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>J(""),3e3)):H(b.error||"Failed to change password")},ak=async a=>{a.preventDefault(),Z(""),_(""),ab(!0),console.log("[AccountDashboard] Saving address. User ID:",t?.id,"User:",t),console.log("[AccountDashboard] Address form:",U);try{let a;a=Q?await l(Q.id,U,t?.id):await k(U,t?.id),console.log("[AccountDashboard] Save result:",a),a.success?(_(Q?"Address updated successfully":"Address added successfully"),P(!1),R(null),V({first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"TH",phone:""}),await ag(),setTimeout(()=>_(""),3e3)):Z(a.error||"Failed to save address")}catch(a){Z("Failed to save address")}finally{ab(!1)}},al=async a=>{if(!confirm("Are you sure you want to delete this address?"))return;let b=await m(a,t?.id);b.success?(_("Address deleted successfully"),await ag(),setTimeout(()=>_(""),3e3)):Z(b.error||"Failed to delete address")};if(u)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-gray-600",children:"Loading..."})});let am=[{name:q.home,href:`/${a}`},{name:p.my_account,href:`/${a}/account`}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Breadcrumbs,{items:am,lang:a}),(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[p.welcome,", ",t?.firstName||t?.displayName,"!"]}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:p.overview})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,b.jsxs)("nav",{className:"space-y-2",children:[(0,b.jsx)("button",{onClick:()=>C("overview"),className:`w-full text-left px-4 py-2 rounded-md transition-colors ${"overview"===B?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:p.overview}),(0,b.jsx)("button",{onClick:()=>C("orders"),className:`w-full text-left px-4 py-2 rounded-md transition-colors ${"orders"===B?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:p.my_orders}),(0,b.jsx)("button",{onClick:()=>C("details"),className:`w-full text-left px-4 py-2 rounded-md transition-colors ${"details"===B?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:p.account_details}),(0,b.jsx)("button",{onClick:()=>C("addresses"),className:`w-full text-left px-4 py-2 rounded-md transition-colors ${"addresses"===B?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:p.addresses}),(0,b.jsx)("hr",{className:"my-2"}),(0,b.jsx)("button",{onClick:()=>w(),className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:r.logout})]})})}),(0,b.jsx)("div",{className:"lg:col-span-3",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:["overview"===B&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:p.overview}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:ai.length}),(0,b.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:p.my_orders})]}),(0,b.jsxs)("div",{className:"bg-green-50 rounded-lg p-6",children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-green-600",children:z()}),(0,b.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:q.products})]}),(0,b.jsxs)("div",{className:"bg-purple-50 rounded-lg p-6",children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:"0"}),(0,b.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:p.addresses})]})]}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:p.personal_info}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[r.first_name,":"]}),(0,b.jsx)("span",{className:"ml-2 text-gray-900",children:t?.firstName})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[r.last_name,":"]}),(0,b.jsx)("span",{className:"ml-2 text-gray-900",children:t?.lastName})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[r.email,":"]}),(0,b.jsx)("span",{className:"ml-2 text-gray-900",children:t?.email})]})]})]}),"orders"===B&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:p.my_orders}),0===ai.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:p.no_orders}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:p.no_orders_desc}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(c.default,{href:`/${a}/shop`,children:(0,b.jsx)(i.Button,{variant:"primary",size:"md",children:p.start_shopping})})})]}):(0,b.jsx)("div",{className:"space-y-4",children:ai.map(a=>(0,b.jsx)("div",{className:"border rounded-lg p-4"},a.id))})]}),"details"===B&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:p.account_details}),ae?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]}):(0,b.jsxs)(b.Fragment,{children:[ac&&(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"vip"===ac.customerType?"bg-purple-100 text-purple-800":"wholesale"===ac.customerType?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:"vip"===ac.customerType?s.vip||"VIP":"wholesale"===ac.customerType?s.wholesale||"Wholesale":s.retail||"Retail"})}),ac&&(0,b.jsx)(v,{stats:{total_orders:ac.totalOrders,total_spent:ac.totalSpent,avg_order_value:ac.avgOrderValue,member_since:ac.memberSince},labels:{total_orders:s.total_orders,total_spent:s.total_spent,avg_order_value:s.avg_order_value,member_since:s.member_since}}),(0,b.jsx)("hr",{className:"my-8"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:p.personal_info}),(0,b.jsxs)("form",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.first_name}),(0,b.jsx)("input",{type:"text",defaultValue:t?.firstName,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.last_name}),(0,b.jsx)("input",{type:"text",defaultValue:t?.lastName,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.email}),(0,b.jsx)("input",{type:"email",defaultValue:t?.email,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-900",disabled:!0,title:"Email cannot be changed"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Contact support to change email"})]})]}),ac&&(0,b.jsx)(E,{profile:ac,userId:t?.id,labels:{customer_type:s.customer_type,phone:s.phone,line_id:s.line_id,company:s.company,tax_id:s.tax_id,edit:s.edit,save:s.save,cancel:s.cancel,retail:s.retail,wholesale:s.wholesale,vip:s.vip,profile_title:s.profile_title},onUpdate:ah}),ac?.taxId&&(0,b.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s.tax_id||"Tax ID"}),(0,b.jsx)("p",{className:"text-gray-900 font-mono",children:ac.taxId}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Tax ID is read-only. Contact support to update."})]}),(0,b.jsx)("hr",{className:"my-8"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:p.change_password}),(0,b.jsxs)("form",{onSubmit:aj,className:"space-y-4",children:[G&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:G}),I&&(0,b.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:I}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.current_password}),(0,b.jsx)("input",{type:"password",value:D.currentPassword,onChange:a=>F({...D,currentPassword:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.new_password}),(0,b.jsx)("input",{type:"password",value:D.newPassword,onChange:a=>F({...D,newPassword:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:8}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Minimum 8 characters"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.confirm_password||"Confirm New Password"}),(0,b.jsx)("input",{type:"password",value:D.confirmPassword,onChange:a=>F({...D,confirmPassword:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:8})]}),(0,b.jsx)(i.Button,{variant:"primary",size:"md",type:"submit",disabled:K,children:K?p.changing||"Changing...":p.save||"Save"})]})]})]}),"addresses"===B&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:p.addresses}),!O&&(0,b.jsx)(i.Button,{variant:"primary",size:"sm",onClick:()=>{R(null),V({first_name:t?.firstName||"",last_name:t?.lastName||"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"TH",phone:""}),P(!0)},children:p.add_address||"Add Address"})]}),$&&(0,b.jsx)("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:$}),Y&&(0,b.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:Y}),O&&(0,b.jsxs)("div",{className:"mb-6 p-6 border border-gray-200 rounded-lg bg-gray-50",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:Q?p.edit_address||"Edit Address":p.add_address||"Add Address"}),(0,b.jsxs)("form",{onSubmit:ak,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.first_name," *"]}),(0,b.jsx)("input",{type:"text",value:U.first_name,onChange:a=>V({...U,first_name:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.last_name," *"]}),(0,b.jsx)("input",{type:"text",value:U.last_name,onChange:a=>V({...U,last_name:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.company||"Company"}),(0,b.jsx)("input",{type:"text",value:U.company,onChange:a=>V({...U,company:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[p.address_1||"Address"," *"]}),(0,b.jsx)("input",{type:"text",value:U.address_1,onChange:a=>V({...U,address_1:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.address_2||"Apartment, suite, etc."}),(0,b.jsx)("input",{type:"text",value:U.address_2,onChange:a=>V({...U,address_2:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[p.city||"City"," *"]}),(0,b.jsx)("input",{type:"text",value:U.city,onChange:a=>V({...U,city:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[p.state||"Province"," *"]}),(0,b.jsx)("input",{type:"text",value:U.state,onChange:a=>V({...U,state:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[p.postcode||"Postcode"," *"]}),(0,b.jsx)("input",{type:"text",value:U.postcode,onChange:a=>V({...U,postcode:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder:text-gray-400",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p.phone||"Phone"}),(0,b.jsx)("input",{type:"tel",value:U.phone,onChange:a=>V({...U,phone:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(i.Button,{variant:"primary",size:"md",type:"submit",disabled:aa,children:aa?p.saving||"Saving...":p.save||"Save"}),(0,b.jsx)(i.Button,{variant:"secondary",size:"md",type:"button",onClick:()=>{P(!1),R(null),V({first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"TH",phone:""})},disabled:aa,children:p.cancel||"Cancel"})]})]})]}),W?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:p.loading_addresses||"Loading addresses..."})]}):0!==S.length||O?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(a=>(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"font-semibold text-gray-900",children:[a.first_name," ",a.last_name]}),a.company&&(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.company})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{R(a),V(a),P(!0)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:p.edit||"Edit"}),(0,b.jsx)("button",{onClick:()=>al(a.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:p.delete||"Delete"})]})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,b.jsx)("p",{children:a.address_1}),a.address_2&&(0,b.jsx)("p",{children:a.address_2}),(0,b.jsxs)("p",{children:[a.city,", ",a.state," ",a.postcode]}),a.phone&&(0,b.jsxs)("p",{children:[p.phone,": ",a.phone]})]})]},a.id))}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsxs)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No addresses found"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Add your first address to get started"})]})]})]})})]})]})})]})}a.s(["AccountDashboard",()=>F],58382)}];

//# sourceMappingURL=sakwood-wp_frontend_components_auth_AccountDashboard_tsx_72bb93c5._.js.map