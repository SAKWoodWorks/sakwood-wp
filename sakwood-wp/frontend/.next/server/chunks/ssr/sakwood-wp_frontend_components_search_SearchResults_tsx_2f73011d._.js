module.exports=[19865,a=>{"use strict";var b=a.i(94413),c=a.i(46069),d=a.i(79151),e=a.i(24338),f=a.i(20136),g=a.i(15290),h=a.i(98753);async function i(a,b="th"){if(!a||0===a.trim().length)return{products:[],total:0};try{let c=a.trim();"th"===b&&(c=c.replace(/\s+/g,""));let d=`
      query SearchProducts($search: String!) {
        products(where: { search: $search }) {
          nodes {
            id: databaseId
            slug
            name
            type
            description
            shortDescription(format: RENDERED)
            ... on SimpleProduct {
              price
              regularPrice
            }
            ... on VariableProduct {
              price
              regularPrice
            }
            image {
              sourceUrl
              altText
            }
          }
        }
      }
    `,e=await fetch(h.API_CONFIG.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:d,variables:{search:c}}),next:{revalidate:30}});if(!e.ok)return console.error("[SearchService] Failed to fetch:",e.statusText),{products:[],total:0};let f=await e.json(),g=(f.data?.products?.nodes||[]).map(a=>({id:String(a.id),name:a.name,slug:a.slug,price:a.price||void 0,regularPrice:a.regularPrice||void 0,description:a.description||void 0,image:a.image||void 0,shortDescription:a.shortDescription||void 0,type:a.type||"simple"}));return{products:g,total:g.length}}catch(a){return console.error("[SearchService] Error searching products:",a),{products:[],total:0}}}var j=a.i(75129);function k({lang:a,dictionary:h,searchQuery:k,initialResults:l}){let m=(0,d.useRouter)(),[n,o]=(0,c.useState)(k),[p,q]=(0,c.useState)(l),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!0),v=h.search||{title:"th"===a?"ค้นหาสินค้า":"Search Products",search_placeholder:"th"===a?"ค้นหาชื่อสินค้า...":"Search products...",search_button:"th"===a?"ค้นหา":"Search",no_results:"th"===a?"ไม่พบสินค้า":"No products found",no_results_text:"th"===a?"ลอค้นหาด้วยคำค้นอื่น":"Try searching with different keywords",results_found:"th"===a?"พบ {count} สินค้า":"Found {count} products",view_details:"th"===a?"ดูรายละเอียด":"View Details"},w=async b=>{if(!b||0===b.trim().length)return;s(!0),u(!0);try{let c=await i(b,a);q(c)}catch(a){console.error("Search error:",a),q({products:[],total:0})}finally{s(!1)}let c=new URLSearchParams({q:b});m.replace(`/${a}/search?${c.toString()}`,{scroll:!1})};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4 sm:mb-6 text-center",children:v.title}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),w(n)},className:"relative",children:[(0,b.jsx)("input",{type:"text",value:n,onChange:a=>o(a.target.value),placeholder:v.search_placeholder,className:"w-full pl-12 pr-24 py-3 sm:py-4 text-base border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",autoFocus:!0}),(0,b.jsx)(e.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-2",children:[n&&(0,b.jsx)("button",{type:"button",onClick:()=>{o(""),q({products:[],total:0}),u(!1)},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:(0,b.jsx)(f.X,{className:"w-5 h-5"})}),(0,b.jsx)("button",{type:"submit",disabled:r||!n.trim(),className:"px-4 sm:px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm sm:text-base",children:r?(0,b.jsx)(g.Loader2,{className:"w-4 h-4 sm:w-5 sm:h-5 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Search,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:v.search_button})]})})]})]}),t&&!r&&(0,b.jsx)("div",{className:"mt-4 text-center text-sm text-gray-600",children:p.total>0?v.results_found.replace("{count}",String(p.total)):v.no_results})]})})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8",children:[r&&(0,b.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,b.jsx)(g.Loader2,{className:"w-8 h-8 sm:w-12 sm:h-12 text-blue-600 animate-spin"})}),!r&&t&&p.products.length>0&&(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:p.products.map(c=>(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow group",children:[(0,b.jsx)(j.default,{href:`/${a}/products/${c.slug}`,className:"block",children:(0,b.jsx)("div",{className:"relative aspect-square bg-gray-100 overflow-hidden",children:c.image?.sourceUrl?(0,b.jsx)("img",{src:c.image.sourceUrl,alt:c.image.altText||c.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-300",children:(0,b.jsx)("svg",{className:"w-16 h-16 sm:w-24 sm:h-24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})})}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)(j.default,{href:`/${a}/products/${c.slug}`,children:(0,b.jsx)("h3",{className:"font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors text-sm sm:text-base",children:c.name})}),c.price&&(0,b.jsx)("div",{className:"flex items-center justify-between mt-3",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-lg sm:text-xl font-bold text-blue-600",children:c.price}),c.regularPrice&&c.regularPrice!==c.price&&(0,b.jsx)("span",{className:"text-xs sm:text-sm text-gray-400 line-through",children:c.regularPrice})]})}),(0,b.jsx)(j.default,{href:`/${a}/products/${c.slug}`,className:"mt-3 sm:mt-4 block w-full text-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors text-sm font-semibold",children:v.view_details})]})]},c.id))}),!r&&t&&0===p.products.length&&(0,b.jsxs)("div",{className:"text-center py-12 sm:py-16",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 sm:w-24 sm:h-24 bg-gray-100 rounded-full mb-4 sm:mb-6",children:(0,b.jsx)(e.Search,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-700 mb-2",children:v.no_results}),(0,b.jsx)("p",{className:"text-gray-500 text-sm sm:text-base mb-4 sm:mb-6",children:v.no_results_text}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["th"===a?"คำค้นที่ค้นหา: ":"Search query: "," ",(0,b.jsxs)("strong",{children:['"',n,'"']})]})]})]})]})}a.s(["SearchResults",()=>k],19865)}];

//# sourceMappingURL=sakwood-wp_frontend_components_search_SearchResults_tsx_2f73011d._.js.map