{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/sakwood-wp/frontend/i18n-config.ts"],"sourcesContent":["export const i18n = {\r\n  defaultLocale: 'th',\r\n  locales: ['en', 'th'],\r\n} as const;\r\n\r\nexport type Locale = (typeof i18n)['locales'][number];"],"names":[],"mappings":";;;;AAAO,MAAM,OAAO;IAClB,eAAe;IACf,SAAS;QAAC;QAAM;KAAK;AACvB"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/sakwood-wp/frontend/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\n\r\nimport { i18n } from './i18n-config';\r\n\r\nimport { match as matchLocale } from '@formatjs/intl-localematcher';\r\nimport Negotiator from 'negotiator';\r\n\r\nfunction getLocale(request: NextRequest): string | undefined {\r\n  // ดึงภาษาจาก Browser ของลูกค้า (เช่น th-TH, en-US)\r\n  const negotiatorHeaders: Record<string, string> = {};\r\n  request.headers.forEach((value, key) => (negotiatorHeaders[key] = value));\r\n\r\n  // @ts-ignore locales are readonly\r\n  const locales: string[] = i18n.locales;\r\n\r\n  // ใช้ library ช่วยเลือกภาษาที่เหมาะสมที่สุด\r\n  let languages = new Negotiator({ headers: negotiatorHeaders }).languages(\r\n    locales\r\n  );\r\n\r\n  return matchLocale(languages, locales, i18n.defaultLocale);\r\n}\r\n\r\nexport function middleware(request: NextRequest) {\r\n  const pathname = request.nextUrl.pathname;\r\n\r\n  // ยกเว้นไฟล์ที่ไม่ต้องเปลี่ยนภาษา เช่น รูปภาพ, API, icon\r\n  if (\r\n    [\r\n      '/manifest.json',\r\n      '/favicon.ico',\r\n      '/logo.png',\r\n      '/hero-video.mp4',\r\n      '/line-logo.png',\r\n      '/telegram-logo.png',\r\n      '/msg-logo.png',\r\n      '/call-logo.png',\r\n      // เพิ่มไฟล์อื่นๆ ที่ต้องการยกเว้นที่นี่\r\n    ].includes(pathname) ||\r\n    pathname.startsWith('/_next/') ||\r\n    pathname.startsWith('/api/') ||\r\n    pathname.startsWith('/static/')\r\n  )\r\n    return;\r\n\r\n  // เช็คว่าใน URL มีภาษาหรือยัง (เช่น /th/...)\r\n  const pathnameIsMissingLocale = i18n.locales.every(\r\n    (locale) => !pathname.startsWith(`/${locale}/`) && pathname !== `/${locale}`\r\n  );\r\n\r\n  // ถ้ายังไม่มีภาษา ให้ Redirect ไปภาษาที่เหมาะสม\r\n  // แต่ถ้า URL มีภาษาอยู่แล้ว ให้ใช้ภาษานั้นต่อไป ไม่ต้อง redirect\r\n  if (pathnameIsMissingLocale) {\r\n    const locale = getLocale(request);\r\n\r\n    // เช่น เข้ามาที่ /products -> เปลี่ยนเป็น /th/products\r\n    return NextResponse.redirect(\r\n      new URL(\r\n        `/${locale}${pathname.startsWith('/') ? '' : '/'}${pathname}`,\r\n        request.url\r\n      )\r\n    );\r\n  }\r\n\r\n  // ถ้า URL มีภาษาอยู่แล้ว ให้ใช้ค่าเดิม ไม่ต้อง detect จาก browser\r\n  // ทำให้ URL ที่ user คลิกมาไม่ถูกเปลี่ยนโดยอัตโนมัติ\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  // Matcher ignoring `/_next/` and `/api/`\r\n  matcher: ['/((?!api|_next/static|_next/image|favicon.ico).*)'],\r\n};"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAGA;AAEA;AACA;;;;;AAEA,SAAS,UAAU,OAAoB;IACrC,mDAAmD;IACnD,MAAM,oBAA4C,CAAC;IACnD,QAAQ,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO,MAAS,iBAAiB,CAAC,IAAI,GAAG;IAElE,kCAAkC;IAClC,MAAM,UAAoB,2JAAI,CAAC,OAAO;IAEtC,4CAA4C;IAC5C,IAAI,YAAY,IAAI,mLAAU,CAAC;QAAE,SAAS;IAAkB,GAAG,SAAS,CACtE;IAGF,OAAO,IAAA,0NAAW,EAAC,WAAW,SAAS,2JAAI,CAAC,aAAa;AAC3D;AAEO,SAAS,WAAW,OAAoB;IAC7C,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IAEzC,yDAAyD;IACzD,IACE;QACE;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KAED,CAAC,QAAQ,CAAC,aACX,SAAS,UAAU,CAAC,cACpB,SAAS,UAAU,CAAC,YACpB,SAAS,UAAU,CAAC,aAEpB;IAEF,6CAA6C;IAC7C,MAAM,0BAA0B,2JAAI,CAAC,OAAO,CAAC,KAAK,CAChD,CAAC,SAAW,CAAC,SAAS,UAAU,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,KAAK,aAAa,CAAC,CAAC,EAAE,QAAQ;IAG9E,gDAAgD;IAChD,iEAAiE;IACjE,IAAI,yBAAyB;QAC3B,MAAM,SAAS,UAAU;QAEzB,uDAAuD;QACvD,OAAO,6NAAY,CAAC,QAAQ,CAC1B,IAAI,IACF,CAAC,CAAC,EAAE,SAAS,SAAS,UAAU,CAAC,OAAO,KAAK,MAAM,UAAU,EAC7D,QAAQ,GAAG;IAGjB;IAEA,kEAAkE;IAClE,qDAAqD;IACrD,OAAO,6NAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,yCAAyC;IACzC,SAAS;QAAC;KAAoD;AAChE"}}]
}