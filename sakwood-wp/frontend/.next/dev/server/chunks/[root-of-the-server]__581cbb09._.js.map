{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/app/api/customer-addresses/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\n\nconst WORDPRESS_API_URL = 'http://localhost:8006/wp-json';\n\nexport async function GET(request: Request) {\n  try {\n    const { searchParams } = new URL(request.url);\n    const userId = searchParams.get('user_id');\n    const cookieHeader = request.headers.get('cookie') || '';\n\n    // Build WordPress URL with user_id if provided\n    const wpUrl = userId\n      ? `${WORDPRESS_API_URL}/sakwood/v1/customer/addresses?user_id=${userId}`\n      : `${WORDPRESS_API_URL}/sakwood/v1/customer/addresses`;\n\n    const response = await fetch(wpUrl, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Cookie': cookieHeader,\n      },\n      cache: 'no-store',\n    });\n\n    if (!response.ok) {\n      return NextResponse.json(\n        { addresses: [], total: 0, error: 'Failed to fetch addresses' },\n        { status: response.status }\n      );\n    }\n\n    const data = await response.json();\n    return NextResponse.json(data);\n  } catch (error) {\n    return NextResponse.json(\n      { addresses: [], total: 0, error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json();\n    const cookieHeader = request.headers.get('cookie') || '';\n\n    const response = await fetch(\n      `${WORDPRESS_API_URL}/sakwood/v1/customer/addresses`,\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Cookie': cookieHeader,\n        },\n        body: JSON.stringify(body),\n        cache: 'no-store',\n      }\n    );\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      return NextResponse.json(\n        { error: errorData.message || 'Failed to create address' },\n        { status: response.status }\n      );\n    }\n\n    const data = await response.json();\n    return NextResponse.json(data);\n  } catch (error) {\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,oBAAoB;AAEnB,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,SAAS,aAAa,GAAG,CAAC;QAChC,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC,aAAa;QAEtD,+CAA+C;QAC/C,MAAM,QAAQ,SACV,GAAG,kBAAkB,uCAAuC,EAAE,QAAQ,GACtE,GAAG,kBAAkB,8BAA8B,CAAC;QAExD,MAAM,WAAW,MAAM,MAAM,OAAO;YAClC,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,UAAU;YACZ;YACA,OAAO;QACT;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO,6KAAY,CAAC,IAAI,CACtB;gBAAE,WAAW,EAAE;gBAAE,OAAO;gBAAG,OAAO;YAA4B,GAC9D;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,6KAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,6KAAY,CAAC,IAAI,CACtB;YAAE,WAAW,EAAE;YAAE,OAAO;YAAG,OAAO;QAAwB,GAC1D;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC,aAAa;QAEtD,MAAM,WAAW,MAAM,MACrB,GAAG,kBAAkB,8BAA8B,CAAC,EACpD;YACE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,UAAU;YACZ;YACA,MAAM,KAAK,SAAS,CAAC;YACrB,OAAO;QACT;QAGF,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YACvD,OAAO,6KAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,UAAU,OAAO,IAAI;YAA2B,GACzD;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,6KAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,6KAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}