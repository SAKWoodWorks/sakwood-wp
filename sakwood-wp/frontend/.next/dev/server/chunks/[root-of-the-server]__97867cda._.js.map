{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/app/api/customer-addresses/%5BaddressId%5D/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\n\nconst WORDPRESS_API_URL = 'http://localhost:8006/wp-json';\n\nexport async function PUT(\n  request: Request,\n  { params }: { params: Promise<{ addressId: string }> }\n) {\n  try {\n    const { addressId } = await params;\n    const body = await request.json();\n    const cookieHeader = request.headers.get('cookie') || '';\n\n    // Include user_id in the body\n    const bodyWithUserId = { ...body, user_id: body.user_id };\n\n    const response = await fetch(\n      `${WORDPRESS_API_URL}/sakwood/v1/customer/addresses/${addressId}`,\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Cookie': cookieHeader,\n        },\n        body: JSON.stringify(bodyWithUserId),\n        cache: 'no-store',\n      }\n    );\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      return NextResponse.json(\n        { error: errorData.message || 'Failed to update address' },\n        { status: response.status }\n      );\n    }\n\n    const data = await response.json();\n    return NextResponse.json(data);\n  } catch (error) {\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function DELETE(\n  request: Request,\n  { params }: { params: Promise<{ addressId: string }> }\n) {\n  try {\n    const { addressId } = await params;\n    const { searchParams } = new URL(request.url);\n    const userId = searchParams.get('user_id');\n    const cookieHeader = request.headers.get('cookie') || '';\n\n    // Include user_id as query parameter\n    const wpUrl = userId\n      ? `${WORDPRESS_API_URL}/sakwood/v1/customer/addresses/${addressId}?user_id=${userId}`\n      : `${WORDPRESS_API_URL}/sakwood/v1/customer/addresses/${addressId}`;\n\n    const response = await fetch(wpUrl, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'Cookie': cookieHeader,\n      },\n      cache: 'no-store',\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      return NextResponse.json(\n        { error: errorData.message || 'Failed to delete address' },\n        { status: response.status }\n      );\n    }\n\n    const data = await response.json();\n    return NextResponse.json(data);\n  } catch (error) {\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,oBAAoB;AAEnB,eAAe,IACpB,OAAgB,EAChB,EAAE,MAAM,EAA8C;IAEtD,IAAI;QACF,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM;QAC5B,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC,aAAa;QAEtD,8BAA8B;QAC9B,MAAM,iBAAiB;YAAE,GAAG,IAAI;YAAE,SAAS,KAAK,OAAO;QAAC;QAExD,MAAM,WAAW,MAAM,MACrB,GAAG,kBAAkB,+BAA+B,EAAE,WAAW,EACjE;YACE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,UAAU;YACZ;YACA,MAAM,KAAK,SAAS,CAAC;YACrB,OAAO;QACT;QAGF,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YACvD,OAAO,6KAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,UAAU,OAAO,IAAI;YAA2B,GACzD;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,6KAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,6KAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,OACpB,OAAgB,EAChB,EAAE,MAAM,EAA8C;IAEtD,IAAI;QACF,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM;QAC5B,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,SAAS,aAAa,GAAG,CAAC;QAChC,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC,aAAa;QAEtD,qCAAqC;QACrC,MAAM,QAAQ,SACV,GAAG,kBAAkB,+BAA+B,EAAE,UAAU,SAAS,EAAE,QAAQ,GACnF,GAAG,kBAAkB,+BAA+B,EAAE,WAAW;QAErE,MAAM,WAAW,MAAM,MAAM,OAAO;YAClC,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,UAAU;YACZ;YACA,OAAO;QACT;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YACvD,OAAO,6KAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,UAAU,OAAO,IAAI;YAA2B,GACzD;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,6KAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,6KAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}