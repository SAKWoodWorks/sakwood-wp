{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/app/api/auth/me/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\n\r\nconst WORDPRESS_URL = process.env.WORDPRESS_URL || 'http://localhost:8006';\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    // Get the token from the Authorization header\r\n    const authHeader = request.headers.get('authorization');\r\n\r\n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\r\n      return NextResponse.json(\r\n        { error: 'Unauthorized' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    const token = authHeader.substring(7); // Remove 'Bearer ' prefix\r\n\r\n    // Fetch user data from WordPress using the custom endpoint\r\n    const userResponse = await fetch(`${WORDPRESS_URL}/wp-json/sakwood/v1/user/me`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    if (!userResponse.ok) {\r\n      return NextResponse.json(\r\n        { error: 'Invalid token' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    const user = await userResponse.json();\r\n\r\n    return NextResponse.json(user);\r\n  } catch (error) {\r\n    console.error('Get user error:', error);\r\n    return NextResponse.json(\r\n      { error: 'An error occurred' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,gBAAgB,QAAQ,GAAG,CAAC,aAAa,IAAI;AAE5C,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,8CAA8C;QAC9C,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;QAEvC,IAAI,CAAC,cAAc,CAAC,WAAW,UAAU,CAAC,YAAY;YACpD,OAAO,6KAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAe,GACxB;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,QAAQ,WAAW,SAAS,CAAC,IAAI,0BAA0B;QAEjE,2DAA2D;QAC3D,MAAM,eAAe,MAAM,MAAM,GAAG,cAAc,2BAA2B,CAAC,EAAE;YAC9E,SAAS;gBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;YACpC;QACF;QAEA,IAAI,CAAC,aAAa,EAAE,EAAE;YACpB,OAAO,6KAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAgB,GACzB;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,OAAO,MAAM,aAAa,IAAI;QAEpC,OAAO,6KAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mBAAmB;QACjC,OAAO,6KAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAoB,GAC7B;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}