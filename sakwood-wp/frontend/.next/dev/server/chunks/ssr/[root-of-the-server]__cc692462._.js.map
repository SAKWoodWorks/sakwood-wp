{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/services/blogService.ts"],"sourcesContent":["import { graphqlRequest } from '@/lib/graphql/client';\r\nimport { GET_BLOG_POSTS_QUERY, GET_BLOG_POST_QUERY } from '@/lib/graphql/queries';\r\nimport { BlogPost, BlogPostsResponse, BlogPostResponse, BlogImage } from '@/lib/types';\r\nimport { APP_CONFIG } from '@/lib/config/constants';\r\n\r\n/**\r\n * Transform internal Docker URLs to publicly accessible URLs\r\n * Replaces http://sak_wp:80/ with http://localhost:8006/\r\n */\r\nfunction transformImageUrl(url: string | undefined): string | undefined {\r\n  if (!url) return undefined;\r\n  return url.replace('http://sak_wp:80/', 'http://localhost:8006/');\r\n}\r\n\r\n/**\r\n * Transform blog image URLs\r\n */\r\nfunction transformBlogImage(image?: BlogImage): BlogImage | undefined {\r\n  if (!image) return undefined;\r\n  const transformedUrl = transformImageUrl(image.node.sourceUrl);\r\n  if (!transformedUrl) return undefined;\r\n  return {\r\n    node: {\r\n      ...image.node,\r\n      sourceUrl: transformedUrl,\r\n    },\r\n  };\r\n}\r\n\r\n// Fallback blog posts when WordPress API is not available\r\nconst FALLBACK_BLOG_POSTS: BlogPost[] = [\r\n  {\r\n    id: '1',\r\n    title: 'Choosing the Right Plywood for Your Project',\r\n    slug: 'choosing-right-plywood',\r\n    excerpt: 'Learn about the different types of plywood and how to select the best one for your construction needs.',\r\n    date: new Date().toISOString(),\r\n    featuredImage: {\r\n      node: {\r\n        sourceUrl: 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=800&auto=format&fit=crop',\r\n        altText: 'Plywood sheets stacked',\r\n      },\r\n    },\r\n    author: {\r\n      node: {\r\n        name: 'SAK WoodWorks Team',\r\n      },\r\n    },\r\n    categories: {\r\n      nodes: [\r\n        { name: 'Tips & Guides', slug: 'tips-guides' },\r\n      ],\r\n    },\r\n    tags: {\r\n      nodes: [],\r\n    },\r\n  },\r\n  {\r\n    id: '2',\r\n    title: 'Understanding Wood Grades and Specifications',\r\n    slug: 'understanding-wood-grades',\r\n    excerpt: 'A comprehensive guide to wood grades, what they mean, and how they affect your construction projects.',\r\n    date: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),\r\n    featuredImage: {\r\n      node: {\r\n        sourceUrl: 'https://images.unsplash.com/photo-1541123603104-512919d6a96c?w=800&auto=format&fit=crop',\r\n        altText: 'Wood texture close-up',\r\n      },\r\n    },\r\n    author: {\r\n      node: {\r\n        name: 'SAK WoodWorks Team',\r\n      },\r\n    },\r\n    categories: {\r\n      nodes: [\r\n        { name: 'Education', slug: 'education' },\r\n      ],\r\n    },\r\n    tags: {\r\n      nodes: [],\r\n    },\r\n  },\r\n  {\r\n    id: '3',\r\n    title: 'Sustainable Sourcing in the Timber Industry',\r\n    slug: 'sustainable-sourcing-timber',\r\n    excerpt: 'How the timber industry is embracing sustainable practices and what it means for your projects.',\r\n    date: new Date(Date.now() - 14 * 24 * 60 * 60 * 1000).toISOString(),\r\n    featuredImage: {\r\n      node: {\r\n        sourceUrl: 'https://images.unsplash.com/photo-1518998053901-5348d3961a04?w=800&auto=format&fit=crop',\r\n        altText: 'Forest with trees',\r\n      },\r\n    },\r\n    author: {\r\n      node: {\r\n        name: 'SAK WoodWorks Team',\r\n      },\r\n    },\r\n    categories: {\r\n      nodes: [\r\n        { name: 'Sustainability', slug: 'sustainability' },\r\n      ],\r\n    },\r\n    tags: {\r\n      nodes: [],\r\n    },\r\n  },\r\n];\r\n\r\n/**\r\n * Get blog posts via REST API with language filtering\r\n * Uses custom endpoint: /wp-json/sakwood/v1/posts?language=th\r\n * Blog posts now work like products - single post with TH/EN translations\r\n */\r\nexport async function getBlogPosts(language: string = 'th'): Promise<BlogPost[]> {\r\n  try {\r\n    const baseUrl = process.env.NEXT_PUBLIC_WORDPRESS_GRAPHQL_URL?.replace('/graphql', '') || 'http://localhost:8006';\r\n    const url = `${baseUrl}/wp-json/sakwood/v1/posts?language=${language}&per_page=${APP_CONFIG.blogPerPage}`;\r\n\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      console.error('Failed to fetch blog posts:', response.status);\r\n      // Fall back to GraphQL\r\n      return getBlogPostsViaGraphQL();\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    // Handle empty array\r\n    if (!Array.isArray(data) || data.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Transform featured image URLs for all posts\r\n    return data.map((post: any) => ({\r\n      ...post,\r\n      featuredImage: transformBlogImage(post.featuredImage),\r\n    }));\r\n  } catch (error) {\r\n    console.error('Error fetching blog posts via REST API:', error);\r\n    // Fall back to GraphQL\r\n    return getBlogPostsViaGraphQL();\r\n  }\r\n}\r\n\r\n/**\r\n * Fallback: Get blog posts via GraphQL (no language filtering)\r\n */\r\nasync function getBlogPostsViaGraphQL(): Promise<BlogPost[]> {\r\n  try {\r\n    const data = await graphqlRequest<BlogPostsResponse>(GET_BLOG_POSTS_QUERY, {\r\n      first: 10,\r\n    });\r\n    const posts = data?.posts?.nodes || [];\r\n\r\n    // Transform featured image URLs for all posts\r\n    return posts.map(post => ({\r\n      ...post,\r\n      featuredImage: transformBlogImage(post.featuredImage),\r\n    }));\r\n  } catch (error) {\r\n    console.error('Failed to fetch blog posts via GraphQL:', error);\r\n    return FALLBACK_BLOG_POSTS;\r\n  }\r\n}\r\n\r\n/**\r\n * Get single blog post by slug with language filtering\r\n * Uses custom REST API endpoint: /wp-json/sakwood/v1/posts/{slug}?language=th\r\n */\r\nexport async function getBlogPostBySlug(slug: string, language: string = 'th'): Promise<BlogPost | null> {\r\n  try {\r\n    // The slug from Next.js is already decoded, but we need to URL-encode it for the API request\r\n    // This ensures Thai characters are properly encoded for the HTTP request\r\n    const encodedSlug = encodeURIComponent(slug);\r\n    const baseUrl = process.env.NEXT_PUBLIC_WORDPRESS_GRAPHQL_URL?.replace('/graphql', '') || 'http://localhost:8006';\r\n    const url = `${baseUrl}/wp-json/sakwood/v1/posts/${encodedSlug}?language=${language}`;\r\n\r\n    const response = await fetch(url);\r\n\r\n    if (!response.ok) {\r\n      // If 404, post not found\r\n      if (response.status === 404) {\r\n        return null;\r\n      }\r\n      console.error('Failed to fetch blog post:', response.status);\r\n      // Fall back to GraphQL\r\n      return getBlogPostBySlugViaGraphQL(slug);\r\n    }\r\n\r\n    const post = await response.json();\r\n\r\n    if (!post || (post as any).code === 'post_not_found') {\r\n      return null;\r\n    }\r\n\r\n    // Transform featured image URLs\r\n    return {\r\n      ...post,\r\n      featuredImage: transformBlogImage(post.featuredImage),\r\n    };\r\n  } catch (error) {\r\n    console.error('Error fetching blog post via REST API:', error);\r\n    // Fall back to GraphQL\r\n    return getBlogPostBySlugViaGraphQL(slug);\r\n  }\r\n}\r\n\r\n/**\r\n * Fallback: Get blog post by slug via GraphQL (no language filtering)\r\n */\r\nasync function getBlogPostBySlugViaGraphQL(slug: string): Promise<BlogPost | null> {\r\n  try {\r\n    const data = await graphqlRequest<BlogPostResponse>(GET_BLOG_POST_QUERY, { slug });\r\n    const post = data?.post;\r\n\r\n    if (!post) return null;\r\n\r\n    // Transform featured image URLs\r\n    return {\r\n      ...post,\r\n      featuredImage: transformBlogImage(post.featuredImage),\r\n    };\r\n  } catch (error) {\r\n    console.error('Failed to fetch blog post via GraphQL:', error);\r\n    return null;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/layout/Breadcrumbs.tsx"],"sourcesContent":["import Link from 'next/link';\r\nimport type { Locale } from '@/i18n-config';\r\n\r\nexport interface BreadcrumbItem {\r\n  name: string;\r\n  href: string;\r\n}\r\n\r\ninterface BreadcrumbsProps {\r\n  items: BreadcrumbItem[];\r\n  lang: Locale;\r\n}\r\n\r\nexport function Breadcrumbs({ items, lang }: BreadcrumbsProps) {\r\n  return (\r\n    <nav className=\"py-4 px-6 bg-slate-50 border-b border-slate-200\" aria-label=\"Breadcrumb navigation\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <ol className=\"flex items-center gap-2 text-sm text-slate-600\">\r\n          {items.map((item, index) => (\r\n            <li key={item.href} className=\"flex items-center gap-2\">\r\n              {index > 0 && (\r\n                <span className=\"text-slate-400\" aria-hidden=\"true\">/</span>\r\n              )}\r\n              {index === items.length - 1 ? (\r\n                <span className=\"font-medium text-slate-900\" aria-current=\"page\">\r\n                  {item.name}\r\n                </span>\r\n              ) : (\r\n                <Link \r\n                  href={item.href} \r\n                  className=\"hover:text-blue-600 transition-colors\"\r\n                >\r\n                  {item.name}\r\n                </Link>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ol>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAaO,SAAS,YAAY,EAAE,KAAK,EAAE,IAAI,EAAoB;IAC3D,qBACE,2QAAC;QAAI,WAAU;QAAkD,cAAW;kBAC1E,cAAA,2QAAC;YAAI,WAAU;sBACb,cAAA,2QAAC;gBAAG,WAAU;0BACX,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,2QAAC;wBAAmB,WAAU;;4BAC3B,QAAQ,mBACP,2QAAC;gCAAK,WAAU;gCAAiB,eAAY;0CAAO;;;;;;4BAErD,UAAU,MAAM,MAAM,GAAG,kBACxB,2QAAC;gCAAK,WAAU;gCAA6B,gBAAa;0CACvD,KAAK,IAAI;;;;;qDAGZ,2QAAC,uNAAI;gCACH,MAAM,KAAK,IAAI;gCACf,WAAU;0CAET,KAAK,IAAI;;;;;;;uBAbP,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;AAsB9B"}},
    {"offset": {"line": 310, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/utils/sanitize.ts"],"sourcesContent":["/**\n * HTML Sanitization Utility\n *\n * Provides XSS protection by sanitizing HTML content before rendering.\n * Uses DOMPurify to remove malicious scripts while preserving safe HTML.\n *\n * IMPORTANT: Always use this before dangerouslySetInnerHTML\n */\n\nimport DOMPurify from 'dompurify';\n\n/**\n * Sanitization configuration options\n */\nexport interface SanitizeOptions {\n  /** Allowed HTML tags (default: common safe tags) */\n  ALLOWED_TAGS?: string[];\n  /** Allowed HTML attributes (default: common safe attributes) */\n  ALLOWED_ATTR?: string[];\n  /** Whether to allow unknown protocols (default: false for security) */\n  ALLOW_UNKNOWN_PROTOCOLS?: boolean;\n  /** Whether to allow data URIs (default: false for security) */\n  ALLOW_DATA_URI?: boolean;\n}\n\n/**\n * Default safe configuration for product descriptions and blog content\n */\nconst DEFAULT_CONFIG: SanitizeOptions = {\n  ALLOWED_TAGS: [\n    'p', 'br', 'strong', 'b', 'em', 'i', 'u', 'a',\n    'ul', 'ol', 'li', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n    'blockquote', 'code', 'pre', 'span', 'div',\n    'table', 'thead', 'tbody', 'tr', 'th', 'td',\n    'img', 'figure', 'figcaption',\n  ],\n  ALLOWED_ATTR: [\n    'href', 'title', 'alt', 'src', 'class', 'id',\n    'target', 'rel', 'width', 'height',\n  ],\n  ALLOW_UNKNOWN_PROTOCOLS: false,\n  ALLOW_DATA_URI: false,\n};\n\n/**\n * Strict configuration for user-generated content\n */\nexport const STRICT_CONFIG: SanitizeOptions = {\n  ALLOWED_TAGS: ['p', 'br', 'strong', 'em', 'u'],\n  ALLOWED_ATTR: ['class'],\n  ALLOW_UNKNOWN_PROTOCOLS: false,\n  ALLOW_DATA_URI: false,\n};\n\n/**\n * Sanitize HTML content to prevent XSS attacks\n *\n * @param html - The HTML string to sanitize\n * @param options - Optional sanitization configuration\n * @returns Sanitized HTML safe to render\n *\n * @example\n * ```tsx\n * <div dangerouslySetInnerHTML={{ __html: sanitizeHTML(product.description) }} />\n * ```\n */\nexport function sanitizeHTML(html: string, options?: SanitizeOptions): string {\n  if (!html || typeof html !== 'string') {\n    return '';\n  }\n\n  const config = { ...DEFAULT_CONFIG, ...options };\n\n  // Server-side: create DOMPurify instance with jsdom\n  if (typeof window === 'undefined') {\n    const DOMPurify = require('dompurify');\n    const { JSDOM } = require('jsdom');\n    const jsdomWindow = new JSDOM('').window;\n    const window = jsdomWindow as any;\n\n    // Create DOMPurify instance for jsdom window\n    const createDOMPurify = DOMPurify as any;\n    const serverPurify = createDOMPurify(window);\n\n    return serverPurify.sanitize(html, config);\n  }\n\n  // Client-side: use browser DOMPurify\n  return DOMPurify.sanitize(html, config);\n}\n\n/**\n * Sanitize HTML with strict configuration (for user content)\n *\n * @param html - The HTML string to sanitize\n * @returns Sanitized HTML with minimal tags allowed\n */\nexport function sanitizeStrict(html: string): string {\n  return sanitizeHTML(html, STRICT_CONFIG);\n}\n\n/**\n * Sanitize URL to prevent javascript: and data: attacks\n *\n * @param url - The URL to sanitize\n * @returns Sanitized URL or empty string if unsafe\n *\n * @example\n * ```tsx\n * <a href={sanitizeURL(userInputUrl)}>Link</a>\n * ```\n */\nexport function sanitizeURL(url: string): string {\n  if (!url || typeof url !== 'string') {\n    return '';\n  }\n\n  // Remove whitespace\n  const trimmed = url.trim();\n\n  // Block dangerous protocols\n  const dangerousProtocols = ['javascript:', 'data:', 'vbscript:', 'file:'];\n  const lowerUrl = trimmed.toLowerCase();\n\n  for (const protocol of dangerousProtocols) {\n    if (lowerUrl.startsWith(protocol)) {\n      return '';\n    }\n  }\n\n  // Allow http, https, mailto, tel\n  const allowedProtocols = ['http://', 'https://', 'mailto:', 'tel:'];\n  const hasAllowedProtocol = allowedProtocols.some(p => lowerUrl.startsWith(p));\n\n  if (hasAllowedProtocol) {\n    return trimmed;\n  }\n\n  // If no protocol, treat as relative URL\n  return trimmed;\n}\n\n/**\n * Type guard to check if content is safe HTML\n * (useful for TypeScript validation)\n */\nexport function isValidHTML(html: string): boolean {\n  try {\n    const sanitized = sanitizeHTML(html);\n    return sanitized.length > 0;\n  } catch {\n    return false;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;;;;;;CAOC,GAED;;AAgBA;;CAEC,GACD,MAAM,iBAAkC;IACtC,cAAc;QACZ;QAAK;QAAM;QAAU;QAAK;QAAM;QAAK;QAAK;QAC1C;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAChD;QAAc;QAAQ;QAAO;QAAQ;QACrC;QAAS;QAAS;QAAS;QAAM;QAAM;QACvC;QAAO;QAAU;KAClB;IACD,cAAc;QACZ;QAAQ;QAAS;QAAO;QAAO;QAAS;QACxC;QAAU;QAAO;QAAS;KAC3B;IACD,yBAAyB;IACzB,gBAAgB;AAClB;AAKO,MAAM,gBAAiC;IAC5C,cAAc;QAAC;QAAK;QAAM;QAAU;QAAM;KAAI;IAC9C,cAAc;QAAC;KAAQ;IACvB,yBAAyB;IACzB,gBAAgB;AAClB;AAcO,SAAS,aAAa,IAAY,EAAE,OAAyB;IAClE,IAAI,CAAC,QAAQ,OAAO,SAAS,UAAU;QACrC,OAAO;IACT;IAEA,MAAM,SAAS;QAAE,GAAG,cAAc;QAAE,GAAG,OAAO;IAAC;IAE/C,oDAAoD;IACpD,wCAAmC;QACjC,MAAM;QACN,MAAM,EAAE,KAAK,EAAE;QACf,MAAM,cAAc,IAAI,MAAM,IAAI,MAAM;QACxC,MAAM,SAAS;QAEf,6CAA6C;QAC7C,MAAM,kBAAkB;QACxB,MAAM,eAAe,gBAAgB;QAErC,OAAO,aAAa,QAAQ,CAAC,MAAM;IACrC;;;AAIF;AAQO,SAAS,eAAe,IAAY;IACzC,OAAO,aAAa,MAAM;AAC5B;AAaO,SAAS,YAAY,GAAW;IACrC,IAAI,CAAC,OAAO,OAAO,QAAQ,UAAU;QACnC,OAAO;IACT;IAEA,oBAAoB;IACpB,MAAM,UAAU,IAAI,IAAI;IAExB,4BAA4B;IAC5B,MAAM,qBAAqB;QAAC;QAAe;QAAS;QAAa;KAAQ;IACzE,MAAM,WAAW,QAAQ,WAAW;IAEpC,KAAK,MAAM,YAAY,mBAAoB;QACzC,IAAI,SAAS,UAAU,CAAC,WAAW;YACjC,OAAO;QACT;IACF;IAEA,iCAAiC;IACjC,MAAM,mBAAmB;QAAC;QAAW;QAAY;QAAW;KAAO;IACnE,MAAM,qBAAqB,iBAAiB,IAAI,CAAC,CAAA,IAAK,SAAS,UAAU,CAAC;IAE1E,IAAI,oBAAoB;QACtB,OAAO;IACT;IAEA,wCAAwC;IACxC,OAAO;AACT;AAMO,SAAS,YAAY,IAAY;IACtC,IAAI;QACF,MAAM,YAAY,aAAa;QAC/B,OAAO,UAAU,MAAM,GAAG;IAC5B,EAAE,OAAM;QACN,OAAO;IACT;AACF"}},
    {"offset": {"line": 466, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/app/%5Blang%5D/blog/%5Bslug%5D/page.tsx"],"sourcesContent":["import { notFound } from 'next/navigation';\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { getBlogPostBySlug } from '@/lib/services/blogService';\nimport { getDictionary } from '@/lib/get-dictionary';\nimport { Breadcrumbs } from '@/components/layout/Breadcrumbs';\nimport { sanitizeHTML } from '@/lib/utils/sanitize';\nimport type { Locale } from '@/i18n-config';\n\ninterface PageProps {\n  params: Promise<{\n    lang: string;\n    slug: string;\n  }>;\n}\n\nexport async function generateMetadata({ params }: PageProps): Promise<Metadata> {\n  const { lang, slug } = await params;\n  const post = await getBlogPostBySlug(slug, lang);\n  const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || \"https://sakwood.com\";\n\n  if (!post) {\n    return {\n      title: 'Post Not Found',\n    };\n  }\n\n  const title = post.title || 'Blog Post';\n  const description = post.excerpt || post.content?.replace(/<[^>]*>?/gm, '').substring(0, 160) || '';\n  const imageUrl = post.featuredImage?.node?.sourceUrl || `${siteUrl}/og-image.jpg`;\n\n  return {\n    title,\n    description,\n    openGraph: {\n      title,\n      description,\n      url: `${siteUrl}/${lang}/blog/${slug}`,\n      siteName: 'Sakwood',\n      images: [\n        {\n          url: imageUrl,\n          width: 1200,\n          height: 630,\n          alt: title,\n        }\n      ],\n    },\n    twitter: {\n      card: 'summary_large_image',\n      title,\n      description,\n      images: [imageUrl],\n    },\n    alternates: {\n      canonical: `/${lang}/blog/${slug}`,\n    },\n  };\n}\n\nexport default async function BlogPostPage({ params }: PageProps) {\n  const { lang, slug } = await params;\n  const dictionary = await getDictionary(lang as Locale);\n  const { blog, common } = dictionary;\n\n  const post = await getBlogPostBySlug(slug, lang);\n\n  if (!post) {\n    notFound();\n  }\n\n  // Format date based on locale\n  const formatDate = (dateString: string) => {\n    const locale = lang === 'th' ? 'th-TH' : 'en-US';\n    return new Date(dateString).toLocaleDateString(locale, {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  };\n\n  const breadcrumbItems = [\n    { name: common.home, href: `/${lang}` },\n    { name: blog.title, href: `/${lang}/blog` },\n    { name: post.title, href: `/${lang}/blog/${slug}` },\n  ];\n\n  return (\n    <>\n      <Breadcrumbs items={breadcrumbItems} lang={lang as Locale} />\n\n      <article className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white\">\n        {/* Hero Section */}\n        <div className=\"bg-gradient-to-br from-blue-900 to-blue-800 text-white py-20 px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            {/* Categories */}\n            {post.categories?.nodes && post.categories.nodes.length > 0 && (\n              <div className=\"flex flex-wrap gap-2 mb-4\">\n                {post.categories.nodes.map((category) => (\n                  <span\n                    key={category.slug}\n                    className=\"text-xs font-bold uppercase tracking-wide bg-blue-700 text-blue-100 px-3 py-1 rounded-full\"\n                  >\n                    {category.name}\n                  </span>\n                ))}\n              </div>\n            )}\n\n            {/* Title */}\n            <h1 className=\"text-4xl md:text-5xl font-bold mb-4 leading-tight\">\n              {post.title}\n            </h1>\n\n            {/* Meta */}\n            <div className=\"flex flex-wrap items-center gap-4 text-blue-100\">\n              {post.author?.node && (\n                <div className=\"flex items-center gap-2\">\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                  </svg>\n                  <span>{post.author.node.name}</span>\n                </div>\n              )}\n              <div className=\"flex items-center gap-2\">\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n                <time dateTime={post.date}>{formatDate(post.date)}</time>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Featured Image */}\n        {post.featuredImage?.node?.sourceUrl && (\n          <div className=\"max-w-5xl mx-auto px-6 -mt-10\">\n            <div className=\"relative rounded-2xl overflow-hidden shadow-2xl bg-white\">\n              <Image\n                src={post.featuredImage.node.sourceUrl}\n                alt={post.featuredImage.node.altText || post.title}\n                width={1200}\n                height={630}\n                className=\"w-full h-auto\"\n                unoptimized\n              />\n            </div>\n          </div>\n        )}\n\n        {/* Content */}\n        <div className=\"max-w-4xl mx-auto px-6 py-16\">\n          <div className=\"bg-white rounded-2xl shadow-lg p-8 md:p-12\">\n            {/* Excerpt */}\n            {post.excerpt && (\n              <div className=\"text-xl text-gray-600 leading-relaxed mb-8 pb-8 border-b border-gray-200\">\n                {post.excerpt}\n              </div>\n            )}\n\n            {/* Content */}\n            <div\n              className=\"prose prose-lg max-w-none\"\n              dangerouslySetInnerHTML={{ __html: sanitizeHTML(post.content || '') }}\n            />\n\n            {/* Tags */}\n            {post.tags?.nodes && post.tags.nodes.length > 0 && (\n              <div className=\"mt-12 pt-8 border-t border-gray-200\">\n                <h3 className=\"text-sm font-bold uppercase tracking-wide text-gray-500 mb-4\">\n                  Tags\n                </h3>\n                <div className=\"flex flex-wrap gap-2\">\n                  {post.tags.nodes.map((tag) => (\n                    <Link\n                      key={tag.slug}\n                      href={`/${lang}/blog?tag=${tag.slug}`}\n                      className=\"inline-block px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200 transition-colors\"\n                    >\n                      {tag.name}\n                    </Link>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Share/Actions */}\n            <div className=\"mt-12 pt-8 border-t border-gray-200\">\n              <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n                <Link\n                  href={`/${lang}/blog`}\n                  className=\"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium transition-colors\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                  </svg>\n                  {blog.view_all}\n                </Link>\n              </div>\n            </div>\n          </div>\n\n          {/* Author Bio */}\n          {post.author?.node && (\n            <div className=\"mt-8 bg-blue-50 rounded-2xl p-8\">\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-16 h-16 bg-blue-200 rounded-full flex items-center justify-center flex-shrink-0\">\n                  <svg className=\"w-8 h-8 text-blue-700\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                  </svg>\n                </div>\n                <div>\n                  <h3 className=\"font-bold text-gray-900 mb-1\">{post.author.node.name}</h3>\n                  <p className=\"text-sm text-gray-600\">\n                    {lang === 'th' ? 'ผู้เขียนบทความ' : 'Article Author'}\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Back to Top */}\n        <div className=\"max-w-4xl mx-auto px-6 pb-16 text-center\">\n          <a\n            href=\"#top\"\n            className=\"inline-flex items-center gap-2 text-gray-600 hover:text-blue-600 transition-colors\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 10l7-7m0 0l7 7m-7-7v18\" />\n            </svg>\n            {lang === 'th' ? 'กลับไปด้านบน' : 'Back to top'}\n          </a>\n        </div>\n      </article>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}