{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/products/ProductImageGallery.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Product } from '@/lib/types';\r\n\r\ninterface ProductImageGalleryProps {\r\n  product: Product;\r\n}\r\n\r\nexport function ProductImageGallery({ product }: ProductImageGalleryProps) {\r\n  const [selectedImage, setSelectedImage] = useState(0);\r\n\r\n  // Combine main image with gallery images\r\n  // Main image is the cover/first image, followed by gallery images\r\n  const images: string[] = [];\r\n  \r\n  // Add main image as cover/first image\r\n  if (product.image?.sourceUrl) {\r\n    images.push(product.image.sourceUrl);\r\n  }\r\n  \r\n  // Add gallery images\r\n  if (product.galleryImages?.nodes) {\r\n    product.galleryImages.nodes.forEach(img => {\r\n      if (img.sourceUrl && !images.includes(img.sourceUrl)) {\r\n        images.push(img.sourceUrl);\r\n      }\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Main Image */}\r\n      <div className=\"aspect-square bg-gray-100 rounded-lg overflow-hidden shadow-lg\">\r\n        {images[selectedImage] ? (\r\n          <img\r\n            src={images[selectedImage]}\r\n            alt={product.name}\r\n            className=\"w-full h-full object-cover transition-all duration-300\"\r\n          />\r\n        ) : (\r\n          <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\r\n            <svg className=\"w-24 h-24\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n            </svg>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Thumbnail Images */}\r\n      {images.length > 1 && (\r\n        <div className=\"grid grid-cols-4 gap-2\">\r\n          {images.map((img, index) => (\r\n            <button\r\n              key={index}\r\n              onClick={() => setSelectedImage(index)}\r\n              className={`aspect-square bg-gray-100 rounded-md overflow-hidden cursor-pointer transition-all ${\r\n                selectedImage === index \r\n                  ? 'ring-2 ring-blue-900 ring-offset-2' \r\n                  : 'hover:ring-2 hover:ring-blue-600'\r\n              }`}\r\n              aria-label={`View ${index + 1}`}\r\n            >\r\n              <img\r\n                src={img}\r\n                alt={`${product.name} - View ${index + 1}`}\r\n                className={`w-full h-full object-cover transition-opacity ${\r\n                  selectedImage === index ? 'opacity-100' : 'opacity-70 hover:opacity-100'\r\n                }`}\r\n              />\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASO,SAAS,oBAAoB,EAAE,OAAO,EAA4B;IACvE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,8OAAQ,EAAC;IAEnD,yCAAyC;IACzC,kEAAkE;IAClE,MAAM,SAAmB,EAAE;IAE3B,sCAAsC;IACtC,IAAI,QAAQ,KAAK,EAAE,WAAW;QAC5B,OAAO,IAAI,CAAC,QAAQ,KAAK,CAAC,SAAS;IACrC;IAEA,qBAAqB;IACrB,IAAI,QAAQ,aAAa,EAAE,OAAO;QAChC,QAAQ,aAAa,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;YAClC,IAAI,IAAI,SAAS,IAAI,CAAC,OAAO,QAAQ,CAAC,IAAI,SAAS,GAAG;gBACpD,OAAO,IAAI,CAAC,IAAI,SAAS;YAC3B;QACF;IACF;IAEA,qBACE,2QAAC;QAAI,WAAU;;0BAEb,2QAAC;gBAAI,WAAU;0BACZ,MAAM,CAAC,cAAc,iBACpB,2QAAC;oBACC,KAAK,MAAM,CAAC,cAAc;oBAC1B,KAAK,QAAQ,IAAI;oBACjB,WAAU;;;;;yCAGZ,2QAAC;oBAAI,WAAU;8BACb,cAAA,2QAAC;wBAAI,WAAU;wBAAY,MAAK;wBAAO,QAAO;wBAAe,SAAQ;wBAAY,eAAY;kCAC3F,cAAA,2QAAC;4BAAK,eAAc;4BAAQ,gBAAe;4BAAQ,aAAa;4BAAG,GAAE;;;;;;;;;;;;;;;;;;;;;YAO5E,OAAO,MAAM,GAAG,mBACf,2QAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,KAAK,sBAChB,2QAAC;wBAEC,SAAS,IAAM,iBAAiB;wBAChC,WAAW,CAAC,mFAAmF,EAC7F,kBAAkB,QACd,uCACA,oCACJ;wBACF,cAAY,CAAC,KAAK,EAAE,QAAQ,GAAG;kCAE/B,cAAA,2QAAC;4BACC,KAAK;4BACL,KAAK,GAAG,QAAQ,IAAI,CAAC,QAAQ,EAAE,QAAQ,GAAG;4BAC1C,WAAW,CAAC,8CAA8C,EACxD,kBAAkB,QAAQ,gBAAgB,gCAC1C;;;;;;uBAdC;;;;;;;;;;;;;;;;AAsBnB"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/utils/sanitize.ts"],"sourcesContent":["/**\n * HTML Sanitization Utility\n *\n * Provides XSS protection by sanitizing HTML content before rendering.\n * Uses DOMPurify to remove malicious scripts while preserving safe HTML.\n *\n * IMPORTANT: Always use this before dangerouslySetInnerHTML\n */\n\nimport DOMPurify from 'dompurify';\n\n/**\n * Sanitization configuration options\n */\nexport interface SanitizeOptions {\n  /** Allowed HTML tags (default: common safe tags) */\n  ALLOWED_TAGS?: string[];\n  /** Allowed HTML attributes (default: common safe attributes) */\n  ALLOWED_ATTR?: string[];\n  /** Whether to allow unknown protocols (default: false for security) */\n  ALLOW_UNKNOWN_PROTOCOLS?: boolean;\n  /** Whether to allow data URIs (default: false for security) */\n  ALLOW_DATA_URI?: boolean;\n}\n\n/**\n * Default safe configuration for product descriptions and blog content\n */\nconst DEFAULT_CONFIG: SanitizeOptions = {\n  ALLOWED_TAGS: [\n    'p', 'br', 'strong', 'b', 'em', 'i', 'u', 'a',\n    'ul', 'ol', 'li', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n    'blockquote', 'code', 'pre', 'span', 'div',\n    'table', 'thead', 'tbody', 'tr', 'th', 'td',\n    'img', 'figure', 'figcaption',\n  ],\n  ALLOWED_ATTR: [\n    'href', 'title', 'alt', 'src', 'class', 'id',\n    'target', 'rel', 'width', 'height',\n  ],\n  ALLOW_UNKNOWN_PROTOCOLS: false,\n  ALLOW_DATA_URI: false,\n};\n\n/**\n * Strict configuration for user-generated content\n */\nexport const STRICT_CONFIG: SanitizeOptions = {\n  ALLOWED_TAGS: ['p', 'br', 'strong', 'em', 'u'],\n  ALLOWED_ATTR: ['class'],\n  ALLOW_UNKNOWN_PROTOCOLS: false,\n  ALLOW_DATA_URI: false,\n};\n\n/**\n * Sanitize HTML content to prevent XSS attacks\n *\n * @param html - The HTML string to sanitize\n * @param options - Optional sanitization configuration\n * @returns Sanitized HTML safe to render\n *\n * @example\n * ```tsx\n * <div dangerouslySetInnerHTML={{ __html: sanitizeHTML(product.description) }} />\n * ```\n */\nexport function sanitizeHTML(html: string, options?: SanitizeOptions): string {\n  if (!html || typeof html !== 'string') {\n    return '';\n  }\n\n  const config = { ...DEFAULT_CONFIG, ...options };\n\n  // Server-side: create DOMPurify instance with jsdom\n  if (typeof window === 'undefined') {\n    const DOMPurify = require('dompurify');\n    const { JSDOM } = require('jsdom');\n    const jsdomWindow = new JSDOM('').window;\n    const window = jsdomWindow as any;\n\n    // Create DOMPurify instance for jsdom window\n    const createDOMPurify = DOMPurify as any;\n    const serverPurify = createDOMPurify(window);\n\n    return serverPurify.sanitize(html, config);\n  }\n\n  // Client-side: use browser DOMPurify\n  return DOMPurify.sanitize(html, config);\n}\n\n/**\n * Sanitize HTML with strict configuration (for user content)\n *\n * @param html - The HTML string to sanitize\n * @returns Sanitized HTML with minimal tags allowed\n */\nexport function sanitizeStrict(html: string): string {\n  return sanitizeHTML(html, STRICT_CONFIG);\n}\n\n/**\n * Sanitize URL to prevent javascript: and data: attacks\n *\n * @param url - The URL to sanitize\n * @returns Sanitized URL or empty string if unsafe\n *\n * @example\n * ```tsx\n * <a href={sanitizeURL(userInputUrl)}>Link</a>\n * ```\n */\nexport function sanitizeURL(url: string): string {\n  if (!url || typeof url !== 'string') {\n    return '';\n  }\n\n  // Remove whitespace\n  const trimmed = url.trim();\n\n  // Block dangerous protocols\n  const dangerousProtocols = ['javascript:', 'data:', 'vbscript:', 'file:'];\n  const lowerUrl = trimmed.toLowerCase();\n\n  for (const protocol of dangerousProtocols) {\n    if (lowerUrl.startsWith(protocol)) {\n      return '';\n    }\n  }\n\n  // Allow http, https, mailto, tel\n  const allowedProtocols = ['http://', 'https://', 'mailto:', 'tel:'];\n  const hasAllowedProtocol = allowedProtocols.some(p => lowerUrl.startsWith(p));\n\n  if (hasAllowedProtocol) {\n    return trimmed;\n  }\n\n  // If no protocol, treat as relative URL\n  return trimmed;\n}\n\n/**\n * Type guard to check if content is safe HTML\n * (useful for TypeScript validation)\n */\nexport function isValidHTML(html: string): boolean {\n  try {\n    const sanitized = sanitizeHTML(html);\n    return sanitized.length > 0;\n  } catch {\n    return false;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;;;;;;CAOC,GAED;;AAgBA;;CAEC,GACD,MAAM,iBAAkC;IACtC,cAAc;QACZ;QAAK;QAAM;QAAU;QAAK;QAAM;QAAK;QAAK;QAC1C;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAChD;QAAc;QAAQ;QAAO;QAAQ;QACrC;QAAS;QAAS;QAAS;QAAM;QAAM;QACvC;QAAO;QAAU;KAClB;IACD,cAAc;QACZ;QAAQ;QAAS;QAAO;QAAO;QAAS;QACxC;QAAU;QAAO;QAAS;KAC3B;IACD,yBAAyB;IACzB,gBAAgB;AAClB;AAKO,MAAM,gBAAiC;IAC5C,cAAc;QAAC;QAAK;QAAM;QAAU;QAAM;KAAI;IAC9C,cAAc;QAAC;KAAQ;IACvB,yBAAyB;IACzB,gBAAgB;AAClB;AAcO,SAAS,aAAa,IAAY,EAAE,OAAyB;IAClE,IAAI,CAAC,QAAQ,OAAO,SAAS,UAAU;QACrC,OAAO;IACT;IAEA,MAAM,SAAS;QAAE,GAAG,cAAc;QAAE,GAAG,OAAO;IAAC;IAE/C,oDAAoD;IACpD,wCAAmC;QACjC,MAAM;QACN,MAAM,EAAE,KAAK,EAAE;QACf,MAAM,cAAc,IAAI,MAAM,IAAI,MAAM;QACxC,MAAM,SAAS;QAEf,6CAA6C;QAC7C,MAAM,kBAAkB;QACxB,MAAM,eAAe,gBAAgB;QAErC,OAAO,aAAa,QAAQ,CAAC,MAAM;IACrC;;;AAIF;AAQO,SAAS,eAAe,IAAY;IACzC,OAAO,aAAa,MAAM;AAC5B;AAaO,SAAS,YAAY,GAAW;IACrC,IAAI,CAAC,OAAO,OAAO,QAAQ,UAAU;QACnC,OAAO;IACT;IAEA,oBAAoB;IACpB,MAAM,UAAU,IAAI,IAAI;IAExB,4BAA4B;IAC5B,MAAM,qBAAqB;QAAC;QAAe;QAAS;QAAa;KAAQ;IACzE,MAAM,WAAW,QAAQ,WAAW;IAEpC,KAAK,MAAM,YAAY,mBAAoB;QACzC,IAAI,SAAS,UAAU,CAAC,WAAW;YACjC,OAAO;QACT;IACF;IAEA,iCAAiC;IACjC,MAAM,mBAAmB;QAAC;QAAW;QAAY;QAAW;KAAO;IACnE,MAAM,qBAAqB,iBAAiB,IAAI,CAAC,CAAA,IAAK,SAAS,UAAU,CAAC;IAE1E,IAAI,oBAAoB;QACtB,OAAO;IACT;IAEA,wCAAwC;IACxC,OAAO;AACT;AAMO,SAAS,YAAY,IAAY;IACtC,IAAI;QACF,MAAM,YAAY,aAAa;QAC/B,OAAO,UAAU,MAAM,GAAG;IAC5B,EAAE,OAAM;QACN,OAAO;IACT;AACF"}},
    {"offset": {"line": 268, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/products/ProductInfo.tsx"],"sourcesContent":["'use client';\r\n\r\nimport type { Locale } from '@/i18n-config';\r\nimport { Product } from '@/lib/types';\r\nimport { useState } from 'react';\r\nimport { useCart } from '@/lib/context/CartContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport { AddToCompareButton } from '@/components/products/AddToCompareButton';\r\nimport { sanitizeHTML } from '@/lib/utils/sanitize';\r\n\r\ninterface ProductInfoProps {\r\n  product: Product;\r\n  lang: Locale;\r\n  dictionary: {\r\n    product: {\r\n      sku_label: string;\r\n      category_label: string;\r\n      availability_label: string;\r\n      in_stock: string;\r\n      out_of_stock: string;\r\n      description_title: string;\r\n      add_to_quote: string;\r\n      add_to_cart: string;\r\n      contact_for_price: string;\r\n      added_to_cart: string;\r\n      added_to_quote: string;\r\n    };\r\n    compare?: {\r\n      add_to_compare: string;\r\n      added: string;\r\n      max_items: string;\r\n    };\r\n  };\r\n}\r\n\r\nexport function ProductInfo({ product, lang, dictionary }: ProductInfoProps) {\r\n  const { product: dict } = dictionary;\r\n  const { addToCart } = useCart();\r\n  const router = useRouter();\r\n  const [message, setMessage] = useState('');\r\n  const [messageType, setMessageType] = useState<'success' | 'info' | ''>('');\r\n\r\n  // Currency symbol based on language\r\n  const currency = lang === 'th' ? 'บาท' : 'THB';\r\n\r\n  const hasPrice = product.price && product.price !== '';\r\n\r\n  const handleAddToCart = () => {\r\n    addToCart(product);\r\n    setMessage(dict.added_to_cart);\r\n    setMessageType('success');\r\n    setTimeout(() => setMessage(''), 3000);\r\n  };\r\n\r\n  const handleAddToQuote = () => {\r\n    addToCart(product);\r\n    setMessage(dict.added_to_quote);\r\n    setMessageType('info');\r\n    setTimeout(() => {\r\n      router.push(`/${lang}/quote`);\r\n    }, 1000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Product Title - Smaller since page header has main title */}\r\n      <div>\r\n        <h2 className=\"text-2xl font-semibold text-blue-900 mb-3\">\r\n          {product.name || product.slug || 'Product'}\r\n        </h2>\r\n        <div className=\"flex items-center gap-4 text-sm text-gray-500\">\r\n          <span className=\"font-medium\">SKU: {product.sku || product.id}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Price */}\r\n      <div className=\"border-b border-gray-200 pb-6\">\r\n        {hasPrice ? (\r\n          <div className=\"flex items-baseline gap-3\">\r\n            <span className=\"text-3xl font-bold text-blue-900\">\r\n              {product.price} {currency}\r\n            </span>\r\n            {product.regularPrice && product.regularPrice !== product.price && (\r\n              <span className=\"text-lg text-gray-400 line-through\">\r\n                {product.regularPrice} {currency}\r\n              </span>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <span className=\"text-2xl font-semibold text-blue-600\">\r\n            {dict.contact_for_price}\r\n          </span>\r\n        )}\r\n      </div>\r\n\r\n      {/* Description */}\r\n      <div>\r\n        <h2 className=\"text-lg font-semibold text-blue-900 mb-3\">\r\n          {dict.description_title}\r\n        </h2>\r\n        <div\r\n          className=\"prose prose-sm text-gray-600 leading-relaxed\"\r\n          dangerouslySetInnerHTML={{\r\n            __html: sanitizeHTML(product.description || '<p>No description available.</p>')\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* Message */}\r\n      {message && (\r\n        <div className={`p-4 rounded-lg ${\r\n          messageType === 'success' ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'\r\n        }`}>\r\n          {message}\r\n        </div>\r\n      )}\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"space-y-3\">\r\n        <button\r\n          onClick={handleAddToCart}\r\n          className=\"w-full px-8 py-4 bg-blue-900 text-white font-bold hover:bg-blue-800 transition-all uppercase tracking-wide rounded-none\"\r\n        >\r\n          {hasPrice ? dict.add_to_cart : dict.add_to_quote}\r\n        </button>\r\n        <button\r\n          onClick={handleAddToQuote}\r\n          className=\"w-full px-8 py-4 border-2 border-blue-900 text-blue-900 font-bold hover:bg-blue-50 transition-all uppercase tracking-wide rounded-none\"\r\n        >\r\n          {dict.add_to_quote}\r\n        </button>\r\n\r\n        {/* Add to Compare Button */}\r\n        <div className=\"flex justify-center\">\r\n          <AddToCompareButton\r\n            product={product}\r\n            variant=\"default\"\r\n            dictionary={{ compare: dictionary.compare }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Additional Info */}\r\n      <div className=\"space-y-3 pt-4 border-t border-gray-200\">\r\n        <div className=\"flex justify-between\">\r\n          <span className=\"text-gray-500\">{dict.availability_label}:</span>\r\n          <span className=\"font-semibold text-green-600\">\r\n            {dict.in_stock}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAIA;AACA;AACA;AACA;AACA;AARA;;;;;;;AAmCO,SAAS,YAAY,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAoB;IACzE,MAAM,EAAE,SAAS,IAAI,EAAE,GAAG;IAC1B,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,sKAAO;IAC7B,MAAM,SAAS,IAAA,4KAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,8OAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,8OAAQ,EAA0B;IAExE,oCAAoC;IACpC,MAAM,WAAW,SAAS,OAAO,QAAQ;IAEzC,MAAM,WAAW,QAAQ,KAAK,IAAI,QAAQ,KAAK,KAAK;IAEpD,MAAM,kBAAkB;QACtB,UAAU;QACV,WAAW,KAAK,aAAa;QAC7B,eAAe;QACf,WAAW,IAAM,WAAW,KAAK;IACnC;IAEA,MAAM,mBAAmB;QACvB,UAAU;QACV,WAAW,KAAK,cAAc;QAC9B,eAAe;QACf,WAAW;YACT,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC;QAC9B,GAAG;IACL;IAEA,qBACE,2QAAC;QAAI,WAAU;;0BAEb,2QAAC;;kCACC,2QAAC;wBAAG,WAAU;kCACX,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI;;;;;;kCAEnC,2QAAC;wBAAI,WAAU;kCACb,cAAA,2QAAC;4BAAK,WAAU;;gCAAc;gCAAM,QAAQ,GAAG,IAAI,QAAQ,EAAE;;;;;;;;;;;;;;;;;;0BAKjE,2QAAC;gBAAI,WAAU;0BACZ,yBACC,2QAAC;oBAAI,WAAU;;sCACb,2QAAC;4BAAK,WAAU;;gCACb,QAAQ,KAAK;gCAAC;gCAAE;;;;;;;wBAElB,QAAQ,YAAY,IAAI,QAAQ,YAAY,KAAK,QAAQ,KAAK,kBAC7D,2QAAC;4BAAK,WAAU;;gCACb,QAAQ,YAAY;gCAAC;gCAAE;;;;;;;;;;;;yCAK9B,2QAAC;oBAAK,WAAU;8BACb,KAAK,iBAAiB;;;;;;;;;;;0BAM7B,2QAAC;;kCACC,2QAAC;wBAAG,WAAU;kCACX,KAAK,iBAAiB;;;;;;kCAEzB,2QAAC;wBACC,WAAU;wBACV,yBAAyB;4BACvB,QAAQ,IAAA,qKAAY,EAAC,QAAQ,WAAW,IAAI;wBAC9C;;;;;;;;;;;;YAKH,yBACC,2QAAC;gBAAI,WAAW,CAAC,eAAe,EAC9B,gBAAgB,YAAY,gCAAgC,6BAC5D;0BACC;;;;;;0BAKL,2QAAC;gBAAI,WAAU;;kCACb,2QAAC;wBACC,SAAS;wBACT,WAAU;kCAET,WAAW,KAAK,WAAW,GAAG,KAAK,YAAY;;;;;;kCAElD,2QAAC;wBACC,SAAS;wBACT,WAAU;kCAET,KAAK,YAAY;;;;;;kCAIpB,2QAAC;wBAAI,WAAU;kCACb,cAAA,2QAAC,gMAAkB;4BACjB,SAAS;4BACT,SAAQ;4BACR,YAAY;gCAAE,SAAS,WAAW,OAAO;4BAAC;;;;;;;;;;;;;;;;;0BAMhD,2QAAC;gBAAI,WAAU;0BACb,cAAA,2QAAC;oBAAI,WAAU;;sCACb,2QAAC;4BAAK,WAAU;;gCAAiB,KAAK,kBAAkB;gCAAC;;;;;;;sCACzD,2QAAC;4BAAK,WAAU;sCACb,KAAK,QAAQ;;;;;;;;;;;;;;;;;;;;;;;AAM1B"}},
    {"offset": {"line": 517, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/products/RelatedProductsCarousel.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport type { Locale } from '@/i18n-config';\nimport { Product } from '@/lib/types';\n\ninterface RelatedProductsCarouselProps {\n  products: Product[];\n  lang: Locale;\n  dictionary: {\n    product: {\n      related_title: string;\n      view_details: string;\n    };\n    common: {\n      view_all: string;\n    };\n  };\n}\n\nexport function RelatedProductsCarousel({\n  products,\n  lang,\n  dictionary\n}: RelatedProductsCarouselProps) {\n  const { product: dict, common } = dictionary;\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\n  const [canScrollRight, setCanScrollRight] = useState(true);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [itemsPerView, setItemsPerView] = useState(4);\n\n  // Calculate items per view based on screen size\n  useEffect(() => {\n    const updateItemsPerView = () => {\n      const width = window.innerWidth;\n      if (width < 640) {\n        setItemsPerView(2);\n      } else if (width < 1024) {\n        setItemsPerView(3);\n      } else {\n        setItemsPerView(4);\n      }\n    };\n\n    updateItemsPerView();\n    window.addEventListener('resize', updateItemsPerView);\n    return () => window.removeEventListener('resize', updateItemsPerView);\n  }, []);\n\n  // Check scroll capabilities\n  const checkScrollCapabilities = useCallback(() => {\n    const container = scrollContainerRef.current;\n    if (!container) {\n      setCanScrollLeft(false);\n      setCanScrollRight(false);\n      return;\n    }\n\n    setCanScrollLeft(container.scrollLeft > 0);\n    setCanScrollRight(\n      container.scrollLeft < container.scrollWidth - container.clientWidth\n    );\n  }, []);\n\n  // Update current index based on scroll position\n  const updateCurrentIndex = useCallback(() => {\n    const container = scrollContainerRef.current;\n    if (!container || products.length === 0) return;\n\n    const itemWidth = container.scrollWidth / products.length;\n    const newIndex = Math.round(container.scrollLeft / itemWidth);\n    const maxIndex = Math.max(0, products.length - itemsPerView);\n    setCurrentIndex(Math.min(newIndex, maxIndex));\n  }, [products.length, itemsPerView]);\n\n  useEffect(() => {\n    const container = scrollContainerRef.current;\n    if (!container) return;\n\n    const handleScroll = () => {\n      checkScrollCapabilities();\n      updateCurrentIndex();\n    };\n\n    container.addEventListener('scroll', handleScroll);\n    checkScrollCapabilities();\n    return () => {\n      container.removeEventListener('scroll', handleScroll);\n    };\n  }, [checkScrollCapabilities, updateCurrentIndex]);\n\n  const scroll = (direction: 'left' | 'right') => {\n    const container = scrollContainerRef.current;\n    if (!container) return;\n\n    const scrollAmount = container.clientWidth * 0.8;\n    const newScrollLeft =\n      direction === 'left'\n        ? container.scrollLeft - scrollAmount\n        : container.scrollLeft + scrollAmount;\n\n    container.scrollTo({\n      left: newScrollLeft,\n      behavior: 'smooth'\n    });\n  };\n\n  const scrollToIndex = (index: number) => {\n    const container = scrollContainerRef.current;\n    if (!container) return;\n\n    const itemWidth = container.scrollWidth / products.length;\n    const newScrollLeft = index * itemWidth;\n\n    container.scrollTo({\n      left: newScrollLeft,\n      behavior: 'smooth'\n    });\n  };\n\n  // Calculate total number of \"pages\" for pagination dots\n  const totalPages = Math.max(1, products.length - itemsPerView + 1);\n\n  if (products.length === 0) {\n    return null;\n  }\n\n  return (\n    <section\n      className=\"pt-8 relative\"\n      aria-labelledby=\"related-products-heading\"\n    >\n      <div className=\"flex justify-between items-center mb-8\">\n        <h2\n          id=\"related-products-heading\"\n          className=\"text-2xl font-bold text-blue-900\"\n        >\n          {dict.related_title}\n        </h2>\n        <Link\n          href={`/${lang}/shop`}\n          className=\"text-blue-600 hover:text-blue-800 font-semibold flex items-center gap-2\"\n        >\n          {common.view_all}\n          <svg\n            className=\"w-4 h-4\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M9 5l7 7-7 7\"\n            />\n          </svg>\n        </Link>\n      </div>\n\n      {/* Navigation Buttons - Desktop */}\n      <div className=\"relative group\">\n        {/* Left Navigation Button */}\n        {canScrollLeft && (\n          <button\n            onClick={() => scroll('left')}\n            className=\"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white shadow-lg rounded-full p-2 hover:bg-gray-100 transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            aria-label=\"Scroll to previous products\"\n            type=\"button\"\n          >\n            <svg\n              className=\"w-6 h-6 text-blue-900\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n              aria-hidden=\"true\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M15 19l-7-7 7-7\"\n              />\n            </svg>\n          </button>\n        )}\n\n        {/* Scroll Container */}\n        <div\n          ref={scrollContainerRef}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          aria-label={`${dict.related_title} (${currentIndex + 1} of ${totalPages})`}\n          className=\"flex gap-6 overflow-x-auto scroll-smooth snap-x snap-mandatory scrollbar-hide px-1\"\n          style={{\n            scrollPaddingLeft: '1px',\n            scrollPaddingRight: '1px'\n          }}\n        >\n          {products.map((product, index) => (\n            <div\n              key={product.id}\n              className=\"flex-shrink-0 w-[calc(50%-12px)] sm:w-[calc(33.333%-16px)] lg:w-[calc(25%-18px)] snap-start\"\n            >\n              <Link\n                href={`/${lang}/products/${product.slug}`}\n                className=\"group block\"\n              >\n                <div className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow\">\n                  <div className=\"aspect-square bg-gray-100 overflow-hidden relative\">\n                    {product.image?.sourceUrl ? (\n                      <Image\n                        src={product.image.sourceUrl}\n                        alt={product.name}\n                        fill\n                        className=\"object-cover group-hover:scale-105 transition-transform duration-300\"\n                        sizes=\"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 25vw\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center text-gray-300\">\n                        <svg\n                          className=\"w-16 h-16\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                          aria-hidden=\"true\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={1}\n                            d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                          />\n                        </svg>\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"p-4\">\n                    <h3 className=\"font-semibold text-blue-900 mb-2 line-clamp-2 group-hover:text-blue-700 transition-colors\">\n                      {product.name}\n                    </h3>\n                    {product.price && (\n                      <p className=\"text-blue-600 font-bold\">{product.price}</p>\n                    )}\n                  </div>\n                </div>\n              </Link>\n            </div>\n          ))}\n        </div>\n\n        {/* Right Navigation Button */}\n        {canScrollRight && (\n          <button\n            onClick={() => scroll('right')}\n            className=\"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-white shadow-lg rounded-full p-2 hover:bg-gray-100 transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            aria-label=\"Scroll to next products\"\n            type=\"button\"\n          >\n            <svg\n              className=\"w-6 h-6 text-blue-900\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n              aria-hidden=\"true\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M9 5l7 7-7 7\"\n              />\n            </svg>\n          </button>\n        )}\n      </div>\n\n      {/* Pagination Dots */}\n      {totalPages > 1 && (\n        <div className=\"flex justify-center items-center gap-2 mt-6\">\n          {Array.from({ length: totalPages }).map((_, index) => (\n            <button\n              key={index}\n              onClick={() => scrollToIndex(index)}\n              className={`w-2.5 h-2.5 rounded-full transition-all duration-200 ${\n                index === currentIndex\n                  ? 'bg-blue-600 w-6'\n                  : 'bg-gray-300 hover:bg-gray-400'\n              }`}\n              aria-label={`Go to slide ${index + 1}`}\n              aria-current={index === currentIndex ? 'true' : undefined}\n              type=\"button\"\n            />\n          ))}\n        </div>\n      )}\n    </section>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}