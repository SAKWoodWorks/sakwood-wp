{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/services/searchService.ts"],"sourcesContent":["import { API_CONFIG } from '@/lib/config/constants';\n\ninterface SearchProduct {\n  id: string;\n  name: string;\n  slug: string;\n  price?: string;\n  regularPrice?: string;\n  description?: string;\n  image?: {\n    sourceUrl: string;\n    altText?: string;\n  };\n  shortDescription?: string;\n  type?: string;\n}\n\ninterface SearchResponse {\n  products: SearchProduct[];\n  total: number;\n}\n\n/**\n * Search products using WordPress GraphQL API\n */\nexport async function searchProducts(\n  query: string,\n  lang: string = 'th'\n): Promise<SearchResponse> {\n  if (!query || query.trim().length === 0) {\n    return { products: [], total: 0 };\n  }\n\n  try {\n    let searchTerm = query.trim();\n\n    // Remove spaces for Thai searches to improve matching\n    // Thai product names often don't need spaces between characters\n    if (lang === 'th') {\n      searchTerm = searchTerm.replace(/\\s+/g, '');\n    }\n\n    // GraphQL query to search products by name, description, or short description\n    const graphqlQuery = `\n      query SearchProducts($search: String!) {\n        products(where: { search: $search }) {\n          nodes {\n            id: databaseId\n            slug\n            name\n            type\n            description\n            shortDescription(format: RENDERED)\n            ... on SimpleProduct {\n              price\n              regularPrice\n            }\n            ... on VariableProduct {\n              price\n              regularPrice\n            }\n            image {\n              sourceUrl\n              altText\n            }\n          }\n        }\n      }\n    `;\n\n    const response = await fetch(API_CONFIG.endpoint, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        query: graphqlQuery,\n        variables: {\n          search: searchTerm,\n        },\n      }),\n      next: { revalidate: 30 }, // Cache for 30 seconds\n    });\n\n    if (!response.ok) {\n      console.error('[SearchService] Failed to fetch:', response.statusText);\n      return { products: [], total: 0 };\n    }\n\n    const data = await response.json();\n    const products = data.data?.products?.nodes || [];\n\n    // Transform data to match our Product type\n    const transformedProducts: SearchProduct[] = products.map((product: any) => ({\n      id: String(product.id),\n      name: product.name,\n      slug: product.slug,\n      price: product.price || undefined,\n      regularPrice: product.regularPrice || undefined,\n      description: product.description || undefined,\n      image: product.image || undefined,\n      shortDescription: product.shortDescription || undefined,\n      type: product.type || 'simple',\n    }));\n\n    return {\n      products: transformedProducts,\n      total: transformedProducts.length,\n    };\n  } catch (error) {\n    console.error('[SearchService] Error searching products:', error);\n    return { products: [], total: 0 };\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAyBO,eAAe,eACpB,KAAa,EACb,OAAe,IAAI;IAEnB,IAAI,CAAC,SAAS,MAAM,IAAI,GAAG,MAAM,KAAK,GAAG;QACvC,OAAO;YAAE,UAAU,EAAE;YAAE,OAAO;QAAE;IAClC;IAEA,IAAI;QACF,IAAI,aAAa,MAAM,IAAI;QAE3B,sDAAsD;QACtD,gEAAgE;QAChE,IAAI,SAAS,MAAM;YACjB,aAAa,WAAW,OAAO,CAAC,QAAQ;QAC1C;QAEA,8EAA8E;QAC9E,MAAM,eAAe,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;IAyBtB,CAAC;QAED,MAAM,WAAW,MAAM,MAAM,qKAAU,CAAC,QAAQ,EAAE;YAChD,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,OAAO;gBACP,WAAW;oBACT,QAAQ;gBACV;YACF;YACA,MAAM;gBAAE,YAAY;YAAG;QACzB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,oCAAoC,SAAS,UAAU;YACrE,OAAO;gBAAE,UAAU,EAAE;gBAAE,OAAO;YAAE;QAClC;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,MAAM,WAAW,KAAK,IAAI,EAAE,UAAU,SAAS,EAAE;QAEjD,2CAA2C;QAC3C,MAAM,sBAAuC,SAAS,GAAG,CAAC,CAAC,UAAiB,CAAC;gBAC3E,IAAI,OAAO,QAAQ,EAAE;gBACrB,MAAM,QAAQ,IAAI;gBAClB,MAAM,QAAQ,IAAI;gBAClB,OAAO,QAAQ,KAAK,IAAI;gBACxB,cAAc,QAAQ,YAAY,IAAI;gBACtC,aAAa,QAAQ,WAAW,IAAI;gBACpC,OAAO,QAAQ,KAAK,IAAI;gBACxB,kBAAkB,QAAQ,gBAAgB,IAAI;gBAC9C,MAAM,QAAQ,IAAI,IAAI;YACxB,CAAC;QAED,OAAO;YACL,UAAU;YACV,OAAO,oBAAoB,MAAM;QACnC;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6CAA6C;QAC3D,OAAO;YAAE,UAAU,EAAE;YAAE,OAAO;QAAE;IAClC;AACF"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/search/SearchResults.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SearchResults = registerClientReference(\n    function() { throw new Error(\"Attempted to call SearchResults() from the server but SearchResults is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/sakwood-wp/frontend/components/search/SearchResults.tsx <module evaluation>\",\n    \"SearchResults\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,qSAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,yFACA","ignoreList":[0]}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/search/SearchResults.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SearchResults = registerClientReference(\n    function() { throw new Error(\"Attempted to call SearchResults() from the server but SearchResults is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/sakwood-wp/frontend/components/search/SearchResults.tsx\",\n    \"SearchResults\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,gBAAgB,IAAA,qSAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,qEACA","ignoreList":[0]}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/app/%5Blang%5D/search/page.tsx"],"sourcesContent":["import { redirect } from 'next/navigation';\nimport { getDictionary } from '@/lib/get-dictionary';\nimport { searchProducts } from '@/lib/services/searchService';\nimport type { Metadata } from 'next';\nimport type { Locale } from '@/i18n-config';\nimport { SearchResults } from '@/components/search/SearchResults';\n\ninterface SearchPageProps {\n  params: Promise<{\n    lang: string;\n  }>;\n  searchParams: Promise<{\n    q?: string;\n  }>;\n}\n\nexport async function generateMetadata({ params }: SearchPageProps): Promise<Metadata> {\n  const { lang } = await params;\n  const isThai = lang === 'th';\n\n  return {\n    title: isThai ? 'ค้นหาสินค้า | Sakwood' : 'Search Products | Sakwood',\n    description: isThai\n      ? 'ค้นหาสินค้าไม้คุณภาพจาก Sakwood'\n      : 'Search for premium wood products from Sakwood',\n  };\n}\n\nexport default async function SearchPage({ params, searchParams }: SearchPageProps) {\n  const { lang } = await params;\n  const { q: searchQuery } = await searchParams;\n\n  // Redirect if no search query\n  if (!searchQuery) {\n    redirect(`/${lang}`);\n  }\n\n  const dictionary = await getDictionary(lang as Locale);\n\n  // Search for products\n  const searchResults = await searchProducts(searchQuery, lang);\n\n  return (\n    <SearchResults\n      lang={lang as Locale}\n      dictionary={dictionary}\n      searchQuery={searchQuery}\n      initialResults={searchResults}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AACA;AACA;AAGA;;;;;;AAWO,eAAe,iBAAiB,EAAE,MAAM,EAAmB;IAChE,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IACvB,MAAM,SAAS,SAAS;IAExB,OAAO;QACL,OAAO,SAAS,0BAA0B;QAC1C,aAAa,SACT,oCACA;IACN;AACF;AAEe,eAAe,WAAW,EAAE,MAAM,EAAE,YAAY,EAAmB;IAChF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IACvB,MAAM,EAAE,GAAG,WAAW,EAAE,GAAG,MAAM;IAEjC,8BAA8B;IAC9B,IAAI,CAAC,aAAa;QAChB,IAAA,8NAAQ,EAAC,CAAC,CAAC,EAAE,MAAM;IACrB;IAEA,MAAM,aAAa,MAAM,IAAA,sKAAa,EAAC;IAEvC,sBAAsB;IACtB,MAAM,gBAAgB,MAAM,IAAA,+KAAc,EAAC,aAAa;IAExD,qBACE,2QAAC,oLAAa;QACZ,MAAM;QACN,YAAY;QACZ,aAAa;QACb,gBAAgB;;;;;;AAGtB"}}]
}