{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/layout/Breadcrumbs.tsx"],"sourcesContent":["import Link from 'next/link';\r\nimport type { Locale } from '@/i18n-config';\r\n\r\nexport interface BreadcrumbItem {\r\n  name: string;\r\n  href: string;\r\n}\r\n\r\ninterface BreadcrumbsProps {\r\n  items: BreadcrumbItem[];\r\n  lang: Locale;\r\n}\r\n\r\nexport function Breadcrumbs({ items, lang }: BreadcrumbsProps) {\r\n  return (\r\n    <nav className=\"py-4 px-6 bg-slate-50 border-b border-slate-200\" aria-label=\"Breadcrumb navigation\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <ol className=\"flex items-center gap-2 text-sm text-slate-600\">\r\n          {items.map((item, index) => (\r\n            <li key={item.href} className=\"flex items-center gap-2\">\r\n              {index > 0 && (\r\n                <span className=\"text-slate-400\" aria-hidden=\"true\">/</span>\r\n              )}\r\n              {index === items.length - 1 ? (\r\n                <span className=\"font-medium text-slate-900\" aria-current=\"page\">\r\n                  {item.name}\r\n                </span>\r\n              ) : (\r\n                <Link \r\n                  href={item.href} \r\n                  className=\"hover:text-blue-600 transition-colors\"\r\n                >\r\n                  {item.name}\r\n                </Link>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ol>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAaO,SAAS,YAAY,EAAE,KAAK,EAAE,IAAI,EAAoB;IAC3D,qBACE,2QAAC;QAAI,WAAU;QAAkD,cAAW;kBAC1E,cAAA,2QAAC;YAAI,WAAU;sBACb,cAAA,2QAAC;gBAAG,WAAU;0BACX,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,2QAAC;wBAAmB,WAAU;;4BAC3B,QAAQ,mBACP,2QAAC;gCAAK,WAAU;gCAAiB,eAAY;0CAAO;;;;;;4BAErD,UAAU,MAAM,MAAM,GAAG,kBACxB,2QAAC;gCAAK,WAAU;gCAA6B,gBAAa;0CACvD,KAAK,IAAI;;;;;qDAGZ,2QAAC,uNAAI;gCACH,MAAM,KAAK,IAAI;gCACf,WAAU;0CAET,KAAK,IAAI;;;;;;;uBAbP,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;AAsB9B"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/products/ProductImageGallery.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProductImageGallery = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductImageGallery() from the server but ProductImageGallery is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/sakwood-wp/frontend/components/products/ProductImageGallery.tsx <module evaluation>\",\n    \"ProductImageGallery\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,sBAAsB,IAAA,qSAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,iGACA","ignoreList":[0]}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/products/ProductImageGallery.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProductImageGallery = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductImageGallery() from the server but ProductImageGallery is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/sakwood-wp/frontend/components/products/ProductImageGallery.tsx\",\n    \"ProductImageGallery\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,sBAAsB,IAAA,qSAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,6EACA","ignoreList":[0]}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/products/ProductInfo.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProductInfo = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductInfo() from the server but ProductInfo is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/sakwood-wp/frontend/components/products/ProductInfo.tsx <module evaluation>\",\n    \"ProductInfo\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,qSAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,yFACA","ignoreList":[0]}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/products/ProductInfo.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProductInfo = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductInfo() from the server but ProductInfo is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/sakwood-wp/frontend/components/products/ProductInfo.tsx\",\n    \"ProductInfo\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,qSAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,qEACA","ignoreList":[0]}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/products/ProductSpecifications.tsx"],"sourcesContent":["import { Product } from '@/lib/types';\r\n\r\ninterface ProductSpecificationsProps {\r\n  product: Product;\r\n  dictionary: {\r\n    product: {\r\n      specifications_title: string;\r\n      material_label: string;\r\n      dimensions_label: string;\r\n      weight_label: string;\r\n      grade_label: string;\r\n      origin_label: string;\r\n      wood_type: string;\r\n      standard_size: string;\r\n      standard_weight: string;\r\n      grade_a: string;\r\n      imported: string;\r\n    };\r\n  };\r\n}\r\n\r\nexport function ProductSpecifications({ product, dictionary }: ProductSpecificationsProps) {\r\n  const { product: dict } = dictionary;\r\n\r\n  // Build dimensions string if dimensions exist\r\n  const dimensions = [];\r\n  if (product.thickness) dimensions.push(`${product.thickness}cm`);\r\n  if (product.width) dimensions.push(`${product.width}cm`);\r\n  if (product.length) dimensions.push(`${product.length}m`);\r\n  const dimensionsText = dimensions.length > 0 ? dimensions.join(' × ') : dict.standard_size;\r\n\r\n  const specs = [\r\n    { label: dict.material_label, value: dict.wood_type },\r\n    { label: dict.dimensions_label, value: dimensionsText },\r\n    { label: dict.weight_label, value: dict.standard_weight },\r\n    { label: dict.grade_label, value: dict.grade_a },\r\n    { label: dict.origin_label, value: dict.imported },\r\n  ];\r\n\r\n  return (\r\n    <section className=\"mb-16\" aria-labelledby=\"product-specifications-heading\">\r\n      <h2\r\n        id=\"product-specifications-heading\"\r\n        className=\"text-2xl font-bold text-blue-900 mb-6 pb-2 border-b-2 border-blue-900\"\r\n      >\r\n        {dict.specifications_title}\r\n      </h2>\r\n\r\n      <div className=\"bg-gray-50 rounded-lg p-6\">\r\n        <div className=\"grid md:grid-cols-2 gap-6\">\r\n          {specs.map((spec, index) => (\r\n            <div\r\n              key={index}\r\n              className={`flex justify-between items-start ${index % 2 === 0 ? 'md:pr-6 md:border-r md:border-gray-200' : ''}`}\r\n            >\r\n              <span className=\"text-gray-500 font-medium\">{spec.label}:</span>\r\n              <span className=\"text-blue-900 font-semibold\">{spec.value}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAqBO,SAAS,sBAAsB,EAAE,OAAO,EAAE,UAAU,EAA8B;IACvF,MAAM,EAAE,SAAS,IAAI,EAAE,GAAG;IAE1B,8CAA8C;IAC9C,MAAM,aAAa,EAAE;IACrB,IAAI,QAAQ,SAAS,EAAE,WAAW,IAAI,CAAC,GAAG,QAAQ,SAAS,CAAC,EAAE,CAAC;IAC/D,IAAI,QAAQ,KAAK,EAAE,WAAW,IAAI,CAAC,GAAG,QAAQ,KAAK,CAAC,EAAE,CAAC;IACvD,IAAI,QAAQ,MAAM,EAAE,WAAW,IAAI,CAAC,GAAG,QAAQ,MAAM,CAAC,CAAC,CAAC;IACxD,MAAM,iBAAiB,WAAW,MAAM,GAAG,IAAI,WAAW,IAAI,CAAC,SAAS,KAAK,aAAa;IAE1F,MAAM,QAAQ;QACZ;YAAE,OAAO,KAAK,cAAc;YAAE,OAAO,KAAK,SAAS;QAAC;QACpD;YAAE,OAAO,KAAK,gBAAgB;YAAE,OAAO;QAAe;QACtD;YAAE,OAAO,KAAK,YAAY;YAAE,OAAO,KAAK,eAAe;QAAC;QACxD;YAAE,OAAO,KAAK,WAAW;YAAE,OAAO,KAAK,OAAO;QAAC;QAC/C;YAAE,OAAO,KAAK,YAAY;YAAE,OAAO,KAAK,QAAQ;QAAC;KAClD;IAED,qBACE,2QAAC;QAAQ,WAAU;QAAQ,mBAAgB;;0BACzC,2QAAC;gBACC,IAAG;gBACH,WAAU;0BAET,KAAK,oBAAoB;;;;;;0BAG5B,2QAAC;gBAAI,WAAU;0BACb,cAAA,2QAAC;oBAAI,WAAU;8BACZ,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,2QAAC;4BAEC,WAAW,CAAC,iCAAiC,EAAE,QAAQ,MAAM,IAAI,2CAA2C,IAAI;;8CAEhH,2QAAC;oCAAK,WAAU;;wCAA6B,KAAK,KAAK;wCAAC;;;;;;;8CACxD,2QAAC;oCAAK,WAAU;8CAA+B,KAAK,KAAK;;;;;;;2BAJpD;;;;;;;;;;;;;;;;;;;;;AAWnB"}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/products/RelatedProductsCarousel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RelatedProductsCarousel = registerClientReference(\n    function() { throw new Error(\"Attempted to call RelatedProductsCarousel() from the server but RelatedProductsCarousel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/sakwood-wp/frontend/components/products/RelatedProductsCarousel.tsx <module evaluation>\",\n    \"RelatedProductsCarousel\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,0BAA0B,IAAA,qSAAuB,EAC1D;IAAa,MAAM,IAAI,MAAM;AAA8P,GAC3R,qGACA","ignoreList":[0]}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/products/RelatedProductsCarousel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RelatedProductsCarousel = registerClientReference(\n    function() { throw new Error(\"Attempted to call RelatedProductsCarousel() from the server but RelatedProductsCarousel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/sakwood-wp/frontend/components/products/RelatedProductsCarousel.tsx\",\n    \"RelatedProductsCarousel\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,0BAA0B,IAAA,qSAAuB,EAC1D;IAAa,MAAM,IAAI,MAAM;AAA8P,GAC3R,iFACA","ignoreList":[0]}},
    {"offset": {"line": 307, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/products/ProductStructuredData.tsx"],"sourcesContent":["interface ProductStructuredDataProps {\n  product: any;\n  lang: string;\n  siteUrl?: string;\n}\n\nexport function ProductStructuredData({ product, lang, siteUrl = 'https://sakwood.com' }: ProductStructuredDataProps) {\n  if (!product) return null;\n\n  const productSchema = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"Product\",\n    \"name\": product.name,\n    \"description\": product.description || `Quality ${product.name} from Sakwood`,\n    \"image\": product.image?.sourceUrl || `${siteUrl}/og-image.jpg`,\n    \"url\": `${siteUrl}/${lang}/products/${product.slug}`,\n    \"sku\": product.databaseId?.toString() || product.id,\n    \"offers\": {\n      \"@type\": \"Offer\",\n      \"availability\": \"https://schema.org/InStock\",\n      \"priceCurrency\": \"THB\",\n      \"url\": `${siteUrl}/${lang}/products/${product.slug}`,\n      \"seller\": {\n        \"@type\": \"Organization\",\n        \"name\": \"Sakwood\",\n        \"url\": siteUrl\n      }\n    },\n    \"additionalProperty\": [\n      {\n        \"@type\": \"PropertyValue\",\n        \"name\": \"Category\",\n        \"value\": \"Wood Products\"\n      },\n      {\n        \"@type\": \"PropertyValue\",\n        \"name\": \"Material\",\n        \"value\": \"Pine Wood\"\n      }\n    ]\n  };\n\n  const breadcrumbSchema = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"BreadcrumbList\",\n    \"itemListElement\": [\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 1,\n        \"name\": \"Home\",\n        \"item\": `${siteUrl}/${lang}`\n      },\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 2,\n        \"name\": \"Products\",\n        \"item\": `${siteUrl}/${lang}/shop`\n      },\n      {\n        \"@type\": \"ListItem\",\n        \"position\": 3,\n        \"name\": product.name,\n        \"item\": `${siteUrl}/${lang}/products/${product.slug}`\n      }\n    ]\n  };\n\n  return (\n    <>\n      {/* NOTE: JSON.stringify is safe for structured data - it properly escapes content */}\n      <script\n        type=\"application/ld+json\"\n        dangerouslySetInnerHTML={{ __html: JSON.stringify(productSchema) }}\n      />\n      <script\n        type=\"application/ld+json\"\n        dangerouslySetInnerHTML={{ __html: JSON.stringify(breadcrumbSchema) }}\n      />\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAMO,SAAS,sBAAsB,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,qBAAqB,EAA8B;IAClH,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,gBAAgB;QACpB,YAAY;QACZ,SAAS;QACT,QAAQ,QAAQ,IAAI;QACpB,eAAe,QAAQ,WAAW,IAAI,CAAC,QAAQ,EAAE,QAAQ,IAAI,CAAC,aAAa,CAAC;QAC5E,SAAS,QAAQ,KAAK,EAAE,aAAa,GAAG,QAAQ,aAAa,CAAC;QAC9D,OAAO,GAAG,QAAQ,CAAC,EAAE,KAAK,UAAU,EAAE,QAAQ,IAAI,EAAE;QACpD,OAAO,QAAQ,UAAU,EAAE,cAAc,QAAQ,EAAE;QACnD,UAAU;YACR,SAAS;YACT,gBAAgB;YAChB,iBAAiB;YACjB,OAAO,GAAG,QAAQ,CAAC,EAAE,KAAK,UAAU,EAAE,QAAQ,IAAI,EAAE;YACpD,UAAU;gBACR,SAAS;gBACT,QAAQ;gBACR,OAAO;YACT;QACF;QACA,sBAAsB;YACpB;gBACE,SAAS;gBACT,QAAQ;gBACR,SAAS;YACX;YACA;gBACE,SAAS;gBACT,QAAQ;gBACR,SAAS;YACX;SACD;IACH;IAEA,MAAM,mBAAmB;QACvB,YAAY;QACZ,SAAS;QACT,mBAAmB;YACjB;gBACE,SAAS;gBACT,YAAY;gBACZ,QAAQ;gBACR,QAAQ,GAAG,QAAQ,CAAC,EAAE,MAAM;YAC9B;YACA;gBACE,SAAS;gBACT,YAAY;gBACZ,QAAQ;gBACR,QAAQ,GAAG,QAAQ,CAAC,EAAE,KAAK,KAAK,CAAC;YACnC;YACA;gBACE,SAAS;gBACT,YAAY;gBACZ,QAAQ,QAAQ,IAAI;gBACpB,QAAQ,GAAG,QAAQ,CAAC,EAAE,KAAK,UAAU,EAAE,QAAQ,IAAI,EAAE;YACvD;SACD;IACH;IAEA,qBACE;;0BAEE,2QAAC;gBACC,MAAK;gBACL,yBAAyB;oBAAE,QAAQ,KAAK,SAAS,CAAC;gBAAe;;;;;;0BAEnE,2QAAC;gBACC,MAAK;gBACL,yBAAyB;oBAAE,QAAQ,KAAK,SAAS,CAAC;gBAAkB;;;;;;;;AAI5E"}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/services/productService.ts"],"sourcesContent":["import { graphqlRequest } from '@/lib/graphql/client';\r\nimport { GET_PRODUCTS_QUERY, GET_PRODUCT_QUERY } from '@/lib/graphql/queries';\r\nimport { Product, ProductResponse, ProductImage } from '@/lib/types';\r\nimport { APP_CONFIG } from '@/lib/config/constants';\r\n\r\n/**\r\n * Transform internal Docker URLs to publicly accessible URLs\r\n * Replaces http://sak_wp:80/ with http://localhost:8006/\r\n */\r\nfunction transformImageUrl(url: string | undefined): string | undefined {\r\n  if (!url) return undefined;\r\n  return url.replace('http://sak_wp:80/', 'http://localhost:8006/');\r\n}\r\n\r\n/**\r\n * Transform product image URLs\r\n */\r\nfunction transformProductImage(image?: ProductImage): ProductImage | undefined {\r\n  if (!image) return undefined;\r\n  const transformedUrl = transformImageUrl(image.sourceUrl);\r\n  if (!transformedUrl) return undefined;\r\n  return {\r\n    ...image,\r\n    sourceUrl: transformedUrl,\r\n  };\r\n}\r\n\r\n/**\r\n * Get products via REST API with language filtering\r\n * Uses custom endpoint: /wp-json/sakwood/v1/products?language=th\r\n */\r\nexport async function getProducts(language: string = 'th'): Promise<Product[]> {\r\n  try {\r\n    const baseUrl = process.env.NEXT_PUBLIC_WORDPRESS_GRAPHQL_URL?.replace('/graphql', '') || 'http://localhost:8006';\r\n    const url = `${baseUrl}/wp-json/sakwood/v1/products?language=${language}&per_page=${APP_CONFIG.productsPerPage}`;\r\n\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      console.error('Failed to fetch products:', response.status);\r\n      // Fall back to GraphQL\r\n      return getProductsViaGraphQL(language);\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    // Handle empty array\r\n    if (!Array.isArray(data) || data.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Transform data to match Product interface\r\n    return data.map((product: any) => ({\r\n      id: String(product.id),\r\n      databaseId: product.databaseId,\r\n      name: product.name,\r\n      slug: product.slug,\r\n      sku: product.sku || undefined,\r\n      language: product.language || 'th',\r\n      price: product.price || product.prices?.piece || undefined,\r\n      regularPrice: product.regularPrice || undefined,\r\n      priceTypes: product.priceTypes || ['piece'],\r\n      prices: product.prices || {},\r\n      image: product.image ? { sourceUrl: product.image.sourceUrl } : undefined,\r\n      description: '',\r\n      galleryImages: undefined,\r\n      // Include dimensions\r\n      thickness: product.thickness || undefined,\r\n      width: product.width || undefined,\r\n      length: product.length || undefined,\r\n    }));\r\n  } catch (error) {\r\n    console.error('Error fetching products via REST API:', error);\r\n    // Fall back to GraphQL\r\n    return getProductsViaGraphQL(language);\r\n  }\r\n}\r\n\r\n/**\r\n * Fallback: Get products via GraphQL (no language filtering)\r\n */\r\nasync function getProductsViaGraphQL(language: string = 'th'): Promise<Product[]> {\r\n  const data = await graphqlRequest<any>(GET_PRODUCTS_QUERY, { first: 10 });\r\n  return data?.products?.nodes || [];\r\n}\r\n\r\n/**\r\n * Get single product by slug with language filtering\r\n * Uses custom REST API endpoint: /wp-json/sakwood/v1/products/{slug}?language=th\r\n */\r\nexport async function getProductBySlug(slug: string, language: string = 'th'): Promise<Product | null> {\r\n  try {\r\n    // The slug from Next.js is already decoded, but we need to URL-encode it for the API request\r\n    // This ensures Thai characters are properly encoded for the HTTP request\r\n    const encodedSlug = encodeURIComponent(slug);\r\n    const baseUrl = process.env.NEXT_PUBLIC_WORDPRESS_GRAPHQL_URL?.replace('/graphql', '') || 'http://localhost:8006';\r\n    const url = `${baseUrl}/wp-json/sakwood/v1/products/${encodedSlug}?language=${language}`;\r\n\r\n    const response = await fetch(url);\r\n\r\n    if (!response.ok) {\r\n      // If 404, product not found in this language\r\n      if (response.status === 404) {\r\n        return null;\r\n      }\r\n      console.error('Failed to fetch product:', response.status);\r\n      // Fall back to GraphQL\r\n      return getProductBySlugViaGraphQL(slug);\r\n    }\r\n\r\n    const product = await response.json();\r\n\r\n    if (!product || (product as any).code === 'product_not_found') {\r\n      return null;\r\n    }\r\n\r\n    // Transform data to match Product interface\r\n    return {\r\n      id: String(product.id),\r\n      databaseId: product.databaseId,\r\n      name: product.name,\r\n      slug: product.slug,\r\n      sku: product.sku || undefined,\r\n      language: product.language || 'th',\r\n      price: product.price || product.prices?.piece || undefined,\r\n      regularPrice: product.regularPrice || undefined,\r\n      priceTypes: product.priceTypes || ['piece'],\r\n      prices: product.prices || {},\r\n      image: product.image ? { sourceUrl: product.image.sourceUrl } : undefined,\r\n      description: product.description || '',\r\n      galleryImages: product.galleryImages ? {\r\n        nodes: product.galleryImages.nodes || []\r\n      } : undefined,\r\n      thickness: product.thickness || undefined,\r\n      width: product.width || undefined,\r\n      length: product.length || undefined,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error fetching product via REST API:', error);\r\n    // Fall back to GraphQL\r\n    return getProductBySlugViaGraphQL(slug);\r\n  }\r\n}\r\n\r\n/**\r\n * Fallback: Get product by slug via GraphQL (no language filtering)\r\n */\r\nasync function getProductBySlugViaGraphQL(slug: string): Promise<Product | null> {\r\n  const data = await graphqlRequest<ProductResponse>(GET_PRODUCT_QUERY, {\r\n    slug,\r\n  });\r\n  const product = data?.product;\r\n\r\n  if (!product) return null;\r\n\r\n  // Transform image URLs\r\n  return {\r\n    ...product,\r\n    image: transformProductImage(product.image),\r\n    galleryImages: product.galleryImages\r\n      ? {\r\n          nodes: product.galleryImages.nodes\r\n            .map(transformProductImage)\r\n            .filter((img): img is ProductImage => img !== undefined),\r\n        }\r\n      : undefined,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/app/%5Blang%5D/products/%5Bslug%5D/page.tsx"],"sourcesContent":["import { notFound, redirect } from 'next/navigation';\r\nimport type { Metadata } from 'next';\r\nimport { Breadcrumbs } from '@/components/layout/Breadcrumbs';\r\nimport { ProductImageGallery } from '@/components/products/ProductImageGallery';\r\nimport { ProductInfo } from '@/components/products/ProductInfo';\r\nimport { ProductSpecifications } from '@/components/products/ProductSpecifications';\r\nimport { RelatedProductsCarousel } from '@/components/products/RelatedProductsCarousel';\r\nimport { PromotionalPopup } from '@/components/ui/PromotionalPopup';\r\nimport { ProductStructuredData } from '@/components/products/ProductStructuredData';\r\nimport { getProductBySlug, getProducts } from '@/lib/services/productService';\r\nimport { getDictionary } from '@/lib/get-dictionary';\r\nimport type { Locale } from '@/i18n-config';\r\n\r\ninterface PageProps {\r\n  params: Promise<{\r\n    lang: string;\r\n    slug: string;\r\n  }>;\r\n}\r\n\r\nexport async function generateMetadata({ params }: PageProps): Promise<Metadata> {\r\n  const { lang, slug } = await params;\r\n  const productData = await getProductBySlug(slug, lang);\r\n  const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || \"https://sakwood.com\";\r\n  const isThai = lang === 'th';\r\n\r\n  if (!productData) {\r\n    return {\r\n      title: 'Product Not Found',\r\n    };\r\n  }\r\n\r\n  const productTitle = productData.name || 'Wood Product';\r\n  const description = productData.description?.substring(0, 160) || `Quality ${productTitle} from Sakwood - Thailand's trusted wood supplier`;\r\n  const imageUrl = productData.image?.sourceUrl || `${siteUrl}/og-image.jpg`;\r\n\r\n  return {\r\n    title: productTitle,\r\n    description,\r\n    keywords: [\r\n      productTitle,\r\n      isThai ? 'ไม้' : 'wood',\r\n      isThai ? 'ไม้สน' : 'pine wood',\r\n      isThai ? 'เพลย์วูด' : 'plywood',\r\n      isThai ? 'ไม้ก่อสร้าง' : 'construction timber',\r\n      'Sakwood',\r\n      isThai ? 'ขายส่งไม้' : 'wholesale wood',\r\n    ],\r\n    openGraph: {\r\n      title: productTitle,\r\n      description,\r\n      url: `${siteUrl}/${lang}/products/${slug}`,\r\n      siteName: 'Sakwood',\r\n      images: [\r\n        {\r\n          url: imageUrl,\r\n          width: 1200,\r\n          height: 630,\r\n          alt: productTitle,\r\n        }\r\n      ],\r\n    },\r\n    twitter: {\r\n      card: 'summary_large_image',\r\n      title: productTitle,\r\n      description,\r\n      images: [imageUrl],\r\n    },\r\n    alternates: {\r\n      canonical: `/${lang}/products/${slug}`,\r\n    },\r\n  };\r\n}\r\n\r\nexport default async function ProductPage({ params }: PageProps) {\r\n  const { lang, slug } = await params;\r\n  const dictionary = await getDictionary(lang as Locale);\r\n  const { common, product, popup } = dictionary;\r\n  const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || \"https://sakwood.com\";\r\n\r\n  const productData = await getProductBySlug(slug, lang);\r\n  const relatedProducts = await getProducts(lang);\r\n\r\n  if (!productData) {\r\n    return notFound();\r\n  }\r\n\r\n  const breadcrumbItems = [\r\n    { name: common.home, href: `/${lang}` },\r\n    { name: common.products, href: `/${lang}/shop` },\r\n    { name: productData.name, href: `/${lang}/products/${slug}` }\r\n  ];\r\n\r\n  return (\r\n    <main className=\"min-h-screen\">\r\n      <ProductStructuredData product={productData} lang={lang} siteUrl={siteUrl} />\r\n      <Breadcrumbs items={breadcrumbItems} lang={lang as Locale} />\r\n\r\n      {/* Page Header */}\r\n      <div className=\"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8\">\r\n        <div className=\"max-w-7xl mx-auto px-6\">\r\n          <h1 className=\"text-3xl md:text-4xl font-bold\">\r\n            {productData.name || productData.slug}\r\n          </h1>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-6 py-12\">\r\n        <div className=\"grid lg:grid-cols-2 gap-12 mb-16\">\r\n          {/* Left: Image Gallery */}\r\n          <ProductImageGallery product={productData} />\r\n\r\n          {/* Right: Product Info */}\r\n          <ProductInfo\r\n            product={productData}\r\n            lang={lang as Locale}\r\n            dictionary={dictionary}\r\n          />\r\n        </div>\r\n\r\n        {/* Specifications */}\r\n        <ProductSpecifications\r\n          product={productData}\r\n          dictionary={dictionary}\r\n        />\r\n\r\n        {/* Related Products */}\r\n        <RelatedProductsCarousel\r\n          products={relatedProducts.filter(p => p.id !== productData.id).slice(0, 8)}\r\n          lang={lang as Locale}\r\n          dictionary={dictionary}\r\n        />\r\n      </div>\r\n\r\n      {/* Promotional Popup */}\r\n      <PromotionalPopup />\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}