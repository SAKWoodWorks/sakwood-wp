{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/layout/Breadcrumbs.tsx"],"sourcesContent":["import Link from 'next/link';\r\nimport type { Locale } from '@/i18n-config';\r\n\r\nexport interface BreadcrumbItem {\r\n  name: string;\r\n  href: string;\r\n}\r\n\r\ninterface BreadcrumbsProps {\r\n  items: BreadcrumbItem[];\r\n  lang: Locale;\r\n}\r\n\r\nexport function Breadcrumbs({ items, lang }: BreadcrumbsProps) {\r\n  return (\r\n    <nav className=\"py-4 px-6 bg-slate-50 border-b border-slate-200\" aria-label=\"Breadcrumb navigation\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <ol className=\"flex items-center gap-2 text-sm text-slate-600\">\r\n          {items.map((item, index) => (\r\n            <li key={item.href} className=\"flex items-center gap-2\">\r\n              {index > 0 && (\r\n                <span className=\"text-slate-400\" aria-hidden=\"true\">/</span>\r\n              )}\r\n              {index === items.length - 1 ? (\r\n                <span className=\"font-medium text-slate-900\" aria-current=\"page\">\r\n                  {item.name}\r\n                </span>\r\n              ) : (\r\n                <Link \r\n                  href={item.href} \r\n                  className=\"hover:text-blue-600 transition-colors\"\r\n                >\r\n                  {item.name}\r\n                </Link>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ol>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAaO,SAAS,YAAY,EAAE,KAAK,EAAE,IAAI,EAAoB;IAC3D,qBACE,0NAAC;QAAI,WAAU;QAAkD,cAAW;kBAC1E,cAAA,0NAAC;YAAI,WAAU;sBACb,cAAA,0NAAC;gBAAG,WAAU;0BACX,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,0NAAC;wBAAmB,WAAU;;4BAC3B,QAAQ,mBACP,0NAAC;gCAAK,WAAU;gCAAiB,eAAY;0CAAO;;;;;;4BAErD,UAAU,MAAM,MAAM,GAAG,kBACxB,0NAAC;gCAAK,WAAU;gCAA6B,gBAAa;0CACvD,KAAK,IAAI;;;;;qDAGZ,0NAAC,uMAAI;gCACH,MAAM,KAAK,IAAI;gCACf,WAAU;0CAET,KAAK,IAAI;;;;;;;uBAbP,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;AAsB9B;KA5BgB"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/services/promptpayService.ts"],"sourcesContent":["/**\r\n * PromptPay QR Code Generator Service\r\n * Follows EMVCo standard for Thai PromptPay QR codes\r\n */\r\n\r\nexport interface PromptPayOptions {\r\n  /** Merchant ID (phone number or tax ID) */\r\n  merchantId: string;\r\n  /** Transaction amount in Baht */\r\n  amount: number;\r\n  /** Whether this is a static QR (no amount) or dynamic QR (with amount) */\r\n  isStatic?: boolean;\r\n}\r\n\r\n/**\r\n * Generate EMVCo TLV (Tag-Length-Value) data\r\n */\r\nfunction generateTLV(tag: string, value: string): string {\r\n  const length = value.length.toString().padStart(2, '0');\r\n  return tag + length + value;\r\n}\r\n\r\n/**\r\n * Calculate CRC-16/CCITT-FALSE checksum\r\n */\r\nfunction calculateCRC16(data: string): string {\r\n  let crc = 0xFFFF;\r\n  \r\n  for (let i = 0; i < data.length; i++) {\r\n    const byte = data.charCodeAt(i);\r\n    crc ^= byte << 8;\r\n    \r\n    for (let j = 0; j < 8; j++) {\r\n      if (crc & 0x8000) {\r\n        crc = (crc << 1) ^ 0x1021;\r\n      } else {\r\n        crc = crc << 1;\r\n      }\r\n      crc &= 0xFFFF;\r\n    }\r\n  }\r\n  \r\n  return crc.toString(16).toUpperCase().padStart(4, '0');\r\n}\r\n\r\n/**\r\n * Generate PromptPay QR code payload following EMVCo standard\r\n */\r\nexport function generatePromptPayPayload(options: PromptPayOptions): string {\r\n  const { merchantId, amount, isStatic = false } = options;\r\n\r\n  // Clean merchant ID (remove dashes, spaces, etc.)\r\n  const cleanMerchantId = merchantId.replace(/[-\\s]/g, '');\r\n\r\n  // 00: Payload Format Indicator (always 01 for EMVCo)\r\n  const payloadFormat = generateTLV('00', '01');\r\n\r\n  // 01: Point of Initiation Method\r\n  // 11 = Static (no amount), 12 = Dynamic (with amount)\r\n  const pointOfInitiation = generateTLV('01', isStatic ? '11' : '12');\r\n\r\n  // 29-51: Merchant Account Information\r\n  // For PromptPay, we use ID 29 with sub-IDs:\r\n  // - 00: Globally Unique Identifier (PromptPay ID: \"A000000677010111\")\r\n  // - 01: Merchant Account Number (phone or tax ID)\r\n  const guid = 'A000000677010111'; // PromptPay GUID\r\n  const merchantAccountInfo = generateTLV(\r\n    '29',\r\n    generateTLV('00', guid) + generateTLV('01', cleanMerchantId)\r\n  );\r\n\r\n  // 52: Merchant Category Code (optional, defaults to 0000)\r\n  // 53: Transaction Currency (764 = Thai Baht)\r\n  const currencyCode = generateTLV('53', '764');\r\n\r\n  // 54: Transaction Amount (only for dynamic QR)\r\n  const transactionAmount = isStatic ? '' : generateTLV('54', amount.toFixed(2));\r\n\r\n  // 58: Country Code (TH = Thailand)\r\n  const countryCode = generateTLV('58', 'TH');\r\n\r\n  // 59: Merchant Name (optional)\r\n  // 60: Merchant City (optional)\r\n  // 61: Postal Code (optional)\r\n\r\n  // 62: Additional Data Field Template\r\n  // For PromptPay, we use sub-ID 05 for Bill Number (optional)\r\n  const additionalData = generateTLV('62', '');\r\n\r\n  // Build the payload without CRC first\r\n  let payloadWithoutCRC = payloadFormat + pointOfInitiation + merchantAccountInfo + currencyCode;\r\n\r\n  if (!isStatic) {\r\n    payloadWithoutCRC += transactionAmount;\r\n  }\r\n\r\n  payloadWithoutCRC += countryCode + additionalData;\r\n\r\n  // 63: CRC (Checksum)\r\n  const crc = calculateCRC16(payloadWithoutCRC + '6304');\r\n  const crcTLV = generateTLV('63', crc);\r\n\r\n  // Final payload\r\n  return payloadWithoutCRC + crcTLV;\r\n}\r\n\r\n/**\r\n * Validate PromptPay merchant ID\r\n * - Phone number: 10 digits starting with 0\r\n * - Tax ID: 13 digits\r\n */\r\nexport function validatePromptPayId(merchantId: string): { valid: boolean; type?: 'phone' | 'taxId'; error?: string } {\r\n  const cleanId = merchantId.replace(/[-\\s]/g, '');\r\n\r\n  // Check for phone number (10 digits, starts with 0)\r\n  if (/^0\\d{9}$/.test(cleanId)) {\r\n    return { valid: true, type: 'phone' };\r\n  }\r\n\r\n  // Check for tax ID (13 digits)\r\n  if (/^\\d{13}$/.test(cleanId)) {\r\n    return { valid: true, type: 'taxId' };\r\n  }\r\n\r\n  return {\r\n    valid: false,\r\n    error: 'Invalid PromptPay ID. Must be a 10-digit phone number (e.g., 0812345678) or 13-digit tax ID.',\r\n  };\r\n}\r\n\r\n/**\r\n * Format phone number for display\r\n */\r\nexport function formatPhoneNumber(phone: string): string {\r\n  const cleaned = phone.replace(/[-\\s]/g, '');\r\n  if (cleaned.length === 10) {\r\n    return `${cleaned.slice(0, 3)}-${cleaned.slice(3, 6)}-${cleaned.slice(6)}`;\r\n  }\r\n  return phone;\r\n}\r\n\r\n/**\r\n * Format tax ID for display\r\n */\r\nexport function formatTaxId(taxId: string): string {\r\n  const cleaned = taxId.replace(/[-\\s]/g, '');\r\n  if (cleaned.length === 13) {\r\n    return `${cleaned.slice(0, 1)} ${cleaned.slice(1, 5)} ${cleaned.slice(5, 9)} ${cleaned.slice(9, 12)} ${cleaned.slice(12)}`;\r\n  }\r\n  return taxId;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/checkout/PromptPayQR.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport QRCode from 'qrcode';\r\nimport { Download, Copy, Check, AlertCircle } from 'lucide-react';\r\nimport { generatePromptPayPayload, formatPhoneNumber, formatTaxId, validatePromptPayId } from '@/lib/services/promptpayService';\r\n\r\ninterface PromptPayQRProps {\r\n  /** Merchant ID (phone number or tax ID) */\r\n  merchantId: string;\r\n  /** Transaction amount in Baht */\r\n  amount: number;\r\n  /** QR code size in pixels */\r\n  size?: number;\r\n  /** Whether to show merchant info */\r\n  showMerchantInfo?: boolean;\r\n  /** Additional CSS classes */\r\n  className?: string;\r\n  /** Order reference for tracking */\r\n  orderRef?: string;\r\n}\r\n\r\nexport function PromptPayQR({\r\n  merchantId,\r\n  amount,\r\n  size = 280,\r\n  showMerchantInfo = true,\r\n  className = '',\r\n  orderRef = '',\r\n}: PromptPayQRProps) {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const [qrDataUrl, setQrDataUrl] = useState<string>('');\r\n  const [error, setError] = useState<string>('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const generateQR = async () => {\r\n      setLoading(true);\r\n      try {\r\n        // Validate merchant ID\r\n        const validation = validatePromptPayId(merchantId);\r\n        if (!validation.valid) {\r\n          setError(validation.error || 'Invalid PromptPay ID');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        // Generate PromptPay payload\r\n        const payload = generatePromptPayPayload({\r\n          merchantId,\r\n          amount,\r\n          isStatic: false,\r\n        });\r\n\r\n        // Create a canvas for QR code with logo\r\n        const canvas = document.createElement('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) {\r\n          throw new Error('Could not get canvas context');\r\n        }\r\n\r\n        const qrSize = size;\r\n        const logoSize = qrSize * 0.2; // Logo is 20% of QR size\r\n        const logoPadding = qrSize * 0.02;\r\n\r\n        canvas.width = qrSize;\r\n        canvas.height = qrSize;\r\n\r\n        // Generate QR code to data URL first\r\n        const qrDataUrl = await QRCode.toDataURL(payload, {\r\n          width: qrSize,\r\n          margin: 0,\r\n          color: {\r\n            dark: '#000000',\r\n            light: '#ffffff',\r\n          },\r\n          errorCorrectionLevel: 'H', // High error correction for logo overlay\r\n        });\r\n\r\n        // Draw QR code on canvas\r\n        const qrImage = new Image();\r\n        qrImage.onload = () => {\r\n          // Draw QR code\r\n          ctx.drawImage(qrImage, 0, 0, qrSize, qrSize);\r\n\r\n          // Draw white background for logo\r\n          const logoX = (qrSize - logoSize) / 2;\r\n          const logoY = (qrSize - logoSize) / 2;\r\n\r\n          ctx.fillStyle = '#ffffff';\r\n          ctx.fillRect(\r\n            logoX - logoPadding,\r\n            logoY - logoPadding,\r\n            logoSize + logoPadding * 2,\r\n            logoSize + logoPadding * 2\r\n          );\r\n\r\n          // Draw PromptPay logo (red and white shield)\r\n          drawPromptPayLogo(ctx, logoX, logoY, logoSize);\r\n\r\n          // Convert to data URL\r\n          const finalDataUrl = canvas.toDataURL('image/png');\r\n          setQrDataUrl(finalDataUrl);\r\n          setLoading(false);\r\n          setError('');\r\n        };\r\n        qrImage.onerror = () => {\r\n          setError('Failed to generate QR code');\r\n          setLoading(false);\r\n        };\r\n        qrImage.src = qrDataUrl;\r\n      } catch (err) {\r\n        console.error('Error generating PromptPay QR code:', err);\r\n        setError('Failed to generate QR code');\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    generateQR();\r\n  }, [merchantId, amount, size]);\r\n\r\n  // Draw PromptPay logo on canvas\r\n  const drawPromptPayLogo = (ctx: CanvasRenderingContext2D, x: number, y: number, size: number) => {\r\n    const center = size / 2;\r\n\r\n    // Save context state\r\n    ctx.save();\r\n\r\n    // Draw shield shape (background)\r\n    ctx.fillStyle = '#A31F34'; // PromptPay red\r\n    ctx.beginPath();\r\n    ctx.moveTo(x + size * 0.1, y + size * 0.05);\r\n    ctx.lineTo(x + size * 0.9, y + size * 0.05);\r\n    ctx.lineTo(x + size * 0.9, y + size * 0.55);\r\n    ctx.quadraticCurveTo(x + size * 0.9, y + size * 0.75, x + center, y + size * 0.95);\r\n    ctx.quadraticCurveTo(x + size * 0.1, y + size * 0.75, x + size * 0.1, y + size * 0.55);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n\r\n    // Draw \"PP\" text\r\n    ctx.fillStyle = '#ffffff';\r\n    ctx.font = `bold ${size * 0.35}px Arial`;\r\n    ctx.textAlign = 'center';\r\n    ctx.textBaseline = 'middle';\r\n    ctx.fillText('PP', x + center, y + size * 0.4);\r\n\r\n    // Draw \"PromptPay\" text smaller\r\n    ctx.font = `${size * 0.1}px Arial`;\r\n    ctx.fillText('PromptPay', x + center, y + size * 0.7);\r\n\r\n    // Restore context state\r\n    ctx.restore();\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    if (!qrDataUrl) return;\r\n\r\n    const link = document.createElement('a');\r\n    link.href = qrDataUrl;\r\n    link.download = `promptpay-qr-${orderRef || Date.now()}.png`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const handleCopyMerchantId = async () => {\r\n    const cleanId = merchantId.replace(/[-\\s]/g, '');\r\n    try {\r\n      await navigator.clipboard.writeText(cleanId);\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n    } catch (err) {\r\n      console.error('Failed to copy:', err);\r\n    }\r\n  };\r\n\r\n  const validation = validatePromptPayId(merchantId);\r\n  const formattedId = validation.type === 'phone'\r\n    ? formatPhoneNumber(merchantId)\r\n    : validation.type === 'taxId'\r\n    ? formatTaxId(merchantId)\r\n    : merchantId;\r\n\r\n  return (\r\n    <div className={`flex flex-col items-center ${className}`}>\r\n      {error ? (\r\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg w-full\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <AlertCircle className=\"w-5 h-5\" />\r\n            <div>\r\n              <p className=\"font-medium\">Error</p>\r\n              <p className=\"text-sm\">{error}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : loading ? (\r\n        <div className=\"bg-white p-8 rounded-lg shadow-md border border-gray-200 w-full flex justify-center items-center\" style={{ height: size + 32 }}>\r\n          <div className=\"animate-pulse flex flex-col items-center gap-3\">\r\n            <div className=\"w-16 h-16 bg-gray-200 rounded\"></div>\r\n            <div className=\"h-4 bg-gray-200 rounded w-32\"></div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* QR Code */}\r\n          <div className=\"bg-white p-4 rounded-lg shadow-md border-2 border-blue-900 relative\">\r\n            <img\r\n              src={qrDataUrl}\r\n              alt=\"PromptPay QR Code\"\r\n              className=\"block\"\r\n              style={{ width: size, height: size }}\r\n            />\r\n\r\n            {/* PromptPay Badge */}\r\n            <div className=\"absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-red-600 to-red-700 text-white px-4 py-1 rounded-full shadow-lg flex items-center gap-1\">\r\n              <span className=\"text-xs font-bold\">PromptPay</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex gap-2 mt-6 w-full max-w-xs\">\r\n            <button\r\n              onClick={handleDownload}\r\n              className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-all shadow-md hover:shadow-lg\"\r\n            >\r\n              <Download className=\"w-4 h-4\" />\r\n              <span className=\"text-sm font-semibold\">Save</span>\r\n            </button>\r\n            <button\r\n              onClick={handleCopyMerchantId}\r\n              className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-white border-2 border-blue-900 text-blue-900 rounded-lg hover:bg-blue-50 transition-all shadow-md hover:shadow-lg\"\r\n            >\r\n              {copied ? (\r\n                <>\r\n                  <Check className=\"w-4 h-4 text-green-600\" />\r\n                  <span className=\"text-sm font-semibold\">Copied!</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Copy className=\"w-4 h-4\" />\r\n                  <span className=\"text-sm font-semibold\">Copy ID</span>\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Merchant Info */}\r\n          {showMerchantInfo && validation.valid && (\r\n            <div className=\"mt-6 w-full max-w-xs space-y-3\">\r\n              <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200\">\r\n                <p className=\"text-xs text-blue-700 font-semibold uppercase tracking-wide mb-1\">\r\n                  {validation.type === 'phone' ? 'PromptPay Phone Number' : 'PromptPay Tax ID'}\r\n                </p>\r\n                <p className=\"text-lg font-bold text-blue-900\">{formattedId}</p>\r\n              </div>\r\n\r\n              <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200\">\r\n                <p className=\"text-xs text-green-700 font-semibold uppercase tracking-wide mb-1\">\r\n                  Total Amount\r\n                </p>\r\n                <p className=\"text-3xl font-bold text-green-700\">\r\n                  à¸¿{amount.toLocaleString('th-TH', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                </p>\r\n              </div>\r\n\r\n              {orderRef && (\r\n                <div className=\"bg-gray-50 p-3 rounded-lg border border-gray-200 text-center\">\r\n                  <p className=\"text-xs text-gray-500 mb-1\">Order Reference</p>\r\n                  <p className=\"text-sm font-mono font-semibold text-gray-700\">{orderRef}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 662, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/services/orderStatusService.ts"],"sourcesContent":["/**\n * Order Status Service for checking payment verification\n *\n * SECURITY: Now uses internal API route (/api/orders/[id]) to hide\n * WooCommerce credentials from client-side code. Credentials are only\n * used server-side in the API route.\n */\n\n// Use internal API route instead of direct WooCommerce API\nconst INTERNAL_API_URL = process.env.NEXT_PUBLIC_APP_URL || ''\n  + '/api/orders';\n\nexport interface OrderStatus {\n  id: number;\n  status: 'pending' | 'processing' | 'completed' | 'cancelled' | 'refunded' | 'failed';\n  date_created: string;\n  payment_method: string;\n  payment_method_title: string;\n  total: string;\n  transaction_id?: string;\n}\n\nexport interface OrderCheckResult {\n  paid: boolean;\n  status: string;\n  message: string;\n}\n\n/**\n * Get order status from internal API route\n *\n * SECURITY: Calls internal API route which has server-side credentials\n * instead of exposing WooCommerce keys in client code.\n */\nexport async function getOrderStatus(orderId: number): Promise<OrderStatus> {\n  const baseUrl = INTERNAL_API_URL.startsWith('http')\n    ? INTERNAL_API_URL\n    : `${window.location.origin}${INTERNAL_API_URL}`;\n\n  const response = await fetch(`${baseUrl}/${orderId}`, {\n    next: { revalidate: 10 }, // Cache for 10 seconds\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to fetch order status: ${response.statusText}`);\n  }\n\n  return await response.json();\n}\n\n/**\n * Check if order is paid\n * An order is considered paid when status is 'processing' or 'completed'\n */\nexport function isOrderPaid(status: string): boolean {\n  return status === 'processing' || status === 'completed';\n}\n\n/**\n * Get payment status message based on order status\n */\nexport function getPaymentStatusMessage(status: string): { paid: boolean; status: string; message: string } {\n  const statusMessages: Record<string, { paid: boolean; status: string; message: string }> = {\n    pending: {\n      paid: false,\n      status: 'pending',\n      message: 'Waiting for payment confirmation. We will notify you when payment is received.',\n    },\n    processing: {\n      paid: true,\n      status: 'processing',\n      message: 'Payment received! Your order is being processed.',\n    },\n    completed: {\n      paid: true,\n      status: 'completed',\n      message: 'Payment confirmed and order completed!',\n    },\n    cancelled: {\n      paid: false,\n      status: 'cancelled',\n      message: 'This order has been cancelled.',\n    },\n    failed: {\n      paid: false,\n      status: 'failed',\n      message: 'Payment failed. Please contact support.',\n    },\n    refunded: {\n      paid: false,\n      status: 'refunded',\n      message: 'Payment has been refunded.',\n    },\n    on_hold: {\n      paid: false,\n      status: 'on_hold',\n      message: 'Order is on hold.',\n    },\n  };\n\n  return statusMessages[status] || {\n    paid: false,\n    status: 'unknown',\n    message: 'Unable to determine payment status.',\n  };\n}\n\n/**\n * Poll order status with automatic retry\n * @param orderId - Order ID to check\n * @param maxAttempts - Maximum number of polling attempts (default: 60 = 5 minutes)\n * @param interval - Polling interval in milliseconds (default: 5000ms = 5 seconds)\n * @param onStatusChange - Callback when status changes\n * @param abortSignal - Optional AbortSignal to cancel polling\n */\nexport async function pollOrderStatus(\n  orderId: number,\n  maxAttempts: number = 60,\n  interval: number = 5000,\n  onStatusChange?: (result: OrderCheckResult) => void,\n  abortSignal?: AbortSignal\n): Promise<OrderCheckResult> {\n  let attempts = 0;\n\n  while (attempts < maxAttempts) {\n    // Check if aborted\n    if (abortSignal?.aborted) {\n      throw new Error('Polling aborted');\n    }\n\n    try {\n      const order = await getOrderStatus(orderId);\n      const result = getPaymentStatusMessage(order.status);\n\n      // Call callback with current status\n      if (onStatusChange) {\n        onStatusChange(result);\n      }\n\n      // If order is paid or in a final state, return immediately\n      if (result.paid || ['completed', 'cancelled', 'failed', 'refunded'].includes(order.status)) {\n        return result;\n      }\n\n      attempts++;\n\n      // Wait before next attempt with abort check\n      if (attempts < maxAttempts) {\n        await new Promise((resolve, reject) => {\n          const timeout = setTimeout(resolve, interval);\n\n          abortSignal?.addEventListener('abort', () => {\n            clearTimeout(timeout);\n            reject(new Error('Polling aborted'));\n          });\n        });\n      }\n    } catch (error) {\n      if (abortSignal?.aborted || error instanceof Error && error.message === 'Polling aborted') {\n        throw new Error('Polling aborted');\n      }\n\n      console.error(`Error polling order status (attempt ${attempts + 1}):`, error);\n      attempts++;\n\n      // Continue polling even if there's an error\n      if (attempts < maxAttempts) {\n        await new Promise((resolve, reject) => {\n          const timeout = setTimeout(resolve, interval);\n\n          abortSignal?.addEventListener('abort', () => {\n            clearTimeout(timeout);\n            reject(new Error('Polling aborted'));\n          });\n        });\n      }\n    }\n  }\n\n  // Max attempts reached\n  return {\n    paid: false,\n    status: 'timeout',\n    message: 'Payment verification timed out. Please check your email for confirmation or contact support.',\n  };\n}\n\n/**\n * Webhook handler type for server-side webhook processing\n */\nexport interface PaymentWebhookPayload {\n  id: number;\n  status: string;\n  payment_method: string;\n  total: string;\n}\n\n/**\n * Verify webhook signature (optional, for security)\n */\nexport function verifyWebhookSignature(payload: string, signature: string, secret: string): boolean {\n  const hmac = require('crypto')\n    .createHmac('sha256', secret)\n    .update(payload)\n    .digest('base64');\n\n  return hmac === signature;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 812, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/checkout/PaymentVerification.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { CheckCircle2, Clock, XCircle, Loader2, RefreshCw } from 'lucide-react';\nimport { pollOrderStatus, getPaymentStatusMessage } from '@/lib/services/orderStatusService';\n\ninterface PaymentVerificationProps {\n  orderId: number;\n  onComplete?: (paid: boolean) => void;\n  className?: string;\n}\n\nexport function PaymentVerification({\n  orderId,\n  onComplete,\n  className = '',\n}: PaymentVerificationProps) {\n  const [status, setStatus] = useState<'checking' | 'paid' | 'pending' | 'failed' | 'timeout'>('checking');\n  const [message, setMessage] = useState('Checking payment status...');\n  const [attempts, setAttempts] = useState(0);\n  const [maxAttempts, setMaxAttempts] = useState(60);\n  const [isPolling, setIsPolling] = useState(true);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    const checkPayment = async () => {\n      try {\n        const result = await pollOrderStatus(\n          orderId,\n          60, // 5 minutes max (60 attempts * 5 seconds)\n          5000, // Check every 5 seconds\n          (update) => {\n            if (!abortController.signal.aborted) {\n              setMessage(update.message);\n              setAttempts((prev) => prev + 1);\n\n              // Update status based on payment status\n              if (update.paid) {\n                setStatus('paid');\n                setIsPolling(false);\n              } else if (['cancelled', 'failed', 'refunded'].includes(update.status)) {\n                setStatus('failed');\n                setIsPolling(false);\n              }\n            }\n          },\n          abortController.signal\n        );\n\n        if (!abortController.signal.aborted) {\n          if (result.paid) {\n            setStatus('paid');\n            onComplete?.(true);\n          } else if (result.status === 'timeout') {\n            setStatus('timeout');\n            setMessage(result.message);\n            setIsPolling(false);\n          } else if (['cancelled', 'failed', 'refunded'].includes(result.status)) {\n            setStatus('failed');\n            setMessage(result.message);\n            setIsPolling(false);\n            onComplete?.(false);\n          }\n        }\n      } catch (error) {\n        if (error instanceof Error && error.message === 'Polling aborted') {\n          // Polling was cancelled, ignore error\n          return;\n        }\n        console.error('Payment verification error:', error);\n        if (!abortController.signal.aborted) {\n          setStatus('timeout');\n          setMessage('Unable to verify payment status. Please contact support.');\n          setIsPolling(false);\n        }\n      }\n    };\n\n    checkPayment();\n\n    return () => {\n      abortController.abort();\n    };\n  }, [orderId, onComplete]);\n\n  const handleRetry = () => {\n    setStatus('checking');\n    setMessage('Checking payment status...');\n    setAttempts(0);\n    setIsPolling(true);\n  };\n\n  const getStatusIcon = () => {\n    switch (status) {\n      case 'paid':\n        return <CheckCircle2 className=\"w-16 h-16 text-green-600\" />;\n      case 'failed':\n        return <XCircle className=\"w-16 h-16 text-red-600\" />;\n      case 'timeout':\n        return <Clock className=\"w-16 h-16 text-amber-600\" />;\n      case 'checking':\n      default:\n        return <Loader2 className=\"w-16 h-16 text-blue-600 animate-spin\" />;\n    }\n  };\n\n  const getBackgroundColor = () => {\n    switch (status) {\n      case 'paid':\n        return 'from-green-50 to-emerald-50 border-green-200';\n      case 'failed':\n        return 'from-red-50 to-rose-50 border-red-200';\n      case 'timeout':\n        return 'from-amber-50 to-yellow-50 border-amber-200';\n      case 'checking':\n      default:\n        return 'from-blue-50 to-indigo-50 border-blue-200';\n    }\n  };\n\n  return (\n    <div className={`bg-gradient-to-br ${getBackgroundColor()} rounded-lg border-2 p-6 ${className}`}>\n      <div className=\"flex flex-col items-center text-center space-y-4\">\n        {/* Status Icon */}\n        <div className=\"p-4 bg-white rounded-full shadow-md\">\n          {getStatusIcon()}\n        </div>\n\n        {/* Status Message */}\n        <div className=\"space-y-2\">\n          <h3 className=\"text-xl font-bold text-gray-900\">\n            {status === 'paid' && 'Payment Successful!'}\n            {status === 'failed' && 'Payment Failed'}\n            {status === 'timeout' && 'Verification Timeout'}\n            {status === 'checking' && 'Verifying Payment...'}\n          </h3>\n          <p className=\"text-gray-700\">{message}</p>\n        </div>\n\n        {/* Progress for checking state */}\n        {status === 'checking' && (\n          <div className=\"w-full max-w-xs space-y-2\">\n            <div className=\"flex justify-between text-sm text-gray-600\">\n              <span>Checking payment status...</span>\n              <span>{Math.min(attempts, maxAttempts)} / {maxAttempts}</span>\n            </div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2 overflow-hidden\">\n              <div\n                className=\"bg-blue-600 h-full transition-all duration-300 ease-out\"\n                style={{ width: `${(attempts / maxAttempts) * 100}%` }}\n              />\n            </div>\n            <p className=\"text-xs text-gray-500\">\n              This may take a few minutes. You can leave this page and check your email.\n            </p>\n          </div>\n        )}\n\n        {/* Action buttons */}\n        {status === 'timeout' && (\n          <div className=\"space-y-3\">\n            <button\n              onClick={handleRetry}\n              className=\"flex items-center gap-2 px-6 py-3 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-all font-semibold shadow-md\"\n            >\n              <RefreshCw className=\"w-4 h-4\" />\n              Check Again\n            </button>\n            <div className=\"text-sm text-gray-600 space-y-1\">\n              <p>Or contact our support team:</p>\n              <a\n                href=\"https://lin.ee/v86CTkq\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-blue-600 hover:text-blue-800 font-semibold\"\n              >\n                LINE: @Sakwood\n              </a>\n            </div>\n          </div>\n        )}\n\n        {/* Info for paid status */}\n        {status === 'paid' && (\n          <div className=\"text-sm text-gray-600 space-y-2\">\n            <p className=\"font-semibold\">Order Number: #{orderId}</p>\n            <p>You will receive an email confirmation shortly.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1173, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/checkout/OrderSuccess.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { useEffect, useState } from 'react';\r\nimport type { Locale } from '@/i18n-config';\r\nimport { Breadcrumbs } from '@/components/layout/Breadcrumbs';\r\nimport { PaymentVerification } from '@/components/checkout/PaymentVerification';\r\n\r\ninterface OrderSuccessProps {\r\n  lang: Locale;\r\n  dictionary: {\r\n    common: {\r\n      home: string;\r\n    };\r\n    order_success: {\r\n      page_title: string;\r\n      thank_you: string;\r\n      order_number: string;\r\n      order_placed: string;\r\n      email_confirmation: string;\r\n      continue_shopping: string;\r\n      view_order: string;\r\n      contact_support: string;\r\n    };\r\n  };\r\n  orderId?: string;\r\n}\r\n\r\nexport function OrderSuccess({ lang, dictionary, orderId }: OrderSuccessProps) {\r\n  const { common, order_success } = dictionary;\r\n  const [mounted, setMounted] = useState(false);\r\n  const [paymentVerified, setPaymentVerified] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  if (!mounted) {\r\n    return null;\r\n  }\r\n\r\n  const breadcrumbItems = [\r\n    { name: common.home, href: `/${lang}` },\r\n    { name: order_success.page_title, href: `/${lang}/checkout/success` }\r\n  ];\r\n\r\n  const numericOrderId = orderId ? parseInt(orderId) : null;\r\n\r\n  return (\r\n    <main className=\"min-h-screen py-12\">\r\n      <Breadcrumbs items={breadcrumbItems} lang={lang} />\r\n\r\n      <div className=\"max-w-3xl mx-auto px-6 space-y-6\">\r\n        {/* Payment Verification */}\r\n        {numericOrderId && !paymentVerified && (\r\n          <PaymentVerification\r\n            orderId={numericOrderId}\r\n            onComplete={(paid) => setPaymentVerified(paid)}\r\n          />\r\n        )}\r\n\r\n        {/* Order Success Message */}\r\n        <div className=\"bg-white rounded-lg shadow-lg p-12 text-center\">\r\n          {/* Success Icon */}\r\n          <div className=\"mb-6\">\r\n            <div className=\"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full\">\r\n              <svg\r\n                className=\"w-10 h-10 text-green-600\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M5 13l4 4L19 7\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Thank You Message */}\r\n          <h1 className=\"text-3xl md:text-4xl font-bold text-blue-900 mb-4\">\r\n            {order_success.thank_you}\r\n          </h1>\r\n\r\n          <p className=\"text-xl text-gray-600 mb-8\">\r\n            {order_success.order_placed}\r\n          </p>\r\n\r\n          {/* Order Number */}\r\n          {orderId && (\r\n            <div className=\"bg-blue-50 rounded-lg p-6 mb-6\">\r\n              <p className=\"text-sm text-gray-600 mb-2\">{order_success.order_number}</p>\r\n              <p className=\"text-2xl font-bold text-blue-900\">#{orderId}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Confirmation Message */}\r\n          <p className=\"text-gray-600 mb-8\">\r\n            {order_success.email_confirmation}\r\n          </p>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n            <Link\r\n              href={`/${lang}`}\r\n              className=\"px-8 py-3 bg-blue-900 text-white font-bold hover:bg-blue-800 transition-all uppercase tracking-wide rounded-none\"\r\n            >\r\n              {order_success.continue_shopping}\r\n            </Link>\r\n\r\n            {orderId && (\r\n              <Link\r\n                href={`/${lang}/order-details/${orderId}`}\r\n                className=\"px-8 py-3 border-2 border-blue-900 text-blue-900 font-bold hover:bg-blue-50 transition-all uppercase tracking-wide rounded-none\"\r\n              >\r\n                {order_success.view_order}\r\n              </Link>\r\n            )}\r\n          </div>\r\n\r\n          {/* Contact Support */}\r\n          <p className=\"mt-8 text-sm text-gray-500\">\r\n            {order_success.contact_support}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;;;AANA;;;;;AA4BO,SAAS,aAAa,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAqB;;IAC3E,MAAM,EAAE,MAAM,EAAE,aAAa,EAAE,GAAG;IAClC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sMAAQ,EAAC;IACvC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,sMAAQ,EAAC;IAEvD,IAAA,uMAAS;kCAAC;YACR,WAAW;QACb;iCAAG,EAAE;IAEL,IAAI,CAAC,SAAS;QACZ,OAAO;IACT;IAEA,MAAM,kBAAkB;QACtB;YAAE,MAAM,OAAO,IAAI;YAAE,MAAM,CAAC,CAAC,EAAE,MAAM;QAAC;QACtC;YAAE,MAAM,cAAc,UAAU;YAAE,MAAM,CAAC,CAAC,EAAE,KAAK,iBAAiB,CAAC;QAAC;KACrE;IAED,MAAM,iBAAiB,UAAU,SAAS,WAAW;IAErD,qBACE,0NAAC;QAAK,WAAU;;0BACd,0NAAC,mLAAW;gBAAC,OAAO;gBAAiB,MAAM;;;;;;0BAE3C,0NAAC;gBAAI,WAAU;;oBAEZ,kBAAkB,CAAC,iCAClB,0NAAC,qMAAmB;wBAClB,SAAS;wBACT,YAAY,CAAC,OAAS,mBAAmB;;;;;;kCAK7C,0NAAC;wBAAI,WAAU;;0CAEb,0NAAC;gCAAI,WAAU;0CACb,cAAA,0NAAC;oCAAI,WAAU;8CACb,cAAA,0NAAC;wCACC,WAAU;wCACV,MAAK;wCACL,QAAO;wCACP,SAAQ;kDAER,cAAA,0NAAC;4CACC,eAAc;4CACd,gBAAe;4CACf,aAAa;4CACb,GAAE;;;;;;;;;;;;;;;;;;;;;0CAOV,0NAAC;gCAAG,WAAU;0CACX,cAAc,SAAS;;;;;;0CAG1B,0NAAC;gCAAE,WAAU;0CACV,cAAc,YAAY;;;;;;4BAI5B,yBACC,0NAAC;gCAAI,WAAU;;kDACb,0NAAC;wCAAE,WAAU;kDAA8B,cAAc,YAAY;;;;;;kDACrE,0NAAC;wCAAE,WAAU;;4CAAmC;4CAAE;;;;;;;;;;;;;0CAKtD,0NAAC;gCAAE,WAAU;0CACV,cAAc,kBAAkB;;;;;;0CAInC,0NAAC;gCAAI,WAAU;;kDACb,0NAAC,uMAAI;wCACH,MAAM,CAAC,CAAC,EAAE,MAAM;wCAChB,WAAU;kDAET,cAAc,iBAAiB;;;;;;oCAGjC,yBACC,0NAAC,uMAAI;wCACH,MAAM,CAAC,CAAC,EAAE,KAAK,eAAe,EAAE,SAAS;wCACzC,WAAU;kDAET,cAAc,UAAU;;;;;;;;;;;;0CAM/B,0NAAC;gCAAE,WAAU;0CACV,cAAc,eAAe;;;;;;;;;;;;;;;;;;;;;;;;AAM1C;GAvGgB;KAAA"}},
    {"offset": {"line": 1389, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/checkout/index.ts"],"sourcesContent":["export { PromptPayQR } from './PromptPayQR';\r\nexport { OrderSuccess } from './OrderSuccess';\r\n"],"names":[],"mappings":";AAAA;AACA"}},
    {"offset": {"line": 1401, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/checkout/PromptPayInstructions.tsx"],"sourcesContent":["'use client';\n\nimport { Smartphone, Scan, CheckCircle, Clock } from 'lucide-react';\n\ninterface PromptPayInstructionsProps {\n  className?: string;\n}\n\nexport function PromptPayInstructions({ className = '' }: PromptPayInstructionsProps) {\n  const steps = [\n    {\n      icon: <Smartphone className=\"w-6 h-6\" />,\n      title: 'Open your banking app',\n      description: 'Launch your mobile banking app (e.g., K Plus, SCB Easy, Krungthai NEXT)',\n    },\n    {\n      icon: <Scan className=\"w-6 h-6\" />,\n      title: 'Scan the QR code',\n      description: 'Select \"Scan QR\" or \"PromptPay\" in your app and scan the code above',\n    },\n    {\n      icon: <CheckCircle className=\"w-6 h-6\" />,\n      title: 'Confirm payment',\n      description: 'Verify the amount and merchant details, then confirm the transaction',\n    },\n  ];\n\n  const apps = [\n    { name: 'K Plus', color: 'bg-green-600' },\n    { name: 'SCB Easy', color: 'bg-purple-600' },\n    { name: 'Krungthai NEXT', color: 'bg-red-600' },\n    { name: 'Bualuang mBanking', color: 'bg-blue-600' },\n    { name: 'Krungsri Mobile', color: 'bg-yellow-500' },\n    { name: 'CIMB Clicks', color: 'bg-red-500' },\n    { name: 'GSB Super App', color: 'bg-blue-500' },\n    { name: 'TTB Touch', color: 'bg-orange-500' },\n  ];\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      {/* How to pay */}\n      <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-5 border border-blue-200\">\n        <h3 className=\"text-lg font-bold text-blue-900 mb-4 flex items-center gap-2\">\n          <Clock className=\"w-5 h-5\" />\n          How to Pay with PromptPay\n        </h3>\n\n        <div className=\"space-y-4\">\n          {steps.map((step, index) => (\n            <div key={index} className=\"flex gap-3\">\n              <div className=\"flex-shrink-0 w-8 h-8 rounded-full bg-blue-900 text-white flex items-center justify-center font-bold text-sm\">\n                {index + 1}\n              </div>\n              <div className=\"flex-1\">\n                <div className=\"flex items-start gap-2\">\n                  <div className=\"mt-0.5 text-blue-700\">\n                    {step.icon}\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold text-blue-900\">{step.title}</h4>\n                    <p className=\"text-sm text-gray-600\">{step.description}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Supported apps */}\n      <div className=\"bg-white rounded-lg p-4 border border-gray-200\">\n        <p className=\"text-xs text-gray-500 font-semibold uppercase tracking-wide mb-3 text-center\">\n          Supported Banking Apps\n        </p>\n        <div className=\"flex flex-wrap gap-2 justify-center\">\n          {apps.map((app) => (\n            <span\n              key={app.name}\n              className={`px-3 py-1.5 ${app.color} text-white text-xs font-medium rounded-full shadow-sm`}\n            >\n              {app.name}\n            </span>\n          ))}\n        </div>\n      </div>\n\n      {/* Important notice */}\n      <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n        <h4 className=\"font-semibold text-amber-800 mb-2 flex items-center gap-2\">\n          <Clock className=\"w-4 h-4\" />\n          Important Notice\n        </h4>\n        <ul className=\"text-sm text-amber-700 space-y-1\">\n          <li>â¢ QR code is valid for this transaction only</li>\n          <li>â¢ Please ensure the amount matches before confirming</li>\n          <li>â¢ Payment confirmation may take 1-3 business days</li>\n          <li>â¢ Keep your payment slip for reference</li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAFA;;;AAQO,SAAS,sBAAsB,EAAE,YAAY,EAAE,EAA8B;IAClF,MAAM,QAAQ;QACZ;YACE,oBAAM,0NAAC,4PAAU;gBAAC,WAAU;;;;;;YAC5B,OAAO;YACP,aAAa;QACf;QACA;YACE,oBAAM,0NAAC,0OAAI;gBAAC,WAAU;;;;;;YACtB,OAAO;YACP,aAAa;QACf;QACA;YACE,oBAAM,0NAAC,0QAAW;gBAAC,WAAU;;;;;;YAC7B,OAAO;YACP,aAAa;QACf;KACD;IAED,MAAM,OAAO;QACX;YAAE,MAAM;YAAU,OAAO;QAAe;QACxC;YAAE,MAAM;YAAY,OAAO;QAAgB;QAC3C;YAAE,MAAM;YAAkB,OAAO;QAAa;QAC9C;YAAE,MAAM;YAAqB,OAAO;QAAc;QAClD;YAAE,MAAM;YAAmB,OAAO;QAAgB;QAClD;YAAE,MAAM;YAAe,OAAO;QAAa;QAC3C;YAAE,MAAM;YAAiB,OAAO;QAAc;QAC9C;YAAE,MAAM;YAAa,OAAO;QAAgB;KAC7C;IAED,qBACE,0NAAC;QAAI,WAAW,CAAC,UAAU,EAAE,WAAW;;0BAEtC,0NAAC;gBAAI,WAAU;;kCACb,0NAAC;wBAAG,WAAU;;0CACZ,0NAAC,6OAAK;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAI/B,0NAAC;wBAAI,WAAU;kCACZ,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,0NAAC;gCAAgB,WAAU;;kDACzB,0NAAC;wCAAI,WAAU;kDACZ,QAAQ;;;;;;kDAEX,0NAAC;wCAAI,WAAU;kDACb,cAAA,0NAAC;4CAAI,WAAU;;8DACb,0NAAC;oDAAI,WAAU;8DACZ,KAAK,IAAI;;;;;;8DAEZ,0NAAC;;sEACC,0NAAC;4DAAG,WAAU;sEAA+B,KAAK,KAAK;;;;;;sEACvD,0NAAC;4DAAE,WAAU;sEAAyB,KAAK,WAAW;;;;;;;;;;;;;;;;;;;;;;;;+BAXpD;;;;;;;;;;;;;;;;0BAqBhB,0NAAC;gBAAI,WAAU;;kCACb,0NAAC;wBAAE,WAAU;kCAA+E;;;;;;kCAG5F,0NAAC;wBAAI,WAAU;kCACZ,KAAK,GAAG,CAAC,CAAC,oBACT,0NAAC;gCAEC,WAAW,CAAC,YAAY,EAAE,IAAI,KAAK,CAAC,sDAAsD,CAAC;0CAE1F,IAAI,IAAI;+BAHJ,IAAI,IAAI;;;;;;;;;;;;;;;;0BAUrB,0NAAC;gBAAI,WAAU;;kCACb,0NAAC;wBAAG,WAAU;;0CACZ,0NAAC,6OAAK;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAG/B,0NAAC;wBAAG,WAAU;;0CACZ,0NAAC;0CAAG;;;;;;0CACJ,0NAAC;0CAAG;;;;;;0CACJ,0NAAC;0CAAG;;;;;;0CACJ,0NAAC;0CAAG;;;;;;;;;;;;;;;;;;;;;;;;AAKd;KA7FgB"}},
    {"offset": {"line": 1696, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/components/checkout/ProvinceSearch.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { Search, ChevronDown, X } from 'lucide-react';\n\ninterface ProvinceSearchProps {\n  provinces: string[];\n  value: string;\n  onChange: (province: string) => void;\n  placeholder?: string;\n  lang?: 'th' | 'en';\n  disabled?: boolean;\n}\n\nexport function ProvinceSearch({\n  provinces,\n  value,\n  onChange,\n  placeholder = 'Search province...',\n  lang = 'th',\n  disabled = false,\n}: ProvinceSearchProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isOpen, setIsOpen] = useState(false);\n  const [highlightedIndex, setHighlightedIndex] = useState(-1);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Display name for selected value\n  const displayName = value || '';\n\n  // Filter provinces based on search query\n  const filteredProvinces = useCallback(() => {\n    if (!searchQuery) {\n      return provinces.slice(0, 10); // Show first 10 when no search\n    }\n\n    const query = searchQuery.toLowerCase();\n    return provinces.filter((province) =>\n      province.toLowerCase().includes(query)\n    ).slice(0, 10); // Max 10 results\n  }, [provinces, searchQuery]);\n\n  const results = filteredProvinces();\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(event.target as Node) &&\n        !inputRef.current?.contains(event.target as Node)\n      ) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Handle keyboard navigation\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (!isOpen) {\n      if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n        setIsOpen(true);\n        e.preventDefault();\n      }\n      return;\n    }\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setHighlightedIndex((prev) =>\n          prev < results.length - 1 ? prev + 1 : prev\n        );\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setHighlightedIndex((prev) => (prev > 0 ? prev - 1 : 0));\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (highlightedIndex >= 0 && results[highlightedIndex]) {\n          handleSelect(results[highlightedIndex]);\n        }\n        break;\n      case 'Escape':\n        setIsOpen(false);\n        setHighlightedIndex(-1);\n        break;\n    }\n  };\n\n  // Handle selecting a province\n  const handleSelect = (province: string) => {\n    onChange(province);\n    setSearchQuery('');\n    setIsOpen(false);\n    setHighlightedIndex(-1);\n    inputRef.current?.blur();\n  };\n\n  // Handle clearing selection\n  const handleClear = () => {\n    onChange('');\n    setSearchQuery('');\n    inputRef.current?.focus();\n  };\n\n  // Handle input focus\n  const handleFocus = () => {\n    if (!disabled) {\n      setIsOpen(true);\n    }\n  };\n\n  // Highlight matching text\n  const highlightMatch = (text: string, query: string) => {\n    if (!query) return text;\n\n    const regex = new RegExp(`(${query})`, 'gi');\n    const parts = text.split(regex);\n\n    return parts.map((part, index) =>\n      regex.test(part) ? (\n        <mark key={index} className=\"bg-yellow-200 text-gray-900 rounded px-0.5\">\n          {part}\n        </mark>\n      ) : (\n        part\n      )\n    );\n  };\n\n  return (\n    <div className=\"relative\" ref={dropdownRef}>\n      {/* Input with search icon */}\n      <div className=\"relative\">\n        <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n          <Search className=\"h-4 w-4 text-gray-400\" />\n        </div>\n\n        <input\n          ref={inputRef}\n          type=\"text\"\n          value={isOpen ? searchQuery : displayName}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          onFocus={handleFocus}\n          onKeyDown={handleKeyDown}\n          disabled={disabled}\n          placeholder={placeholder}\n          className=\"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all disabled:bg-gray-100 disabled:cursor-not-allowed text-gray-900 placeholder:text-gray-400\"\n          autoComplete=\"off\"\n        />\n\n        {/* Clear button */}\n        {value && !isOpen && (\n          <button\n            type=\"button\"\n            onClick={handleClear}\n            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"h-4 w-4\" />\n          </button>\n        )}\n\n        {/* Dropdown arrow */}\n        {!value && (\n          <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\n            <ChevronDown className=\"h-4 w-4 text-gray-400\" />\n          </div>\n        )}\n      </div>\n\n      {/* Dropdown results */}\n      {isOpen && (\n        <div className=\"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto\">\n          {results.length > 0 ? (\n            results.map((province, index) => (\n              <button\n                key={province}\n                type=\"button\"\n                onClick={() => handleSelect(province)}\n                onMouseEnter={() => setHighlightedIndex(index)}\n                className={`w-full px-4 py-2 text-left text-sm transition-colors ${\n                  highlightedIndex === index\n                    ? 'bg-blue-50 text-blue-900'\n                    : value === province\n                    ? 'bg-green-50 text-green-900 font-medium'\n                    : 'text-gray-900 hover:bg-gray-50'\n                }`}\n              >\n                {highlightMatch(province, searchQuery)}\n              </button>\n            ))\n          ) : (\n            <div className=\"px-4 py-3 text-sm text-gray-500 text-center\">\n              {lang === 'th' ? 'à¹à¸¡à¹à¸à¸à¸à¸±à¸à¸«à¸§à¸±à¸' : 'No provinces found'}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Selected province display (when dropdown is closed) */}\n      {value && !isOpen && (\n        <input type=\"hidden\" name=\"province\" value={value} />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1940, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/services/deliveryService.ts"],"sourcesContent":["// Delivery rate calculation service\r\n// Warehouse location: Pathumtani, Thailand\r\n// Rates are loaded from DeliveryRate.csv\r\n\r\nexport enum TruckType {\r\n  SMALL = 'small',\r\n  MEDIUM = 'medium',\r\n  LARGE = 'large',\r\n}\r\n\r\nexport interface ShippingRate {\r\n  province: string;\r\n  rate: number;\r\n  estimatedDays: string;\r\n  truckType?: TruckType;\r\n}\r\n\r\nexport interface CartItem {\r\n  length?: number | string;\r\n  width?: number | string;\r\n  thickness?: number | string;\r\n  volume?: number;\r\n  surfaceArea?: number | string;\r\n  quantity: number;\r\n}\r\n\r\n// CSV data structure from DeliveryRate.csv\r\ninterface DeliveryRateRow {\r\n  zone: string;\r\n  province: string;\r\n  baseRate: number;\r\n  priceTiers: {\r\n    tier1: number;      // 0-10k\r\n    tier2: number;      // 10k-25k\r\n    tier3: number;      // 25k-50k\r\n    tier4: number;      // 50k-75k\r\n    tier5: number;      // 75k-100k\r\n    tier6: number;      // 100k-150k\r\n    tier7: number;      // 150k-200k\r\n    tier8: number;      // 200k-250k\r\n    tier9: number;      // 250k-300k\r\n  };\r\n}\r\n\r\n// Parsed delivery rates from CSV\r\nconst DELIVERY_RATES: ShippingRate[] = [\r\n  // Zone 1: Bangkok Metropolitan Area (6W)\r\n  { province: 'Pathumtani', rate: 5000, estimatedDays: '1' },\r\n  { province: 'Nonthaburi', rate: 5000, estimatedDays: '1-2' },\r\n  { province: 'Samut Prakan', rate: 5000, estimatedDays: '1-2' },\r\n  { province: 'Nakhon Pathom', rate: 5000, estimatedDays: '1-2' },\r\n  { province: 'Samut Sakhon', rate: 5000, estimatedDays: '1-2' },\r\n  { province: 'Phra Nakhon Si Ayutthaya', rate: 6500, estimatedDays: '2-3' },\r\n  { province: 'Ang Thong', rate: 2000, estimatedDays: '2-3' },\r\n  { province: 'Lopburi', rate: 2000, estimatedDays: '2-3' },\r\n  { province: 'Saraburi', rate: 2000, estimatedDays: '2-3' },\r\n  { province: 'Sing Buri', rate: 2000, estimatedDays: '2-3' },\r\n  { province: 'Chai Nat', rate: 2000, estimatedDays: '2-3' },\r\n  { province: 'Suphan Buri', rate: 2000, estimatedDays: '2-3' },\r\n\r\n  // Zone 2: Central Region (10W)\r\n  { province: 'Kanchanaburi', rate: 2500, estimatedDays: '2-3' },\r\n  { province: 'Ratchaburi', rate: 2500, estimatedDays: '2-3' },\r\n  { province: 'Phetchaburi', rate: 2500, estimatedDays: '2-3' },\r\n  { province: 'Prachuap Khiri Khan', rate: 3000, estimatedDays: '3-4' },\r\n  { province: 'Chonburi', rate: 2500, estimatedDays: '2-3' },\r\n  { province: 'Rayong', rate: 2500, estimatedDays: '2-3' },\r\n  { province: 'Chanthaburi', rate: 3000, estimatedDays: '3-4' },\r\n  { province: 'Trat', rate: 3000, estimatedDays: '3-4' },\r\n  { province: 'Chachoengsao', rate: 2000, estimatedDays: '2-3' },\r\n  { province: 'Prachinburi', rate: 2000, estimatedDays: '2-3' },\r\n  { province: 'Sa Kaeo', rate: 2500, estimatedDays: '2-3' },\r\n  { province: 'Nakhon Nayok', rate: 2000, estimatedDays: '2-3' },\r\n\r\n  // Zone 3: Northern Region (6W)\r\n  { province: 'Kamphaeng Phet', rate: 4000, estimatedDays: '3-4' },\r\n  { province: 'Tak', rate: 4000, estimatedDays: '3-4' },\r\n  { province: 'Uthai Thani', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Nakhon Sawan', rate: 3000, estimatedDays: '2-3' },\r\n  { province: 'Phichit', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Phitsanulok', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Phichai', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Phetchabun', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Chiang Mai', rate: 7500, estimatedDays: '4-5' },\r\n  { province: 'Lamphun', rate: 7500, estimatedDays: '4-5' },\r\n  { province: 'Lampang', rate: 7500, estimatedDays: '4-5' },\r\n  { province: 'Uttaradit', rate: 4500, estimatedDays: '4-5' },\r\n  { province: 'Phrae', rate: 4500, estimatedDays: '4-5' },\r\n  { province: 'Nan', rate: 7500, estimatedDays: '4-5' },\r\n  { province: 'Phayao', rate: 7500, estimatedDays: '4-5' },\r\n  { province: 'Chiang Rai', rate: 9000, estimatedDays: '4-5' },\r\n  { province: 'Mae Hong Son', rate: 10000, estimatedDays: '5-6' },\r\n\r\n  // Zone 4: Northeastern Region (6W)\r\n  { province: 'Nakhon Ratchasima', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Buri Ram', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Surin', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Sisaket', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Ubon Ratchathani', rate: 4000, estimatedDays: '4-5' },\r\n  { province: 'Yasothon', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Chaiyaphum', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Amnat Charoen', rate: 4000, estimatedDays: '4-5' },\r\n  { province: 'Nong Bua Lamphu', rate: 4000, estimatedDays: '4-5' },\r\n  { province: 'Khon Kaen', rate: 4000, estimatedDays: '4-5' },\r\n  { province: 'Udon Thani', rate: 4000, estimatedDays: '4-5' },\r\n  { province: 'Loei', rate: 4000, estimatedDays: '4-5' },\r\n  { province: 'Nong Khai', rate: 4000, estimatedDays: '4-5' },\r\n  { province: 'Maha Sarakham', rate: 5000, estimatedDays: '4-5' },\r\n  { province: 'Roi Et', rate: 3500, estimatedDays: '3-4' },\r\n  { province: 'Kalasin', rate: 4000, estimatedDays: '4-5' },\r\n  { province: 'Sakon Nakhon', rate: 4000, estimatedDays: '4-5' },\r\n  { province: 'Nakhon Phanom', rate: 4000, estimatedDays: '4-5' },\r\n  { province: 'Mukdahan', rate: 4000, estimatedDays: '4-5' },\r\n\r\n  // Zone 5: Southern Region (6W)\r\n  { province: 'Chumphon', rate: 4000, estimatedDays: '4-5' },\r\n  { province: 'Ranong', rate: 4500, estimatedDays: '4-5' },\r\n  { province: 'Surat Thani', rate: 4500, estimatedDays: '4-5' },\r\n  { province: 'Phangnga', rate: 5000, estimatedDays: '5-6' },\r\n  { province: 'Phuket', rate: 5000, estimatedDays: '5-6' },\r\n  { province: 'Krabi', rate: 5000, estimatedDays: '5-6' },\r\n  { province: 'Phatthalung', rate: 4500, estimatedDays: '4-5' },\r\n  { province: 'Trang', rate: 4500, estimatedDays: '4-5' },\r\n  { province: 'Satun', rate: 5000, estimatedDays: '5-6' },\r\n  { province: 'Songkhla', rate: 4500, estimatedDays: '4-5' },\r\n  { province: 'Yala', rate: 5000, estimatedDays: '5-6' },\r\n  { province: 'Narathiwat', rate: 5000, estimatedDays: '5-6' },\r\n  { province: 'Pattani', rate: 5000, estimatedDays: '5-6' },\r\n  { province: 'Nakhon Si Thammarat', rate: 4500, estimatedDays: '4-5' },\r\n];\r\n\r\n/**\r\n * Get shipping rate for a specific province\r\n * @param province - Name of province\r\n * @returns Shipping rate information or default rate if province not found\r\n */\r\nexport function getShippingRate(province: string): ShippingRate {\r\n  const normalizedProvince = province.toLowerCase().trim();\r\n  const rate = DELIVERY_RATES.find(\r\n    (r) => r.province.toLowerCase() === normalizedProvince\r\n  );\r\n\r\n  return (\r\n    rate || {\r\n      province,\r\n      rate: 6000, // Default rate for unknown provinces\r\n      estimatedDays: '5-7',\r\n    }\r\n  );\r\n}\r\n\r\n/**\r\n * Get all available provinces\r\n * @returns Array of province names\r\n */\r\nexport function getAllProvinces(): string[] {\r\n  return DELIVERY_RATES.map((rate) => rate.province).sort();\r\n}\r\n\r\n/**\r\n * Determine truck type based on cart items\r\n * @param items - Array of cart items with dimensions\r\n * @returns Truck type needed\r\n */\r\nexport function determineTruckType(items: CartItem[]): TruckType {\r\n  let totalLength = 0;\r\n  let totalVolume = 0;\r\n\r\n  items.forEach(item => {\r\n    const length = typeof item.length === 'string' ? parseFloat(item.length) || 0 : (item.length || 0);\r\n    const volume = item.volume || 0;\r\n    totalLength += length * item.quantity;\r\n    totalVolume += volume * item.quantity;\r\n  });\r\n\r\n  // Large truck needed if:\r\n  // - Any single item is 6 meters or longer, OR\r\n  // - Total length exceeds 12 meters, OR\r\n  // - Total volume exceeds 5 cubic meters\r\n  const hasLongItem = items.some(item => {\r\n    const length = typeof item.length === 'string' ? parseFloat(item.length) || 0 : (item.length || 0);\r\n    return length >= 6;\r\n  });\r\n  const totalLengthExceedsLimit = totalLength > 12;\r\n  const totalVolumeExceedsLimit = totalVolume > 5;\r\n\r\n  if (hasLongItem || totalLengthExceedsLimit || totalVolumeExceedsLimit) {\r\n    return TruckType.LARGE;\r\n  }\r\n\r\n  // Medium truck needed if:\r\n  // - Any single item is 3-6 meters, OR\r\n  // - Total length exceeds 6 meters, OR\r\n  // - Total volume exceeds 2 cubic meters\r\n  const hasMediumItem = items.some(item => {\r\n    const length = typeof item.length === 'string' ? parseFloat(item.length) || 0 : (item.length || 0);\r\n    return length >= 3 && length < 6;\r\n  });\r\n  const totalLengthExceedsMedium = totalLength > 6;\r\n  const totalVolumeExceedsMedium = totalVolume > 2;\r\n\r\n  if (hasMediumItem || totalLengthExceedsMedium || totalVolumeExceedsMedium) {\r\n    return TruckType.MEDIUM;\r\n  }\r\n\r\n  return TruckType.SMALL;\r\n}\r\n\r\n/**\r\n * Get truck type surcharge\r\n * @param truckType - Type of truck\r\n * @returns Additional cost for truck type\r\n */\r\nexport function getTruckTypeSurcharge(truckType: TruckType): number {\r\n  switch (truckType) {\r\n    case TruckType.SMALL:\r\n      return 0;\r\n    case TruckType.MEDIUM:\r\n      return 500;\r\n    case TruckType.LARGE:\r\n      return 1500;\r\n    default:\r\n      return 0;\r\n  }\r\n}\r\n\r\n/**\r\n * Get truck type display name\r\n * @param truckType - Type of truck\r\n * @returns Display name for truck type\r\n */\r\nexport function getTruckTypeName(truckType: TruckType): string {\r\n  switch (truckType) {\r\n    case TruckType.SMALL:\r\n      return 'Small Truck (6-wheel)';\r\n    case TruckType.MEDIUM:\r\n      return 'Medium Truck (10-wheel)';\r\n    case TruckType.LARGE:\r\n      return 'Large Truck (10-wheel)';\r\n    default:\r\n      return 'Standard Truck';\r\n  }\r\n}\r\n\r\n/**\r\n * Get price tier based on order value\r\n * @param cartTotal - Total cart value\r\n * @returns Price tier multiplier\r\n */\r\nfunction getPriceTier(cartTotal: number): number {\r\n  if (cartTotal >= 250000) return 0.9;      // 250k-300k: 10% discount\r\n  if (cartTotal >= 200000) return 0.95;     // 200k-250k: 5% discount\r\n  if (cartTotal >= 150000) return 1.0;       // 150k-200k: no discount\r\n  if (cartTotal >= 100000) return 1.05;      // 100k-150k: 5% surcharge\r\n  if (cartTotal >= 75000) return 1.1;        // 75k-100k: 10% surcharge\r\n  if (cartTotal >= 50000) return 1.15;       // 50k-75k: 15% surcharge\r\n  if (cartTotal >= 25000) return 1.2;        // 25k-50k: 20% surcharge\r\n  if (cartTotal >= 10000) return 1.25;       // 10k-25k: 25% surcharge\r\n  return 1.0;                                      // 0-10k: 25% surcharge\r\n}\r\n\r\n/**\r\n * Calculate shipping cost based on province and truck type\r\n * @param province - Name of province\r\n * @param cartTotal - Total cart value (optional, can be used for free shipping)\r\n * @param items - Cart items to determine truck type\r\n * @returns Shipping cost in THB\r\n */\r\nexport function calculateShippingCost(\r\n  province: string,\r\n  cartTotal?: number,\r\n  items?: CartItem[]\r\n): { cost: number; truckType: TruckType; truckTypeName: string; priceTier: string } {\r\n  const rate = getShippingRate(province);\r\n  const truckType = items ? determineTruckType(items) : TruckType.SMALL;\r\n  const truckSurcharge = getTruckTypeSurcharge(truckType);\r\n  const priceTier = cartTotal ? getPriceTier(cartTotal) : 1.0;\r\n\r\n  // Free shipping for orders over 10,000 THB\r\n  if (cartTotal && cartTotal >= 10000) {\r\n    return {\r\n      cost: 0,\r\n      truckType,\r\n      truckTypeName: getTruckTypeName(truckType),\r\n      priceTier: 'Free',\r\n    };\r\n  }\r\n\r\n  const baseCost = rate.rate + truckSurcharge;\r\n  const totalCost = baseCost * priceTier;\r\n\r\n  return {\r\n    cost: totalCost,\r\n    truckType,\r\n    truckTypeName: getTruckTypeName(truckType),\r\n    priceTier: priceTier === 1.0 ? 'Standard' : `${Math.round((1 - priceTier) * 100)}% ${priceTier < 1 ? 'Discount' : 'Surcharge'}`,\r\n  };\r\n}\r\n\r\n/**\r\n * Get shipping zones\r\n * @returns Array of zones with their rates\r\n */\r\nexport function getShippingZones(): {\r\n  zone: string;\r\n  provinces: string[];\r\n  rate: number;\r\n  estimatedDays: string;\r\n}[] {\r\n  const zones = [\r\n    { name: 'Bangkok Metropolitan Area', rate: 5000, days: '1-2' },\r\n    { name: 'Central Region', rate: 2500, days: '2-3' },\r\n    { name: 'Northern Region', rate: 7500, days: '4-5' },\r\n    { name: 'Northeastern Region', rate: 4000, days: '4-5' },\r\n    { name: 'Southern Region', rate: 5000, days: '5-6' },\r\n  ];\r\n\r\n  return zones.map((zone) => ({\r\n    zone: zone.name,\r\n    provinces: DELIVERY_RATES.filter((r) => r.rate === zone.rate).map((r) => r.province),\r\n    rate: zone.rate,\r\n    estimatedDays: zone.days,\r\n  }));\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2498, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/hooks/useFormPersistence.ts"],"sourcesContent":["/**\n * Form persistence hook for auto-saving checkout data to localStorage\n * Prevents data loss if user navigates away or page reloads\n */\n\nimport { useState, useEffect } from 'react';\n\nexport interface CheckoutFormData {\n  email: string;\n  lineId: string;\n  phone: string;\n  firstName: string;\n  lastName: string;\n  address: string;\n  city: string;\n  postalCode: string;\n  notes: string;\n  paymentMethod: string;\n  province: string;\n}\n\ninterface StoredFormData extends CheckoutFormData {\n  timestamp: number;\n}\n\ninterface FormPersistenceStorage {\n  data: StoredFormData;\n  version: number;\n}\n\nconst STORAGE_VERSION = 1;\nconst DEFAULT_EXPIRY_MS = 24 * 60 * 60 * 1000; // 24 hours\n\n/**\n * Hook for persisting form data to localStorage\n */\nexport function useFormPersistence(formKey: string, expiryMs: number = DEFAULT_EXPIRY_MS) {\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  /**\n   * Save form data to localStorage with timestamp\n   */\n  const saveForm = (data: CheckoutFormData): void => {\n    try {\n      const storageData: FormPersistenceStorage = {\n        data: {\n          ...data,\n          timestamp: Date.now(),\n        },\n        version: STORAGE_VERSION,\n      };\n\n      localStorage.setItem(formKey, JSON.stringify(storageData));\n    } catch (error) {\n      // Silently fail if localStorage is not available\n      console.warn('Failed to save form data to localStorage:', error);\n    }\n  };\n\n  /**\n   * Load form data from localStorage if not expired\n   */\n  const loadForm = (): CheckoutFormData | null => {\n    try {\n      const stored = localStorage.getItem(formKey);\n\n      if (!stored) {\n        return null;\n      }\n\n      const parsed: FormPersistenceStorage = JSON.parse(stored);\n\n      // Check version compatibility\n      if (parsed.version !== STORAGE_VERSION) {\n        clearForm();\n        return null;\n      }\n\n      // Check expiration\n      const age = Date.now() - parsed.data.timestamp;\n      if (age > expiryMs) {\n        clearForm();\n        return null;\n      }\n\n      // Return data without timestamp\n      const { timestamp, ...formData } = parsed.data;\n      return formData;\n    } catch (error) {\n      console.warn('Failed to load form data from localStorage:', error);\n      clearForm();\n      return null;\n    }\n  };\n\n  /**\n   * Clear saved form data from localStorage\n   */\n  const clearForm = (): void => {\n    try {\n      localStorage.removeItem(formKey);\n    } catch (error) {\n      console.warn('Failed to clear form data from localStorage:', error);\n    }\n  };\n\n  /**\n   * Check if saved form data exists and is valid\n   */\n  const hasSavedForm = (): boolean => {\n    try {\n      const stored = localStorage.getItem(formKey);\n\n      if (!stored) {\n        return false;\n      }\n\n      const parsed: FormPersistenceStorage = JSON.parse(stored);\n\n      // Check version compatibility\n      if (parsed.version !== STORAGE_VERSION) {\n        return false;\n      }\n\n      // Check expiration\n      const age = Date.now() - parsed.data.timestamp;\n      return age <= expiryMs;\n    } catch (error) {\n      return false;\n    }\n  };\n\n  /**\n   * Get age of saved form data in minutes\n   */\n  const getFormAge = (): number | null => {\n    try {\n      const stored = localStorage.getItem(formKey);\n\n      if (!stored) {\n        return null;\n      }\n\n      const parsed: FormPersistenceStorage = JSON.parse(stored);\n      return Math.floor((Date.now() - parsed.data.timestamp) / (1000 * 60)); // minutes\n    } catch (error) {\n      return null;\n    }\n  };\n\n  return {\n    saveForm,\n    loadForm,\n    clearForm,\n    hasSavedForm,\n    getFormAge,\n    isLoaded,\n    setIsLoaded,\n  };\n}\n\n/**\n * Check if localStorage is available\n */\nexport function isLocalStorageAvailable(): boolean {\n  try {\n    const test = '__storage_test__';\n    localStorage.setItem(test, test);\n    localStorage.removeItem(test);\n    return true;\n  } catch {\n    return false;\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;;CAGC,GAED;;;AAyBA,MAAM,kBAAkB;AACxB,MAAM,oBAAoB,KAAK,KAAK,KAAK,MAAM,WAAW;AAKnD,SAAS,mBAAmB,OAAe,EAAE,WAAmB,iBAAiB;;IACtF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sMAAQ,EAAC;IAEzC;;GAEC,GACD,MAAM,WAAW,CAAC;QAChB,IAAI;YACF,MAAM,cAAsC;gBAC1C,MAAM;oBACJ,GAAG,IAAI;oBACP,WAAW,KAAK,GAAG;gBACrB;gBACA,SAAS;YACX;YAEA,aAAa,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC;QAC/C,EAAE,OAAO,OAAO;YACd,iDAAiD;YACjD,QAAQ,IAAI,CAAC,6CAA6C;QAC5D;IACF;IAEA;;GAEC,GACD,MAAM,WAAW;QACf,IAAI;YACF,MAAM,SAAS,aAAa,OAAO,CAAC;YAEpC,IAAI,CAAC,QAAQ;gBACX,OAAO;YACT;YAEA,MAAM,SAAiC,KAAK,KAAK,CAAC;YAElD,8BAA8B;YAC9B,IAAI,OAAO,OAAO,KAAK,iBAAiB;gBACtC;gBACA,OAAO;YACT;YAEA,mBAAmB;YACnB,MAAM,MAAM,KAAK,GAAG,KAAK,OAAO,IAAI,CAAC,SAAS;YAC9C,IAAI,MAAM,UAAU;gBAClB;gBACA,OAAO;YACT;YAEA,gCAAgC;YAChC,MAAM,EAAE,SAAS,EAAE,GAAG,UAAU,GAAG,OAAO,IAAI;YAC9C,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,IAAI,CAAC,+CAA+C;YAC5D;YACA,OAAO;QACT;IACF;IAEA;;GAEC,GACD,MAAM,YAAY;QAChB,IAAI;YACF,aAAa,UAAU,CAAC;QAC1B,EAAE,OAAO,OAAO;YACd,QAAQ,IAAI,CAAC,gDAAgD;QAC/D;IACF;IAEA;;GAEC,GACD,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,SAAS,aAAa,OAAO,CAAC;YAEpC,IAAI,CAAC,QAAQ;gBACX,OAAO;YACT;YAEA,MAAM,SAAiC,KAAK,KAAK,CAAC;YAElD,8BAA8B;YAC9B,IAAI,OAAO,OAAO,KAAK,iBAAiB;gBACtC,OAAO;YACT;YAEA,mBAAmB;YACnB,MAAM,MAAM,KAAK,GAAG,KAAK,OAAO,IAAI,CAAC,SAAS;YAC9C,OAAO,OAAO;QAChB,EAAE,OAAO,OAAO;YACd,OAAO;QACT;IACF;IAEA;;GAEC,GACD,MAAM,aAAa;QACjB,IAAI;YACF,MAAM,SAAS,aAAa,OAAO,CAAC;YAEpC,IAAI,CAAC,QAAQ;gBACX,OAAO;YACT;YAEA,MAAM,SAAiC,KAAK,KAAK,CAAC;YAClD,OAAO,KAAK,KAAK,CAAC,CAAC,KAAK,GAAG,KAAK,OAAO,IAAI,CAAC,SAAS,IAAI,CAAC,OAAO,EAAE,IAAI,UAAU;QACnF,EAAE,OAAO,OAAO;YACd,OAAO;QACT;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GA3HgB;AAgIT,SAAS;IACd,IAAI;QACF,MAAM,OAAO;QACb,aAAa,OAAO,CAAC,MAAM;QAC3B,aAAa,UAAU,CAAC;QACxB,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF"}},
    {"offset": {"line": 2632, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/utils/formValidation.ts"],"sourcesContent":["/**\n * Form validation utilities for Sakwood checkout\n * Thai-specific validation for phone numbers and postal codes\n */\n\nexport interface ValidationResult {\n  valid: boolean;\n  error?: string;\n}\n\n/**\n * Validate email address format\n */\nexport function validateEmail(email: string): ValidationResult {\n  if (!email || email.trim() === '') {\n    return { valid: false, error: 'Email is required' };\n  }\n\n  // Standard email regex pattern\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  if (!emailRegex.test(email)) {\n    return { valid: false, error: 'Please enter a valid email address' };\n  }\n\n  return { valid: true };\n}\n\n/**\n * Validate Thai phone number format\n * Accepts: 0xx-xxx-xxxx, 08x-xxx-xxxx, or 10 digits without dashes\n */\nexport function validateThaiPhone(phone: string): ValidationResult {\n  if (!phone || phone.trim() === '') {\n    return { valid: false, error: 'Phone number is required' };\n  }\n\n  // Remove all non-digit characters\n  const digitsOnly = phone.replace(/\\D/g, '');\n\n  // Must be exactly 10 digits\n  if (digitsOnly.length !== 10) {\n    return { valid: false, error: 'Please enter a valid Thai phone number (10 digits)' };\n  }\n\n  // Must start with 0\n  if (!digitsOnly.startsWith('0')) {\n    return { valid: false, error: 'Phone number must start with 0' };\n  }\n\n  return { valid: true };\n}\n\n/**\n * Validate Thai postal code format (5 digits)\n */\nexport function validateThaiPostalCode(postalCode: string): ValidationResult {\n  if (!postalCode || postalCode.trim() === '') {\n    return { valid: false, error: 'Postal code is required' };\n  }\n\n  // Remove all non-digit characters\n  const digitsOnly = postalCode.replace(/\\D/g, '');\n\n  // Must be exactly 5 digits\n  if (digitsOnly.length !== 5) {\n    return { valid: false, error: 'Please enter a 5-digit postal code' };\n  }\n\n  return { valid: true };\n}\n\n/**\n * Validate required field (not empty after trimming)\n */\nexport function validateRequired(value: string, fieldName: string = 'This field'): ValidationResult {\n  if (!value || value.trim() === '') {\n    return { valid: false, error: `${fieldName} is required` };\n  }\n\n  return { valid: true };\n}\n\n/**\n * Validate minimum length\n */\nexport function validateMinLength(value: string, minLength: number, fieldName: string = 'This field'): ValidationResult {\n  if (!value || value.length < minLength) {\n    return { valid: false, error: `${fieldName} must be at least ${minLength} characters` };\n  }\n\n  return { valid: true };\n}\n\n/**\n * Validate maximum length\n */\nexport function validateMaxLength(value: string, maxLength: number, fieldName: string = 'This field'): ValidationResult {\n  if (value && value.length > maxLength) {\n    return { valid: false, error: `${fieldName} must not exceed ${maxLength} characters` };\n  }\n\n  return { valid: true };\n}\n\n/**\n * Combines multiple validators - returns first error found\n */\nexport function validateField(\n  value: string,\n  validators: Array<(value: string) => ValidationResult>\n): ValidationResult {\n  for (const validator of validators) {\n    const result = validator(value);\n    if (!result.valid) {\n      return result;\n    }\n  }\n\n  return { valid: true };\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;;;AAUM,SAAS,cAAc,KAAa;IACzC,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,IAAI;QACjC,OAAO;YAAE,OAAO;YAAO,OAAO;QAAoB;IACpD;IAEA,+BAA+B;IAC/B,MAAM,aAAa;IACnB,IAAI,CAAC,WAAW,IAAI,CAAC,QAAQ;QAC3B,OAAO;YAAE,OAAO;YAAO,OAAO;QAAqC;IACrE;IAEA,OAAO;QAAE,OAAO;IAAK;AACvB;AAMO,SAAS,kBAAkB,KAAa;IAC7C,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,IAAI;QACjC,OAAO;YAAE,OAAO;YAAO,OAAO;QAA2B;IAC3D;IAEA,kCAAkC;IAClC,MAAM,aAAa,MAAM,OAAO,CAAC,OAAO;IAExC,4BAA4B;IAC5B,IAAI,WAAW,MAAM,KAAK,IAAI;QAC5B,OAAO;YAAE,OAAO;YAAO,OAAO;QAAqD;IACrF;IAEA,oBAAoB;IACpB,IAAI,CAAC,WAAW,UAAU,CAAC,MAAM;QAC/B,OAAO;YAAE,OAAO;YAAO,OAAO;QAAiC;IACjE;IAEA,OAAO;QAAE,OAAO;IAAK;AACvB;AAKO,SAAS,uBAAuB,UAAkB;IACvD,IAAI,CAAC,cAAc,WAAW,IAAI,OAAO,IAAI;QAC3C,OAAO;YAAE,OAAO;YAAO,OAAO;QAA0B;IAC1D;IAEA,kCAAkC;IAClC,MAAM,aAAa,WAAW,OAAO,CAAC,OAAO;IAE7C,2BAA2B;IAC3B,IAAI,WAAW,MAAM,KAAK,GAAG;QAC3B,OAAO;YAAE,OAAO;YAAO,OAAO;QAAqC;IACrE;IAEA,OAAO;QAAE,OAAO;IAAK;AACvB;AAKO,SAAS,iBAAiB,KAAa,EAAE,YAAoB,YAAY;IAC9E,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,IAAI;QACjC,OAAO;YAAE,OAAO;YAAO,OAAO,GAAG,UAAU,YAAY,CAAC;QAAC;IAC3D;IAEA,OAAO;QAAE,OAAO;IAAK;AACvB;AAKO,SAAS,kBAAkB,KAAa,EAAE,SAAiB,EAAE,YAAoB,YAAY;IAClG,IAAI,CAAC,SAAS,MAAM,MAAM,GAAG,WAAW;QACtC,OAAO;YAAE,OAAO;YAAO,OAAO,GAAG,UAAU,kBAAkB,EAAE,UAAU,WAAW,CAAC;QAAC;IACxF;IAEA,OAAO;QAAE,OAAO;IAAK;AACvB;AAKO,SAAS,kBAAkB,KAAa,EAAE,SAAiB,EAAE,YAAoB,YAAY;IAClG,IAAI,SAAS,MAAM,MAAM,GAAG,WAAW;QACrC,OAAO;YAAE,OAAO;YAAO,OAAO,GAAG,UAAU,iBAAiB,EAAE,UAAU,WAAW,CAAC;QAAC;IACvF;IAEA,OAAO;QAAE,OAAO;IAAK;AACvB;AAKO,SAAS,cACd,KAAa,EACb,UAAsD;IAEtD,KAAK,MAAM,aAAa,WAAY;QAClC,MAAM,SAAS,UAAU;QACzB,IAAI,CAAC,OAAO,KAAK,EAAE;YACjB,OAAO;QACT;IACF;IAEA,OAAO;QAAE,OAAO;IAAK;AACvB"}},
    {"offset": {"line": 2768, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/services/woocommerceService.ts"],"sourcesContent":["// WooCommerce API Service for Sakwood\r\n// Using custom WordPress endpoints - no API keys needed\r\n\r\nexport interface WooCommerceOrderData {\r\n  payment_method: string;\r\n  payment_method_title: string;\r\n  set_paid: boolean;\r\n  billing: {\r\n    first_name: string;\r\n    last_name: string;\r\n    address_1: string;\r\n    city: string;\r\n    state: string;\r\n    postcode: string;\r\n    email: string;\r\n    phone: string;\r\n  };\r\n  shipping: {\r\n    first_name: string;\r\n    last_name: string;\r\n    address_1: string;\r\n    city: string;\r\n    state: string;\r\n    postcode: string;\r\n  };\r\n  line_items: Array<{\r\n    product_id: number;\r\n    quantity: number;\r\n  }>;\r\n  shipping_lines: Array<{\r\n    method_id: string;\r\n    method_title: string;\r\n    total: string;\r\n  }>;\r\n  customer_note?: string;\r\n}\r\n\r\nexport interface WooCommerceResponse {\r\n  id: number;\r\n  order_key: string;\r\n  status: string;\r\n  success?: boolean;\r\n}\r\n\r\n/**\r\n * Create order in WooCommerce\r\n */\r\nexport async function createWooCommerceOrder(orderData: WooCommerceOrderData): Promise<WooCommerceResponse> {\r\n  try {\r\n    // Use custom endpoint that bypasses WooCommerce REST API authentication\r\n    const baseUrl = process.env.NEXT_PUBLIC_WORDPRESS_API_URL || 'http://localhost:8006/wp-json/sakwood/v1';\r\n    const url = `${baseUrl}/create-order`;\r\n\r\n    const response = await fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(orderData),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      console.error('Order creation error - Status:', response.status);\r\n      console.error('Order creation error - Response:', errorText);\r\n\r\n      // Try to parse error as JSON\r\n      try {\r\n        const errorJson = JSON.parse(errorText);\r\n        console.error('Parsed error JSON:', errorJson);\r\n        throw new Error(errorJson.message || errorJson.code || `HTTP error! status: ${response.status}`);\r\n      } catch {\r\n        throw new Error(`HTTP error! status: ${response.status} - ${errorText}`);\r\n      }\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log('Order created successfully:', data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error creating WooCommerce order:', error);\r\n    throw error;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,wDAAwD;;;;;AAiDpC;AAHb,eAAe,uBAAuB,SAA+B;IAC1E,IAAI;QACF,wEAAwE;QACxE,MAAM,UAAU,gFAA6C;QAC7D,MAAM,MAAM,GAAG,QAAQ,aAAa,CAAC;QAErC,MAAM,WAAW,MAAM,MAAM,KAAK;YAChC,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,QAAQ,KAAK,CAAC,kCAAkC,SAAS,MAAM;YAC/D,QAAQ,KAAK,CAAC,oCAAoC;YAElD,6BAA6B;YAC7B,IAAI;gBACF,MAAM,YAAY,KAAK,KAAK,CAAC;gBAC7B,QAAQ,KAAK,CAAC,sBAAsB;gBACpC,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI,UAAU,IAAI,IAAI,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;YACjG,EAAE,OAAM;gBACN,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,WAAW;YACzE;QACF;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,QAAQ,GAAG,CAAC,+BAA+B;QAC3C,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC;QACnD,MAAM;IACR;AACF"}},
    {"offset": {"line": 2815, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/app/%5Blang%5D/checkout/CheckoutPage.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useMemo, useEffect, useRef } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Breadcrumbs } from '@/components/layout/Breadcrumbs';\r\nimport { PromptPayQR } from '@/components/checkout';\r\nimport { PromptPayInstructions } from '@/components/checkout/PromptPayInstructions';\r\nimport { ProvinceSearch } from '@/components/checkout/ProvinceSearch';\r\nimport { useCart } from '@/lib/context/CartContext';\r\nimport { calculateShippingCost, getShippingRate, getAllProvinces, TruckType } from '@/lib/services/deliveryService';\r\nimport { useFormPersistence } from '@/lib/hooks/useFormPersistence';\r\nimport { validateEmail, validateThaiPhone, validateThaiPostalCode, validateRequired } from '@/lib/utils/formValidation';\r\nimport type { Locale } from '@/i18n-config';\r\nimport { createWooCommerceOrder, type WooCommerceOrderData } from '@/lib/services/woocommerceService';\r\n\r\ninterface CheckoutPageProps {\r\n  lang: Locale;\r\n  dictionary: {\r\n    common: {\r\n      home: string;\r\n    };\r\n    cart: {\r\n      page_title: string;\r\n      order_summary: string;\r\n      subtotal: string;\r\n      shipping: string;\r\n      total: string;\r\n      continue_shopping: string;\r\n    };\r\n    checkout: {\r\n      page_title: string;\r\n      contact_info: string;\r\n      email: string;\r\n      phone: string;\r\n      shipping_info: string;\r\n      first_name: string;\r\n      last_name: string;\r\n      address: string;\r\n      city: string;\r\n      province: string;\r\n      postal_code: string;\r\n      notes: string;\r\n      payment_method: string;\r\n      bank_transfer: string;\r\n      bank_transfer_desc: string;\r\n      cash_on_delivery: string;\r\n      cash_on_delivery_desc: string;\r\n      promptpay: string;\r\n      promptpay_desc: string;\r\n      scan_qr: string;\r\n      confirm_payment: string;\r\n      confirm_payment_error: string;\r\n      place_order: string;\r\n      back_to_cart: string;\r\n      select_province: string;\r\n      free_shipping: string;\r\n      estimated_delivery: string;\r\n      price_tier: string;\r\n      contact_sales: string;\r\n      add_line_friend: string;\r\n      restore_draft?: string;\r\n      search_province?: string;\r\n      no_province_results?: string;\r\n      invalid_email?: string;\r\n      invalid_phone?: string;\r\n      invalid_postal_code?: string;\r\n      field_required?: string;\r\n      network_error?: string;\r\n      timeout_error?: string;\r\n    };\r\n  };\r\n}\r\n\r\nexport function CheckoutPage({ lang, dictionary }: CheckoutPageProps) {\r\n  const { common, cart, checkout } = dictionary;\r\n  const { items, getCartTotal, clearCart } = useCart();\r\n  const router = useRouter();\r\n  const [mounted, setMounted] = useState(false);\r\n  const formInitializedRef = useRef(false);\r\n\r\n  // Form persistence hook\r\n  const { saveForm, loadForm, clearForm, hasSavedForm } = useFormPersistence('sakwood-checkout');\r\n\r\n  // Validation state\r\n  const [fieldErrors, setFieldErrors] = useState<Record<string, string>>({});\r\n  const [touchedFields, setTouchedFields] = useState<Set<string>>(new Set());\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  const [selectedProvince, setSelectedProvince] = useState('');\r\n  const [paymentConfirmed, setPaymentConfirmed] = useState(false);\r\n  const [paymentError, setPaymentError] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    lineId: '',\r\n    phone: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    address: '',\r\n    city: '',\r\n    postalCode: '',\r\n    notes: '',\r\n    paymentMethod: 'bank_transfer',\r\n  });\r\n\r\n  // Load saved form data on mount\r\n  useEffect(() => {\r\n    if (mounted && !formInitializedRef.current) {\r\n      const saved = loadForm();\r\n      if (saved) {\r\n        setFormData({\r\n          email: saved.email || '',\r\n          lineId: saved.lineId || '',\r\n          phone: saved.phone || '',\r\n          firstName: saved.firstName || '',\r\n          lastName: saved.lastName || '',\r\n          address: saved.address || '',\r\n          city: saved.city || '',\r\n          postalCode: saved.postalCode || '',\r\n          notes: saved.notes || '',\r\n          paymentMethod: saved.paymentMethod || 'bank_transfer',\r\n        });\r\n        setSelectedProvince(saved.province || '');\r\n      }\r\n      formInitializedRef.current = true;\r\n    }\r\n  }, [mounted, loadForm]);\r\n\r\n  // Auto-save form data on change\r\n  useEffect(() => {\r\n    if (mounted && formInitializedRef.current) {\r\n      saveForm({\r\n        ...formData,\r\n        province: selectedProvince,\r\n      });\r\n    }\r\n  }, [formData, selectedProvince, mounted, saveForm]);\r\n\r\n  const subtotal = getCartTotal();\r\n  const shippingResult = useMemo(() => {\r\n    if (selectedProvince) {\r\n      return calculateShippingCost(selectedProvince, subtotal, items);\r\n    }\r\n    return { cost: 0, truckType: TruckType.SMALL, truckTypeName: 'Small Truck (6-wheel)', priceTier: 'Standard' };\r\n  }, [selectedProvince, subtotal, items]);\r\n\r\n  const shippingCost = shippingResult.cost;\r\n  const truckType = shippingResult.truckType;\r\n  const truckTypeName = shippingResult.truckTypeName;\r\n  const priceTier = shippingResult.priceTier;\r\n\r\n  const total = subtotal + shippingCost;\r\n\r\n  const shippingInfo = useMemo(() => {\r\n    if (selectedProvince) {\r\n      return getShippingRate(selectedProvince);\r\n    }\r\n    return null;\r\n  }, [selectedProvince]);\r\n\r\n  const provinces = getAllProvinces();\r\n\r\n  // Field validation function\r\n  const validateField = (name: string, value: string): string | null => {\r\n    // Use dictionary keys for error messages if available\r\n    const errorMessages = {\r\n      email: checkout.invalid_email || 'Please enter a valid email address',\r\n      phone: checkout.invalid_phone || 'Please enter a valid Thai phone number (e.g., 081-234-5678)',\r\n      postalCode: checkout.invalid_postal_code || 'Please enter a 5-digit postal code',\r\n      firstName: checkout.field_required?.replace('This field', 'First name') || 'First name is required',\r\n      lastName: checkout.field_required?.replace('This field', 'Last name') || 'Last name is required',\r\n      address: checkout.field_required?.replace('This field', 'Address') || 'Address is required',\r\n      city: checkout.field_required?.replace('This field', 'City') || 'City is required',\r\n    };\r\n\r\n    switch (name) {\r\n      case 'email':\r\n        const emailResult = validateEmail(value);\r\n        return emailResult.valid ? null : errorMessages.email;\r\n      case 'phone':\r\n        const phoneResult = validateThaiPhone(value);\r\n        return phoneResult.valid ? null : errorMessages.phone;\r\n      case 'postalCode':\r\n        const postalResult = validateThaiPostalCode(value);\r\n        return postalResult.valid ? null : errorMessages.postalCode;\r\n      case 'firstName':\r\n      case 'lastName':\r\n      case 'address':\r\n      case 'city': {\r\n        const requiredResult = validateRequired(value, name === 'firstName' ? 'First name' : name === 'lastName' ? 'Last name' : name);\r\n        return requiredResult.valid ? null : errorMessages[name as keyof typeof errorMessages];\r\n      }\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  // Handle blur validation\r\n  const handleBlur = (fieldName: string) => {\r\n    setTouchedFields(prev => new Set(prev).add(fieldName));\r\n    const error = validateField(fieldName, formData[fieldName as keyof typeof formData]);\r\n    setFieldErrors(prev => ({ ...prev, [fieldName]: error || '' }));\r\n  };\r\n\r\n  const handleProvinceChange = (province: string) => {\r\n    setSelectedProvince(province);\r\n  };\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value,\r\n    });\r\n\r\n    // Clear error for this field if user is typing\r\n    if (touchedFields.has(name)) {\r\n      const error = validateField(name, value);\r\n      setFieldErrors(prev => ({ ...prev, [name]: error || '' }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    // Prevent double submission\r\n    if (isSubmitting) {\r\n      return;\r\n    }\r\n\r\n    // Validate all required fields\r\n    const requiredFields = ['email', 'phone', 'firstName', 'lastName', 'address', 'city', 'postalCode'];\r\n    const errors: Record<string, string> = {};\r\n\r\n    for (const field of requiredFields) {\r\n      const error = validateField(field, formData[field as keyof typeof formData]);\r\n      if (error) {\r\n        errors[field] = error;\r\n      }\r\n    }\r\n\r\n    // Validate province\r\n    if (!selectedProvince) {\r\n      errors.province = checkout.field_required?.replace('This field', 'Province') || 'Please select a province';\r\n    }\r\n\r\n    // Validate PromptPay confirmation\r\n    if (formData.paymentMethod === 'promptpay' && !paymentConfirmed) {\r\n      setPaymentError(checkout.confirm_payment_error);\r\n      return;\r\n    }\r\n\r\n    // Set all fields as touched\r\n    setTouchedFields(new Set(requiredFields));\r\n\r\n    // If there are errors, display them and prevent submission\r\n    if (Object.keys(errors).length > 0) {\r\n      setFieldErrors(errors);\r\n\r\n      // Scroll to first error\r\n      const firstErrorField = document.querySelector(`[name=\"${Object.keys(errors)[0]}\"]`) as HTMLElement;\r\n      if (firstErrorField) {\r\n        firstErrorField.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        firstErrorField.focus();\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Clear any previous payment error\r\n    setPaymentError('');\r\n    setIsSubmitting(true);\r\n\r\n    // Map payment method to WooCommerce payment method\r\n    const paymentMethodMap: Record<string, { method: string; title: string }> = {\r\n      'bank_transfer': { method: 'bacs', title: 'Bank Transfer' },\r\n      'cash_on_delivery': { method: 'cod', title: 'Cash on Delivery' },\r\n      'promptpay': { method: 'promptpay', title: 'PromptPay' },\r\n    };\r\n\r\n    const paymentInfo = paymentMethodMap[formData.paymentMethod] || { method: 'bacs', title: 'Bank Transfer' };\r\n\r\n    // Create WooCommerce order data object\r\n    const orderData: WooCommerceOrderData = {\r\n      payment_method: paymentInfo.method,\r\n      payment_method_title: paymentInfo.title,\r\n      set_paid: false,\r\n      billing: {\r\n        first_name: formData.firstName,\r\n        last_name: formData.lastName,\r\n        address_1: formData.address,\r\n        city: formData.city,\r\n        state: selectedProvince,\r\n        postcode: formData.postalCode,\r\n        email: formData.email,\r\n        phone: formData.phone,\r\n      },\r\n      shipping: {\r\n        first_name: formData.firstName,\r\n        last_name: formData.lastName,\r\n        address_1: formData.address,\r\n        city: formData.city,\r\n        state: selectedProvince,\r\n        postcode: formData.postalCode,\r\n      },\r\n      line_items: items.map(item => ({\r\n        product_id: item.databaseId,\r\n        quantity: item.quantity,\r\n      })),\r\n      shipping_lines: [\r\n        {\r\n          method_id: 'flat_rate',\r\n          method_title: truckTypeName || 'Standard Shipping',\r\n          total: shippingCost.toFixed(2),\r\n        },\r\n      ],\r\n      customer_note: formData.notes + (formData.lineId ? `\\n\\nLINE ID: ${formData.lineId}` : ''),\r\n    };\r\n\r\n    try {\r\n      // Submit to WooCommerce API\r\n      const result = await createWooCommerceOrder(orderData);\r\n\r\n      // Clear saved form data and cart after successful order\r\n      clearForm();\r\n      clearCart();\r\n\r\n      // Redirect to order success page\r\n      router.push(`/${lang}/checkout/success?orderId=${result.id}`);\r\n    } catch (error) {\r\n      console.error('Error submitting order:', error);\r\n\r\n      // Better error messages based on error type\r\n      let errorMessage = 'Failed to submit order. Please try again.';\r\n\r\n      if (error instanceof Error) {\r\n        const errorLower = error.message.toLowerCase();\r\n        if (errorLower.includes('network') || errorLower.includes('fetch')) {\r\n          errorMessage = checkout.network_error || 'Network error. Please check your connection and try again.';\r\n        } else if (errorLower.includes('timeout')) {\r\n          errorMessage = checkout.timeout_error || 'Request timed out. Please try again.';\r\n        } else {\r\n          errorMessage = error.message;\r\n        }\r\n      }\r\n\r\n      setPaymentError(errorMessage);\r\n      setIsSubmitting(false);\r\n\r\n      // Scroll to error message\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  const breadcrumbItems = [\r\n    { name: common.home, href: `/${lang}` },\r\n    { name: cart.page_title, href: `/${lang}/cart` },\r\n    { name: checkout.page_title, href: `/${lang}/checkout` }\r\n  ];\r\n\r\n  if (!mounted) {\r\n    return (\r\n      <main className=\"min-h-screen py-12\">\r\n        <Breadcrumbs items={breadcrumbItems} lang={lang} />\r\n        <div className=\"max-w-7xl mx-auto px-6\">\r\n          <div className=\"bg-white rounded-lg p-12 text-center\">\r\n            <div className=\"animate-pulse\">\r\n              <div className=\"h-8 bg-gray-200 rounded w-1/3 mx-auto mb-4\"></div>\r\n              <div className=\"h-4 bg-gray-200 rounded w-1/2 mx-auto\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  if (items.length === 0) {\r\n    return (\r\n      <main className=\"min-h-screen py-12\">\r\n        <Breadcrumbs items={breadcrumbItems} lang={lang} />\r\n        <div className=\"max-w-7xl mx-auto px-6\">\r\n          <div className=\"bg-gray-50 rounded-lg p-12 text-center\">\r\n            <h2 className=\"text-2xl font-bold text-gray-600 mb-4\">\r\n              Your cart is empty\r\n            </h2>\r\n            <a\r\n              href={`/${lang}/shop`}\r\n              className=\"inline-block px-6 py-3 bg-blue-900 text-white font-bold hover:bg-blue-800 transition-all rounded-none uppercase tracking-wide\"\r\n            >\r\n              Continue Shopping\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-screen py-12\">\r\n      <Breadcrumbs items={breadcrumbItems} lang={lang} />\r\n      \r\n      <div className=\"max-w-7xl mx-auto px-6\">\r\n        <h1 className=\"text-3xl md:text-4xl font-bold text-blue-900 mb-8\">\r\n          {checkout.page_title}\r\n        </h1>\r\n\r\n        {/* Restore Draft Indicator */}\r\n        {hasSavedForm() && (\r\n          <div className=\"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3\">\r\n            <svg className=\"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n            </svg>\r\n            <p className=\"text-sm text-yellow-800\">\r\n              {checkout.restore_draft || 'We found your unfinished order. Your information has been restored.'}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"grid lg:grid-cols-3 gap-8\">\r\n            {/* Checkout Form */}\r\n            <div className=\"lg:col-span-2 space-y-6\">\r\n              {/* Contact Information */}\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <h2 className=\"text-xl font-bold text-blue-900 mb-4\">\r\n                  {checkout.contact_info}\r\n                </h2>\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label htmlFor=\"email\" className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                      Email *\r\n                    </label>\r\n                    <input\r\n                      type=\"email\"\r\n                      id=\"email\"\r\n                      name=\"email\"\r\n                      required\r\n                      value={formData.email}\r\n                      onChange={handleInputChange}\r\n                      onBlur={() => handleBlur('email')}\r\n                      className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:border-blue-500 outline-none transition-all ${\r\n                        fieldErrors.email ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'\r\n                      }`}\r\n                      placeholder=\"your@email.com\"\r\n                    />\r\n                    {touchedFields.has('email') && fieldErrors.email && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{fieldErrors.email}</p>\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"lineId\" className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                      LINE ID\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"lineId\"\r\n                      name=\"lineId\"\r\n                      value={formData.lineId}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all\"\r\n                      placeholder=\"your_line_id\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"phone\" className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                      {checkout.phone} *\r\n                    </label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      id=\"phone\"\r\n                      name=\"phone\"\r\n                      required\r\n                      value={formData.phone}\r\n                      onChange={handleInputChange}\r\n                      onBlur={() => handleBlur('phone')}\r\n                      className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:border-blue-500 outline-none transition-all ${\r\n                        fieldErrors.phone ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'\r\n                      }`}\r\n                      placeholder=\"081-234-5678\"\r\n                    />\r\n                    {touchedFields.has('phone') && fieldErrors.phone && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{fieldErrors.phone}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Shipping Information */}\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <h2 className=\"text-xl font-bold text-blue-900 mb-4\">\r\n                  {checkout.shipping_info}\r\n                </h2>\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"grid md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label htmlFor=\"firstName\" className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                        {checkout.first_name} *\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"firstName\"\r\n                        name=\"firstName\"\r\n                        required\r\n                        value={formData.firstName}\r\n                        onChange={handleInputChange}\r\n                        onBlur={() => handleBlur('firstName')}\r\n                        className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:border-blue-500 outline-none transition-all ${\r\n                          fieldErrors.firstName ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'\r\n                        }`}\r\n                        placeholder=\"John\"\r\n                      />\r\n                      {touchedFields.has('firstName') && fieldErrors.firstName && (\r\n                        <p className=\"mt-1 text-sm text-red-600\">{fieldErrors.firstName}</p>\r\n                      )}\r\n                    </div>\r\n                    <div>\r\n                      <label htmlFor=\"lastName\" className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                        {checkout.last_name} *\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"lastName\"\r\n                        name=\"lastName\"\r\n                        required\r\n                        value={formData.lastName}\r\n                        onChange={handleInputChange}\r\n                        onBlur={() => handleBlur('lastName')}\r\n                        className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:border-blue-500 outline-none transition-all ${\r\n                          fieldErrors.lastName ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'\r\n                        }`}\r\n                        placeholder=\"Doe\"\r\n                      />\r\n                      {touchedFields.has('lastName') && fieldErrors.lastName && (\r\n                        <p className=\"mt-1 text-sm text-red-600\">{fieldErrors.lastName}</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"address\" className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                      {checkout.address} *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"address\"\r\n                      name=\"address\"\r\n                      required\r\n                      value={formData.address}\r\n                      onChange={handleInputChange}\r\n                      onBlur={() => handleBlur('address')}\r\n                      className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:border-blue-500 outline-none transition-all ${\r\n                        fieldErrors.address ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'\r\n                      }`}\r\n                      placeholder=\"123 Street Name\"\r\n                    />\r\n                    {touchedFields.has('address') && fieldErrors.address && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{fieldErrors.address}</p>\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"city\" className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                      {checkout.city} *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"city\"\r\n                      name=\"city\"\r\n                      required\r\n                      value={formData.city}\r\n                      onChange={handleInputChange}\r\n                      onBlur={() => handleBlur('city')}\r\n                      className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:border-blue-500 outline-none transition-all ${\r\n                        fieldErrors.city ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'\r\n                      }`}\r\n                      placeholder=\"Bangkok\"\r\n                    />\r\n                    {touchedFields.has('city') && fieldErrors.city && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{fieldErrors.city}</p>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"grid md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label htmlFor=\"province\" className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                        {checkout.province} *\r\n                      </label>\r\n                      <ProvinceSearch\r\n                        provinces={provinces}\r\n                        value={selectedProvince}\r\n                        onChange={handleProvinceChange}\r\n                        placeholder={checkout.search_province || checkout.select_province}\r\n                        lang={lang}\r\n                      />\r\n                      {fieldErrors.province && (\r\n                        <p className=\"mt-1 text-sm text-red-600\">{fieldErrors.province}</p>\r\n                      )}\r\n                    </div>\r\n                    <div>\r\n                      <label htmlFor=\"postalCode\" className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                        {checkout.postal_code} *\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"postalCode\"\r\n                        name=\"postalCode\"\r\n                        required\r\n                        value={formData.postalCode}\r\n                        onChange={handleInputChange}\r\n                        onBlur={() => handleBlur('postalCode')}\r\n                        className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:border-blue-500 outline-none transition-all ${\r\n                          fieldErrors.postalCode ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'\r\n                        }`}\r\n                        placeholder=\"10110\"\r\n                      />\r\n                      {touchedFields.has('postalCode') && fieldErrors.postalCode && (\r\n                        <p className=\"mt-1 text-sm text-red-600\">{fieldErrors.postalCode}</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"notes\" className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                      {checkout.notes}\r\n                    </label>\r\n                    <textarea\r\n                      id=\"notes\"\r\n                      name=\"notes\"\r\n                      rows={3}\r\n                      value={formData.notes}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none\"\r\n                      placeholder=\"Special instructions for delivery...\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Payment Method */}\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <h2 className=\"text-xl font-bold text-blue-900 mb-4\">\r\n                  {checkout.payment_method}\r\n                </h2>\r\n                <div className=\"space-y-3\">\r\n                  <label className=\"flex items-center gap-3 p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-blue-500 transition-colors\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"payment\"\r\n                      value=\"bank_transfer\"\r\n                      checked={formData.paymentMethod === 'bank_transfer'}\r\n                      onChange={() => setFormData({ ...formData, paymentMethod: 'bank_transfer' })}\r\n                      className=\"w-4 h-4 text-blue-900 focus:ring-blue-500\"\r\n                    />\r\n                    <div>\r\n                      <span className=\"font-semibold text-gray-900\">{checkout.bank_transfer}</span>\r\n                      <p className=\"text-sm text-gray-500\">{checkout.bank_transfer_desc}</p>\r\n                    </div>\r\n                  </label>\r\n                  <label className=\"flex items-center gap-3 p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-blue-500 transition-colors\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"payment\"\r\n                      value=\"cash_on_delivery\"\r\n                      checked={formData.paymentMethod === 'cash_on_delivery'}\r\n                      onChange={() => setFormData({ ...formData, paymentMethod: 'cash_on_delivery' })}\r\n                      className=\"w-4 h-4 text-blue-900 focus:ring-blue-500\"\r\n                    />\r\n                    <div>\r\n                      <span className=\"font-semibold text-gray-900\">{checkout.cash_on_delivery}</span>\r\n                      <p className=\"text-sm text-gray-500\">{checkout.cash_on_delivery_desc}</p>\r\n                    </div>\r\n                  </label>\r\n                  <label className=\"flex items-center gap-3 p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-blue-500 transition-colors\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"payment\"\r\n                      value=\"promptpay\"\r\n                      checked={formData.paymentMethod === 'promptpay'}\r\n                      onChange={() => setFormData({ ...formData, paymentMethod: 'promptpay' })}\r\n                      className=\"w-4 h-4 text-blue-900 focus:ring-blue-500\"\r\n                    />\r\n                    <div>\r\n                      <span className=\"font-semibold text-gray-900\">{checkout.promptpay}</span>\r\n                      <p className=\"text-sm text-gray-500\">{checkout.promptpay_desc}</p>\r\n                    </div>\r\n                  </label>\r\n                </div>\r\n\r\n                {/* PromptPay QR Code */}\r\n                {formData.paymentMethod === 'promptpay' && (\r\n                  <div className=\"mt-4 space-y-6\">\r\n                    <div className=\"bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg p-6 border border-blue-200\">\r\n                      <h3 className=\"text-lg font-bold text-blue-900 mb-4 text-center\">{checkout.scan_qr}</h3>\r\n                      <div className=\"flex justify-center\">\r\n                        <PromptPayQR\r\n                          merchantId=\"0225559000467\"\r\n                          amount={total}\r\n                          size={280}\r\n                          showMerchantInfo={true}\r\n                          orderRef={`ORDER-${Date.now()}`}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Payment Instructions */}\r\n                    <PromptPayInstructions />\r\n\r\n                    {/* Payment Confirmation Checkbox */}\r\n                    <div className=\"bg-white rounded-lg p-4 border border-gray-200\">\r\n                      <label className=\"flex items-start gap-3 cursor-pointer\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={paymentConfirmed}\r\n                          onChange={(e) => {\r\n                            setPaymentConfirmed(e.target.checked);\r\n                            if (e.target.checked) {\r\n                              setPaymentError('');\r\n                            }\r\n                          }}\r\n                          className=\"mt-1 w-5 h-5 text-blue-900 focus:ring-blue-500 rounded\"\r\n                        />\r\n                        <span className=\"text-sm text-gray-700\">\r\n                          {checkout.confirm_payment}\r\n                        </span>\r\n                      </label>\r\n                      {paymentError && (\r\n                        <p className=\"mt-3 text-sm text-red-600 font-semibold bg-red-50 p-2 rounded\">\r\n                          {paymentError}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Order Summary */}\r\n            <div className=\"lg:col-span-1\">\r\n              <div className=\"bg-white rounded-lg shadow-md p-6 sticky top-4\">\r\n                <h2 className=\"text-xl font-bold text-blue-900 mb-4\">\r\n                  {cart.order_summary}\r\n                </h2>\r\n\r\n                <div className=\"space-y-3 mb-6\">\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-gray-600\">{cart.subtotal}:</span>\r\n                    <span className=\"font-semibold text-blue-900\">\r\n                      {subtotal.toFixed(2)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-gray-600\">{cart.shipping}:</span>\r\n                    <span className=\"font-semibold text-blue-900\">\r\n                      {shippingCost === 0 && subtotal >= 10000 ? (\r\n                        <span className=\"text-green-600\">{checkout.free_shipping}</span>\r\n                      ) : (\r\n                        `${shippingCost.toFixed(2)}`\r\n                      )}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {priceTier && priceTier !== 'Standard' && (\r\n                    <div className=\"text-sm text-green-600 bg-green-50 p-2 rounded\">\r\n                      {priceTier === 'Free' ? checkout.free_shipping : `${checkout.price_tier}: ${priceTier}`}\r\n                    </div>\r\n                  )}\r\n\r\n                  {truckTypeName && (\r\n                    <div className=\"text-sm text-blue-600 bg-blue-50 p-2 rounded\">\r\n                      Truck Type: {truckTypeName}\r\n                    </div>\r\n                  )}\r\n\r\n                  {shippingInfo && shippingInfo.estimatedDays && (\r\n                    <div className=\"text-sm text-gray-500 bg-blue-50 p-2 rounded\">\r\n                      {checkout.estimated_delivery}: {shippingInfo.estimatedDays} days\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"border-t border-gray-200 pt-3 flex justify-between items-center\">\r\n                    <span className=\"text-lg font-bold text-blue-900\">{cart.total}:</span>\r\n                    <span className=\"text-2xl font-bold text-blue-900\">\r\n                      {total.toFixed(2)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"mt-4 pt-3 border-t border-gray-200 flex justify-center\">\r\n                    <a\r\n                      href=\"https://lin.ee/v86CTkq\"\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"inline-block w-full\"\r\n                    >\r\n                      <img\r\n                        src=\"https://scdn.line-apps.com/n/line_add_friends/btn/th.png\"\r\n                        alt={checkout.add_line_friend}\r\n                        className=\"h-16 w-full object-contain\"\r\n                      />\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={isSubmitting}\r\n                  className=\"w-full px-6 py-4 bg-blue-900 text-white font-bold hover:bg-blue-800 transition-all uppercase tracking-wide rounded-none disabled:bg-gray-400 disabled:cursor-not-allowed\"\r\n                >\r\n                  {isSubmitting ? 'Processing...' : checkout.place_order}\r\n                </button>\r\n\r\n                {paymentError && (\r\n                  <div className=\"mt-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg\">\r\n                    <p className=\"font-semibold\">Order Failed</p>\r\n                    <p className=\"text-sm\">{paymentError}</p>\r\n                  </div>\r\n                )}\r\n\r\n                <a\r\n                  href={`/${lang}/cart`}\r\n                  className=\"block text-center mt-4 text-blue-600 hover:text-blue-800 font-semibold transition-colors\"\r\n                >\r\n                  {checkout.back_to_cart}\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}