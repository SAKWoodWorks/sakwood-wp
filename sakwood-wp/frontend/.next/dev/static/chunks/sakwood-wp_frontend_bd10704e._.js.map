{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/graphql/client.ts"],"sourcesContent":["import { API_CONFIG } from '@/lib/config/constants';\r\n\r\nexport async function graphqlRequest<T>(\r\n  query: string,\r\n  variables?: Record<string, any>\r\n): Promise<T | null> {\r\n  try {\r\n    const res = await fetch(API_CONFIG.endpoint, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ query, variables }),\r\n      cache: API_CONFIG.cache,\r\n    });\r\n\r\n    if (!res.ok) {\r\n      throw new Error(`HTTP error! status: ${res.status}`);\r\n    }\r\n\r\n    const json = await res.json();\r\n\r\n    if (json.errors) {\r\n      console.error('GraphQL Errors:', json.errors.map((e: any) => e.message));\r\n      console.error('Full error details:', json.errors);\r\n      return null;\r\n    }\r\n\r\n    return json.data;\r\n  } catch (error) {\r\n    console.error('GraphQL request failed:', error);\r\n    return null;\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,eACpB,KAAa,EACb,SAA+B;IAE/B,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,wKAAU,CAAC,QAAQ,EAAE;YAC3C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAU;YACxC,OAAO,wKAAU,CAAC,KAAK;QACzB;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,IAAI,MAAM,EAAE;QACrD;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,IAAI,KAAK,MAAM,EAAE;YACf,QAAQ,KAAK,CAAC,mBAAmB,KAAK,MAAM,CAAC,GAAG,CAAC,CAAC,IAAW,EAAE,OAAO;YACtE,QAAQ,KAAK,CAAC,uBAAuB,KAAK,MAAM;YAChD,OAAO;QACT;QAEA,OAAO,KAAK,IAAI;IAClB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO;IACT;AACF"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/graphql/queries.ts"],"sourcesContent":["import { ProductsResponse, ProductResponse, MenuResponse, BlogPostsResponse, BlogPostResponse, PromoBannersResponse } from '@/lib/types';\r\n\r\nexport const GET_PRODUCT_CATEGORIES_QUERY = `\r\n  query GetProductCategories {\r\n    productCategories(first: 100, where: { hideEmpty: true }) {\r\n      nodes {\r\n        id\r\n        name\r\n        slug\r\n        count\r\n        description\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_HERO_SLIDES_QUERY = `\r\n  query GetHeroSlides {\r\n    heroSlides(first: 10, where: {status: PUBLISH}) {\r\n      nodes {\r\n        id\r\n        title\r\n        slug\r\n        status\r\n        featuredImage {\r\n          node {\r\n            sourceUrl\r\n            altText\r\n          }\r\n        }\r\n        slideSubtitle\r\n        slideDescription\r\n        slideCtaText\r\n        slideCtaLink\r\n        slideTextColor\r\n        slideOverlay\r\n        slidePosition\r\n        slideVideo\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PRODUCTS_QUERY = `\r\n  query GetProducts($first: Int) {\r\n    products(first: $first) {\r\n      nodes {\r\n        id\r\n        databaseId\r\n        name\r\n        slug\r\n        image {\r\n          sourceUrl\r\n        }\r\n        width\r\n        length\r\n        thickness\r\n        volume\r\n        productCategories {\r\n          nodes {\r\n            id\r\n            name\r\n            slug\r\n          }\r\n        }\r\n        ... on SimpleProduct {\r\n          price\r\n          regularPrice\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PRODUCT_QUERY = `\r\n  query GetProduct($slug: ID!) {\r\n    product(id: $slug, idType: SLUG) {\r\n      id\r\n      databaseId\r\n      name\r\n      slug\r\n      description\r\n      image {\r\n        sourceUrl\r\n      }\r\n      galleryImages {\r\n        nodes {\r\n          sourceUrl\r\n          altText\r\n        }\r\n      }\r\n      width\r\n      length\r\n      thickness\r\n      volume\r\n      ... on SimpleProduct {\r\n        price\r\n        regularPrice\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_MENU_QUERY = `\r\n  query GetMenu($location: MenuLocationEnum!) {\r\n    menuItems(where: { location: $location }) {\r\n      nodes {\r\n        id\r\n        label\r\n        path\r\n        url\r\n        target\r\n        description\r\n        parentId\r\n        order\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_BLOG_POSTS_QUERY = `\r\n  query GetBlogPosts($first: Int) {\r\n    posts(first: $first, where: { orderby: { field: DATE, order: DESC } }) {\r\n      nodes {\r\n        id\r\n        title\r\n        slug\r\n        excerpt\r\n        date\r\n        featuredImage {\r\n          node {\r\n            sourceUrl\r\n            altText\r\n          }\r\n        }\r\n        author {\r\n          node {\r\n            name\r\n          }\r\n        }\r\n        categories {\r\n          nodes {\r\n            name\r\n            slug\r\n          }\r\n        }\r\n        tags {\r\n          nodes {\r\n            name\r\n            slug\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_BLOG_POST_QUERY = `\r\n  query GetBlogPost($slug: ID!) {\r\n    post(id: $slug, idType: SLUG) {\r\n      id\r\n      title\r\n      slug\r\n      content\r\n      date\r\n      featuredImage {\r\n        node {\r\n          sourceUrl\r\n          altText\r\n          caption\r\n        }\r\n      }\r\n      author {\r\n        node {\r\n          name\r\n          avatar {\r\n            url\r\n          }\r\n        }\r\n      }\r\n      categories {\r\n        nodes {\r\n          name\r\n          slug\r\n        }\r\n      }\r\n      tags {\r\n        nodes {\r\n          name\r\n          slug\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PROMO_BANNERS_QUERY = `\r\n  query GetPromoBanners {\r\n    promoBanners(first: 20, where: {status: PUBLISH, orderby: {field: DATE, order: DESC}}) {\r\n      nodes {\r\n        id\r\n        databaseId\r\n        title\r\n        slug\r\n        date\r\n        bannerType\r\n        bannerContentTh\r\n        bannerContentEn\r\n        bannerLink\r\n        buttonTextTh\r\n        buttonTextEn\r\n        backgroundColor\r\n        textColor\r\n        bannerImage {\r\n          sourceUrl\r\n          altText\r\n          mediaItemId\r\n        }\r\n        scheduleStart\r\n        scheduleEnd\r\n        targeting {\r\n          deviceTypes\r\n          showOnPages\r\n          visitorType\r\n          maxImpressions\r\n          displayDelay\r\n        }\r\n        abTestGroup\r\n        isActive\r\n      }\r\n    }\r\n  }\r\n`;\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAEO,MAAM,+BAA+B,CAAC;;;;;;;;;;;;AAY7C,CAAC;AAEM,MAAM,wBAAwB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBtC,CAAC;AAEM,MAAM,qBAAqB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BnC,CAAC;AAEM,MAAM,oBAAoB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BlC,CAAC;AAEM,MAAM,iBAAiB,CAAC;;;;;;;;;;;;;;;AAe/B,CAAC;AAEM,MAAM,uBAAuB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCrC,CAAC;AAEM,MAAM,sBAAsB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCpC,CAAC;AAEM,MAAM,0BAA0B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCxC,CAAC"}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/lib/services/productService.ts"],"sourcesContent":["import { graphqlRequest } from '@/lib/graphql/client';\r\nimport { GET_PRODUCTS_QUERY, GET_PRODUCT_QUERY, GET_PRODUCT_CATEGORIES_QUERY } from '@/lib/graphql/queries';\r\nimport { Product, ProductResponse, ProductImage, ProductCategory, ProductCategoriesResponse } from '@/lib/types';\r\nimport { APP_CONFIG } from '@/lib/config/constants';\r\n\r\n/**\r\n * Transform internal Docker URLs to publicly accessible URLs\r\n * Replaces http://sak_wp:80/ with http://localhost:8006/\r\n */\r\nfunction transformImageUrl(url: string | undefined): string | undefined {\r\n  if (!url) return undefined;\r\n  return url.replace('http://sak_wp:80/', 'http://localhost:8006/');\r\n}\r\n\r\n/**\r\n * Transform product image URLs\r\n */\r\nfunction transformProductImage(image?: ProductImage): ProductImage | undefined {\r\n  if (!image) return undefined;\r\n  const transformedUrl = transformImageUrl(image.sourceUrl);\r\n  if (!transformedUrl) return undefined;\r\n  return {\r\n    ...image,\r\n    sourceUrl: transformedUrl,\r\n  };\r\n}\r\n\r\n/**\r\n * Get product categories\r\n * Returns list of categories with product counts\r\n */\r\nexport async function getProductCategories(): Promise<ProductCategory[]> {\r\n  try {\r\n    const data = await graphqlRequest<ProductCategoriesResponse>(GET_PRODUCT_CATEGORIES_QUERY);\r\n    return data?.productCategories?.nodes || [];\r\n  } catch (error) {\r\n    console.error('Error fetching product categories:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport type ProductSortBy = 'name' | 'price' | 'date';\r\n\r\n/**\r\n * Helper function to parse price string to number\r\n * Handles Thai currency format (฿) and commas\r\n */\r\nfunction parsePrice(priceStr?: string): number {\r\n  if (!priceStr) return 0;\r\n  // Remove currency symbol, commas, and whitespace\r\n  const numericStr = priceStr.replace(/[฿$,,\\s]/g, '');\r\n  const parsed = parseFloat(numericStr);\r\n  return isNaN(parsed) ? 0 : parsed;\r\n}\r\n\r\n/**\r\n * Sort products by specified field\r\n */\r\nfunction sortProducts(products: Product[], sortBy: ProductSortBy): Product[] {\r\n  const sorted = [...products];\r\n\r\n  switch (sortBy) {\r\n    case 'name':\r\n      return sorted.sort((a, b) => a.name.localeCompare(b.name, 'th'));\r\n\r\n    case 'price':\r\n      return sorted.sort((a, b) => {\r\n        const priceA = parsePrice(a.price);\r\n        const priceB = parsePrice(b.price);\r\n        return priceA - priceB;\r\n      });\r\n\r\n    case 'date':\r\n      // For now, sort by database ID as a proxy for date\r\n      // You may want to add a date field to the Product type in the future\r\n      return sorted.sort((a, b) => b.databaseId - a.databaseId);\r\n\r\n    default:\r\n      return sorted;\r\n  }\r\n}\r\n\r\n/**\r\n * Get products via REST API with language filtering\r\n * Uses custom endpoint: /wp-json/sakwood/v1/products?language=th\r\n * @param language - Language code ('th' or 'en')\r\n * @param categorySlug - Optional category slug to filter by\r\n * @param sortBy - Optional sort field ('name', 'price', 'date')\r\n */\r\nexport async function getProducts(\r\n  language: string = 'th',\r\n  categorySlug?: string,\r\n  sortBy?: ProductSortBy\r\n): Promise<Product[]> {\r\n  try {\r\n    const baseUrl = process.env.NEXT_PUBLIC_WORDPRESS_GRAPHQL_URL?.replace('/graphql', '') || 'http://localhost:8006';\r\n    let url = `${baseUrl}/wp-json/sakwood/v1/products?language=${language}&per_page=${APP_CONFIG.productsPerPage}`;\r\n\r\n    // Add category filter if provided\r\n    if (categorySlug) {\r\n      url += `&category=${encodeURIComponent(categorySlug)}`;\r\n    }\r\n\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      console.error('Failed to fetch products:', response.status);\r\n      // Fall back to GraphQL\r\n      return getProductsViaGraphQL(language);\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    // Handle empty array\r\n    if (!Array.isArray(data) || data.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Transform data to match Product interface\r\n    const products = data.map((product: any) => ({\r\n      id: String(product.id),\r\n      databaseId: product.databaseId,\r\n      name: product.name,\r\n      slug: product.slug,\r\n      sku: product.sku || undefined,\r\n      language: product.language || 'th',\r\n      price: product.price || product.prices?.piece || undefined,\r\n      regularPrice: product.regularPrice || undefined,\r\n      priceTypes: product.priceTypes || ['piece'],\r\n      prices: product.prices || {},\r\n      image: product.image ? { sourceUrl: product.image.sourceUrl } : undefined,\r\n      description: '',\r\n      galleryImages: undefined,\r\n      // Include dimensions\r\n      thickness: product.thickness || undefined,\r\n      width: product.width || undefined,\r\n      length: product.length || undefined,\r\n      // Include categories if available\r\n      categories: product.categories ? product.categories.map((cat: any) => ({\r\n        id: cat.id,\r\n        name: cat.name,\r\n        slug: cat.slug,\r\n      })) : undefined,\r\n    }));\r\n\r\n    // Sort products if sortBy is provided\r\n    if (sortBy) {\r\n      return sortProducts(products, sortBy);\r\n    }\r\n\r\n    return products;\r\n  } catch (error) {\r\n    console.error('Error fetching products via REST API:', error);\r\n    // Fall back to GraphQL\r\n    return getProductsViaGraphQL(language);\r\n  }\r\n}\r\n\r\n/**\r\n * Fallback: Get products via GraphQL (no language filtering)\r\n */\r\nasync function getProductsViaGraphQL(language: string = 'th'): Promise<Product[]> {\r\n  const data = await graphqlRequest<any>(GET_PRODUCTS_QUERY, { first: 10 });\r\n  const products = data?.products?.nodes || [];\r\n\r\n  // Transform image URLs\r\n  return products.map((product: any) => ({\r\n    ...product,\r\n    image: product.image ? transformProductImage(product.image) : undefined,\r\n    categories: product.productCategories?.nodes?.map((cat: any) => ({\r\n      id: cat.id,\r\n      name: cat.name,\r\n      slug: cat.slug,\r\n    })) || [],\r\n  }));\r\n}\r\n\r\n/**\r\n * Get single product by slug with language filtering\r\n * Uses custom REST API endpoint: /wp-json/sakwood/v1/products/{slug}?language=th\r\n */\r\nexport async function getProductBySlug(slug: string, language: string = 'th'): Promise<Product | null> {\r\n  try {\r\n    // The slug from Next.js is already decoded, but we need to URL-encode it for the API request\r\n    // This ensures Thai characters are properly encoded for the HTTP request\r\n    const encodedSlug = encodeURIComponent(slug);\r\n    const baseUrl = process.env.NEXT_PUBLIC_WORDPRESS_GRAPHQL_URL?.replace('/graphql', '') || 'http://localhost:8006';\r\n    const url = `${baseUrl}/wp-json/sakwood/v1/products/${encodedSlug}?language=${language}`;\r\n\r\n    const response = await fetch(url);\r\n\r\n    if (!response.ok) {\r\n      // If 404, product not found in this language\r\n      if (response.status === 404) {\r\n        return null;\r\n      }\r\n      console.error('Failed to fetch product:', response.status);\r\n      // Fall back to GraphQL\r\n      return getProductBySlugViaGraphQL(slug);\r\n    }\r\n\r\n    const product = await response.json();\r\n\r\n    if (!product || (product as any).code === 'product_not_found') {\r\n      return null;\r\n    }\r\n\r\n    // Transform data to match Product interface\r\n    return {\r\n      id: String(product.id),\r\n      databaseId: product.databaseId,\r\n      name: product.name,\r\n      slug: product.slug,\r\n      sku: product.sku || undefined,\r\n      language: product.language || 'th',\r\n      price: product.price || product.prices?.piece || undefined,\r\n      regularPrice: product.regularPrice || undefined,\r\n      priceTypes: product.priceTypes || ['piece'],\r\n      prices: product.prices || {},\r\n      image: product.image ? { sourceUrl: product.image.sourceUrl } : undefined,\r\n      description: product.description || '',\r\n      galleryImages: product.galleryImages ? {\r\n        nodes: product.galleryImages.nodes || []\r\n      } : undefined,\r\n      thickness: product.thickness || undefined,\r\n      width: product.width || undefined,\r\n      length: product.length || undefined,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error fetching product via REST API:', error);\r\n    // Fall back to GraphQL\r\n    return getProductBySlugViaGraphQL(slug);\r\n  }\r\n}\r\n\r\n/**\r\n * Fallback: Get product by slug via GraphQL (no language filtering)\r\n */\r\nasync function getProductBySlugViaGraphQL(slug: string): Promise<Product | null> {\r\n  const data = await graphqlRequest<ProductResponse>(GET_PRODUCT_QUERY, {\r\n    slug,\r\n  });\r\n  const product = data?.product;\r\n\r\n  if (!product) return null;\r\n\r\n  // Transform image URLs\r\n  return {\r\n    ...product,\r\n    image: transformProductImage(product.image),\r\n    galleryImages: product.galleryImages\r\n      ? {\r\n          nodes: product.galleryImages.nodes\r\n            .map(transformProductImage)\r\n            .filter((img): img is ProductImage => img !== undefined),\r\n        }\r\n      : undefined,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 523, "column": 0}, "map": {"version":3,"sources":["file:///D:/Works/Web/sakwood/sakwood-wp/frontend/app/%5Blang%5D/shop/ShopPage.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport type { Locale } from '@/i18n-config';\nimport type { Dictionary } from '@/lib/types';\nimport { ProductCard } from '@/components/ui';\nimport type { ProductCategory, ProductSortBy } from '@/lib/types';\nimport { getProductCategories, getProducts } from '@/lib/services/productService';\n\ninterface ShopPageProps {\n  lang: Locale;\n  dictionary: Dictionary;\n  initialProducts: any[];\n  initialCategories: ProductCategory[];\n}\n\nexport function ShopPage({\n  lang,\n  dictionary,\n  initialProducts,\n  initialCategories,\n}: ShopPageProps) {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const categoryParam = searchParams.get('category');\n  const sortParam = searchParams.get('sort') as ProductSortBy | null;\n\n  const [products, setProducts] = useState(initialProducts);\n  const [categories] = useState(initialCategories);\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(categoryParam);\n  const [sortBy, setSortBy] = useState<ProductSortBy | null>(sortParam);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Update products when category or sort changes\n  useEffect(() => {\n    async function loadProducts() {\n      setIsLoading(true);\n      const fetchedProducts = await getProducts(lang, selectedCategory || undefined, sortBy || undefined);\n      setProducts(fetchedProducts);\n      setIsLoading(false);\n    }\n\n    loadProducts();\n  }, [selectedCategory, sortBy, lang]);\n\n  const handleCategoryChange = (categorySlug: string | null) => {\n    setSelectedCategory(categorySlug);\n\n    // Update URL\n    const params = new URLSearchParams();\n    if (categorySlug) params.set('category', categorySlug);\n    if (sortBy) params.set('sort', sortBy);\n\n    router.push(`/${lang}/shop${params.toString() ? '?' + params.toString() : ''}`);\n  };\n\n  const handleSortChange = (newSortBy: ProductSortBy) => {\n    setSortBy(newSortBy);\n\n    // Update URL\n    const params = new URLSearchParams();\n    if (selectedCategory) params.set('category', selectedCategory);\n    params.set('sort', newSortBy);\n\n    router.push(`/${lang}/shop${params.toString() ? '?' + params.toString() : ''}`);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white py-16\">\n      <div className=\"max-w-7xl mx-auto px-6\">\n        {/* Header */}\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-5xl font-bold text-gray-900 mb-4\">\n            {dictionary.shop.title}\n          </h1>\n          <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n            {dictionary.shop.subtitle}\n          </p>\n        </div>\n\n        {/* Filters Bar */}\n        <div className=\"mb-12 space-y-6\">\n          {/* Category Filter */}\n          <div>\n            <div className=\"flex flex-wrap items-center gap-4 justify-center\">\n              <span className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide\">\n                {dictionary.shop.filter_by}:\n              </span>\n              <div className=\"flex flex-wrap gap-2\">\n                <button\n                  onClick={() => handleCategoryChange(null)}\n                  className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                    selectedCategory === null\n                      ? 'bg-blue-600 text-white shadow-lg'\n                      : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-200'\n                  }`}\n                >\n                  {dictionary.shop.all_categories}\n                </button>\n                {categories.map((category) => (\n                  <button\n                    key={category.id}\n                    onClick={() => handleCategoryChange(category.slug)}\n                    className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                      selectedCategory === category.slug\n                        ? 'bg-blue-600 text-white shadow-lg'\n                        : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-200'\n                    }`}\n                  >\n                    {category.name}\n                    {category.count !== undefined && (\n                      <span className=\"ml-2 text-sm opacity-75\">({category.count})</span>\n                    )}\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* Sort Options */}\n          <div className=\"flex items-center justify-center gap-4\">\n            <span className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide\">\n              {dictionary.shop.sort_by || 'Sort by'}:\n            </span>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => handleSortChange('name')}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  sortBy === 'name'\n                    ? 'bg-blue-600 text-white shadow-lg'\n                    : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-200'\n                }`}\n              >\n                {dictionary.shop.sort_name || 'Name'}\n              </button>\n              <button\n                onClick={() => handleSortChange('price')}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  sortBy === 'price'\n                    ? 'bg-blue-600 text-white shadow-lg'\n                    : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-200'\n                }`}\n              >\n                {dictionary.shop.sort_price || 'Price'}\n              </button>\n              <button\n                onClick={() => handleSortChange('date')}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  sortBy === 'date'\n                    ? 'bg-blue-600 text-white shadow-lg'\n                    : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-200'\n                }`}\n              >\n                {dictionary.shop.sort_newest || 'Newest'}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Products Grid */}\n        {isLoading ? (\n          <div className=\"text-center py-16\">\n            <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent\"></div>\n            <p className=\"mt-4 text-gray-600\">{dictionary.shop.loading}</p>\n          </div>\n        ) : products.length > 0 ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\n            {products.map((product) => (\n              <ProductCard key={product.id} product={product} lang={lang} dictionary={dictionary} />\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-16\">\n            <div className=\"text-gray-400 text-6xl mb-4\">\n              <svg className=\"w-24 h-24 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\n              </svg>\n            </div>\n            <h3 className=\"text-2xl font-bold text-gray-700 mb-2\">\n              {dictionary.shop.no_products}\n            </h3>\n            <p className=\"text-gray-500 mb-6\">\n              {dictionary.shop.no_products_desc}\n            </p>\n            <Link\n              href={`/${lang === 'th' ? 'en' : 'th'}/shop`}\n              className=\"inline-block px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              {dictionary.shop.view_other_lang}\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}